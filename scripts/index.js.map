{
  "version": 3,
  "sources": ["../src/index.ts", "../src/lib/Command/index.ts", "../src/config/commands.ts", "../src/database/Database.ts", "../src/config/database.ts", "../src/lib/Events/EntitiesLoad.ts", "../src/utils.ts", "../src/lib/Form/Models/MessageForm.ts", "../src/database/tables.ts", "../src/lib/Command/ArgumentTypes.ts", "../src/lib/Command/Callback.ts", "../src/lib/Command/utils.ts", "../src/lib/Chest GUI/index.ts", "../src/config/chest.ts", "../src/plugins/Anti-Cheat/utils.ts", "../src/plugins/Anti-Cheat/modules/models/Region.ts", "../src/plugins/Anti-Cheat/config/region.ts", "../src/plugins/Anti-Cheat/modules/models/Task.ts", "../src/plugins/Anti-Cheat/config/moderation.ts", "../src/plugins/Anti-Cheat/config/enchantments.ts", "../src/config/app.ts", "../src/lib/Chest GUI/Models/EntityChest.ts", "../src/lib/Events/onSlotChange.ts", "../src/lib/Chest GUI/utils.ts", "../src/lib/Chest GUI/Models/ItemGrabbedCallback.ts", "../src/lib/Chest GUI/Models/PageItem.ts", "../src/lib/Chest GUI/Models/FillTypes.ts", "../src/lib/Chest GUI/Models/Page.ts", "../src/lib/Chest GUI/pages/home.ts", "../src/plugins/Anti-Cheat/protections.ts", "../src/lang/text.ts", "../src/lib/Command/Command.ts", "../src/plugins/Anti-Cheat/modules/models/Ban.ts", "../src/plugins/Anti-Cheat/modules/commands/ban.ts", "../src/plugins/Anti-Cheat/modules/commands/broadcast.ts", "../src/plugins/Anti-Cheat/modules/commands/database.ts", "../src/plugins/Anti-Cheat/modules/commands/ecwipe.ts", "../src/plugins/Anti-Cheat/modules/models/Freeze.ts", "../src/plugins/Anti-Cheat/modules/commands/freeze.ts", "../src/plugins/Anti-Cheat/modules/commands/help.ts", "../src/plugins/Anti-Cheat/modules/commands/lockdown.ts", "../src/plugins/Anti-Cheat/modules/models/Mute.ts", "../src/plugins/Anti-Cheat/modules/commands/mute.ts", "../src/plugins/Anti-Cheat/modules/commands/npc.ts", "../src/plugins/Anti-Cheat/modules/models/Npc.ts", "../src/plugins/Anti-Cheat/modules/commands/ping.ts", "../src/plugins/Anti-Cheat/modules/commands/region.ts", "../src/types.ts", "../src/plugins/Anti-Cheat/modules/commands/role.ts", "../src/lib/Form/Models/ActionForm.ts", "../src/lib/Form/Models/ModelForm.ts", "../src/lib/Form/Models/FormCallback.ts", "../src/plugins/Anti-Cheat/modules/forms/settings.ts", "../src/plugins/Anti-Cheat/modules/forms/automod.ts", "../src/plugins/Anti-Cheat/modules/forms/home.ts", "../src/plugins/Anti-Cheat/modules/commands/settings.ts", "../src/plugins/Anti-Cheat/modules/commands/vanish.ts", "../src/plugins/Anti-Cheat/modules/commands/version.ts", "../src/plugins/Anti-Cheat/modules/commands/kick.ts", "../src/plugins/Anti-Cheat/modules/models/Log.ts", "../src/plugins/Anti-Cheat/modules/commands/log.ts", "../src/plugins/Anti-Cheat/modules/commands/teleport.ts", "../src/plugins/Anti-Cheat/modules/managers/ban.ts", "../src/plugins/Anti-Cheat/modules/managers/freeze.ts", "../src/lib/Events/beforeChat.ts", "../src/plugins/Anti-Cheat/modules/managers/mute.ts", "../src/plugins/Anti-Cheat/modules/managers/region.ts", "../src/plugins/Anti-Cheat/modules/events/playerJoin.ts", "../src/plugins/Anti-Cheat/modules/pages/see.ts", "../src/plugins/Anti-Cheat/modules/protections/cbe.ts", "../src/plugins/Anti-Cheat/modules/models/Protection.ts", "../src/plugins/Anti-Cheat/modules/protections/crasher.ts", "../src/plugins/Anti-Cheat/modules/protections/gamemode.ts", "../src/plugins/Anti-Cheat/modules/models/PlayerLog.ts", "../src/lib/Events/beforeBlockBreak.ts", "../src/plugins/Anti-Cheat/modules/managers/containers.ts", "../src/plugins/Anti-Cheat/modules/models/BlockInventory.ts", "../src/plugins/Anti-Cheat/modules/protections/nuker.ts", "../src/plugins/Anti-Cheat/modules/protections/spam.ts", "../src/plugins/Anti-Cheat/modules/protections/unobtainable.ts", "../src/plugins/Anti-Cheat/modules/protections/nbt.ts", "../src/plugins/Anti-Cheat/modules/events/beforeDataDrivenEntityTriggerEvent.ts", "../src/plugins/Anti-Cheat/modules/events/worldInitialize.ts", "../src/config/objectives.ts", "../src/plugins/Anti-Cheat/index.ts", "../src/plugins/import.ts", "../src/database/index.ts"],
  "sourcesContent": ["console.warn(`---- STARTING RUBEDO ----`);\r\nimport {\r\n  ItemStack,\r\n  MinecraftItemTypes,\r\n  system,\r\n} from \"@minecraft/server\";\r\nimport \"./lib/Command/index\";\r\nimport \"./lib/Chest GUI/index\";\r\n// import \"./lib/Schedule/index\";\r\nimport \"./plugins/import\";\r\nimport \"./database/index\";\r\n\r\nsystem.events.beforeWatchdogTerminate.subscribe((data) => {\r\n  data.cancel = true;\r\n  console.warn(`WATCHDOG TRIED TO CRASH = ${data.terminateReason}`);\r\n});\r\n\r\n/**\r\n * This is air as a item,\r\n */\r\nexport const AIR = new ItemStack(MinecraftItemTypes.stick, 0);", "import { Player, BeforeChatEvent, world } from \"@minecraft/server\";\r\nimport { PREFIX } from \"../../config/commands\";\r\nimport type { Command } from \"./Command\";\r\nimport { TABLES } from \"../../database/tables\";\r\nimport {\r\n  commandNotFound,\r\n  commandSyntaxFail,\r\n  getChatAugments,\r\n  noPerm,\r\n  sendCallback,\r\n} from \"./utils\";\r\n\r\n/**\r\n * An array of all active commands\r\n */\r\nexport const COMMANDS: Command<any>[] = [];\r\n\r\nworld.events.beforeChat.subscribe((data) => {\r\n  if (!data.message.startsWith(PREFIX)) {\r\n    // This is not a command\r\n    data.cancel = true;\r\n    var name = data.sender.name;\r\n    var role = TABLES.roles.get(name) ?? \"member\";\r\n    var color_code = \"6\";\r\n    if (role == \"admin\") color_code = \"a\";\r\n    if (role == \"member\") color_code = \"6\";\r\n    if (role == \"moderator\") color_code = \"c\";\r\n    if (role == \"builder\") color_code = \"b\";\r\n    world.say({\r\n      \"rawtext\":[\r\n          {\"text\":`\u00A7${color_code}\u00A7l[${role.toUpperCase()}\u00A7${color_code}\u00A7l]\u00A7r \u00A73${name}\u00A7c: \u00A7f${data.message}\u00A7r`},\r\n      ]\r\n  });\r\n  } else {\r\n    data.cancel = true;\r\n    const args = getChatAugments(data.message, PREFIX);\r\n    const command = COMMANDS.find(\r\n      (c) =>\r\n        c.depth == 0 &&\r\n        (c.data.name == args[0] || c.data?.aliases?.includes(args[0]))\r\n    );\r\n    const event = {\r\n      message: data.message,\r\n      sendToTargets: data.sendToTargets,\r\n      sender: data.sender,\r\n      targets: data.targets,\r\n    } as BeforeChatEvent;\r\n    if (!command) return commandNotFound(data.sender, args[0]);\r\n    if (!command.data?.requires(data.sender))\r\n      return noPerm(event.sender, command);\r\n    args.shift(); // Remove first command so we can look at args\r\n    // Check Args/SubCommands for errors\r\n    const verifiedCommands: Command[] = [];\r\n    const getArg = (start: Command<any>, i: number): string => {\r\n      if (start.children.length > 0) {\r\n        const arg = start.children.find((v) => v.type.matches(args[i]).success);\r\n        if (!arg && !args[i] && start.callback) return;\r\n        if (!arg)\r\n          return commandSyntaxFail(event.sender, command, start, args, i), \"fail\";\r\n        if (!arg.data?.requires(event.sender))\r\n          return noPerm(event.sender, arg), \"fail\";\r\n        verifiedCommands.push(arg);\r\n        return getArg(arg, i + 1);\r\n      }\r\n    };\r\n    let v = getArg(command, 0);\r\n    if (v == \"fail\") return;\r\n    sendCallback(args, verifiedCommands, event, command);\r\n  }\r\n});\r\n", "/*\r\n|--------------------------------------------------------------------------\r\n| Command Prefix\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the prefix of the commands that are send in chat\r\n| changing this changes what people have to type in before using\r\n| a command for instance: -help. (-) is the command prefix.\r\n|\r\n*/\r\nexport const PREFIX = \"-\";\r\n", "import { Entity, ItemStack, MinecraftItemTypes } from \"@minecraft/server\";\r\nimport {\r\n  ENTITY_IDENTIFIER,\r\n  ENTITY_LOCATION,\r\n  INVENTORY_SIZE,\r\n  MAX_DATABASE_STRING_SIZE,\r\n} from \"../config/database\";\r\nimport { EntitiesLoad } from \"../lib/Events/EntitiesLoad\";\r\nimport { DIMENSIONS } from \"../utils\";\r\nimport { chunkString } from \"../utils\";\r\n\r\nexport class Database<Key extends string = string, Value = {}> {\r\n  /**\r\n   * Creates a table entity that is used for data storage\r\n   * @param tableName\r\n   * @param index if not specified no index will be set\r\n   * @returns\r\n   */\r\n  static createTableEntity(tableName: string, index?: number): Entity {\r\n    const entity = DIMENSIONS.overworld.spawnEntity(\r\n      ENTITY_IDENTIFIER,\r\n      ENTITY_LOCATION\r\n    );\r\n    entity.setDynamicProperty(\"tableName\", tableName);\r\n    entity.nameTag = `\u00A7aDatabase Table: ${tableName}\u00A7r`;\r\n    if (index) entity.setDynamicProperty(\"index\", index);\r\n    return entity;\r\n  }\r\n\r\n  /**\r\n   * Gets all table Entities associated with this tableName\r\n   * @param tableName\r\n   * @returns\r\n   */\r\n  static getTableEntities(tableName: string): Entity[] {\r\n    return DIMENSIONS.overworld\r\n      .getEntitiesAtBlockLocation(ENTITY_LOCATION)\r\n      .filter(\r\n        (e) =>\r\n          e.typeId == ENTITY_IDENTIFIER &&\r\n          e.getDynamicProperty(\"tableName\") == tableName\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Data saved in memory\r\n   */\r\n  private MEMORY: { [key in Key]: Value } | null;\r\n\r\n  /**\r\n   * List of queued tasks on this table\r\n   */\r\n  private QUEUE: Array<() => void>;\r\n\r\n  constructor(public tableName: string) {\r\n    this.tableName = tableName;\r\n    this.MEMORY = null;\r\n    this.QUEUE = [];\r\n    EntitiesLoad.subscribe(async () => {\r\n      await this.initData();\r\n      this.QUEUE.forEach((v) => v());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Adds a queue task to be awaited\r\n   * @returns once its this items time to run in queue\r\n   */\r\n  private async addQueueTask(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.QUEUE.push(resolve);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Saves data into this database\r\n   * @param data\r\n   * @returns once data is saved\r\n   */\r\n  private async saveData(): Promise<void> {\r\n    if (!this.MEMORY) await this.addQueueTask();\r\n\r\n    let entities = Database.getTableEntities(this.tableName);\r\n    /**\r\n     * The split chunks of the stringified data, This is done because we can\r\n     * only store {@link MAX_DATABASE_STRING_SIZE} chars in a single nameTag\r\n     */\r\n    let chunks = chunkString(\r\n      JSON.stringify(this.MEMORY),\r\n      MAX_DATABASE_STRING_SIZE\r\n    );\r\n    /**\r\n     * The amount of entities that is needed to store {@link chunks} data\r\n     */\r\n    const entitiesNeeded =\r\n      Math.ceil(chunks.length / INVENTORY_SIZE) - entities.length;\r\n    if (entitiesNeeded > 0) {\r\n      for (let i = 0; i < entitiesNeeded; i++) {\r\n        entities.push(Database.createTableEntity(this.tableName));\r\n      }\r\n    }\r\n    for (const [i, entity] of entities.entries()) {\r\n      const inventory = entity.getComponent(\"inventory\").container;\r\n      for (const [i, chunk] of chunks.entries()) {\r\n        if (!chunk) continue;\r\n        if (i > inventory.size - 1) break; // Exit because it has maxed items\r\n        let item = new ItemStack(MinecraftItemTypes.acaciaBoat);\r\n        item.nameTag = chunk;\r\n        inventory.setItem(i, item);\r\n        chunks[i] = null; // Delete chunk because its been set.\r\n      }\r\n      // Set all unUsed slots to air\r\n      for (let i = chunks.length + 1; i < inventory.size; i++) {\r\n        inventory.setItem(i, new ItemStack(MinecraftItemTypes.stick, 0));\r\n      }\r\n      entity.setDynamicProperty(\"index\", i);\r\n      entities[i] = null; // Set this entity to null because its maxed out!\r\n      // If all chunks have been saved no need to go to next entity\r\n      if (!chunks.find((v) => v)) break;\r\n    }\r\n    // Check for unUsed entities and despawn them\r\n    entities.filter((e) => e).forEach((e) => e.triggerEvent(\"despawn\"));\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Grabs Data and should only be used on worldLoad\r\n   * @returns\r\n   */\r\n  private async initData(): Promise<{ [key in Key]: Value }> {\r\n    let entities = Database.getTableEntities(this.tableName).sort(\r\n      (a, b) =>\r\n        (a.getDynamicProperty(\"index\") as number) -\r\n        (b.getDynamicProperty(\"index\") as number)\r\n    );\r\n    let stringifiedData: string = \"\";\r\n    for (const entity of entities) {\r\n      const inventory = entity.getComponent(\"inventory\").container;\r\n      for (let i = 0; i < inventory.size; i++) {\r\n        const item = inventory.getItem(i);\r\n        if (!item) continue;\r\n        stringifiedData = stringifiedData + item.nameTag;\r\n      }\r\n    }\r\n    const data = stringifiedData == \"\" ? {} : JSON.parse(stringifiedData);\r\n    this.MEMORY = data;\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * Sets a key to a value in this table\r\n   * @param key\r\n   * @param value\r\n   */\r\n  async set(key: Key, value: Value): Promise<void> {\r\n    this.MEMORY[key] = value;\r\n    return this.saveData();\r\n  }\r\n\r\n  /**\r\n   * Gets a value from this table\r\n   * @param key\r\n   * @returns the keys corresponding key\r\n   */\r\n  get(key: Key): Value {\r\n    if (!this.MEMORY)\r\n      throw new Error(\r\n        \"Entities not loaded! Consider using `getAsync` instead!\"\r\n      );\r\n    return this.MEMORY[key];\r\n  }\r\n\r\n  /**\r\n   * Gets a value async from this table, this should be used on calls from like\r\n   * entityCreate, system.runSchedule or things that could be before database entities spawn\r\n   * @param key\r\n   * @returns\r\n   */\r\n  async getSync(key: Key): Promise<Value> {\r\n    if (this.MEMORY) return this.get(key);\r\n    await this.addQueueTask();\r\n    return this.MEMORY[key];\r\n  }\r\n\r\n  /**\r\n   * Get all the keys in the table\r\n   * @returns\r\n   */\r\n  keys(): Key[] {\r\n    if (!this.MEMORY)\r\n      throw new Error(\r\n        \"Entities not loaded! Consider using `keysSync` instead!\"\r\n      );\r\n    return Object.keys(this.MEMORY) as Key[];\r\n  }\r\n\r\n  /**\r\n   * Get all the keys in the table async, this should be used on world load\r\n   * @returns\r\n   */\r\n  async keysSync(): Promise<Key[]> {\r\n    if (this.MEMORY) return this.keys();\r\n    await this.addQueueTask();\r\n    return Object.keys(this.MEMORY) as Key[];\r\n  }\r\n\r\n  /**\r\n   * Get all the values in the table\r\n   * @returns\r\n   */\r\n  values(): Value[] {\r\n    if (!this.MEMORY)\r\n      throw new Error(\r\n        \"Entities not loaded! Consider using `valuesSync` instead!\"\r\n      );\r\n    return Object.values(this.MEMORY) as Value[];\r\n  }\r\n\r\n  /**\r\n   * Get all the values in the table async, this should be used on world load\r\n   * @returns\r\n   */\r\n  async valuesSync(): Promise<Value[]> {\r\n    if (this.MEMORY) return this.values();\r\n    await this.addQueueTask();\r\n    return Object.values(this.MEMORY) as Value[];\r\n  }\r\n\r\n  /**\r\n   * Check if the key exists in the table\r\n   * @param key the key to test\r\n   * @returns\r\n   */\r\n  has(key: Key): boolean {\r\n    if (!this.MEMORY)\r\n      throw new Error(\"Entities not loaded! Consider using `hasSync` instead!\");\r\n    return (Object.keys(this.MEMORY) as Key[]).includes(key);\r\n  }\r\n\r\n  /**\r\n   * Check if the key exists in the table async, this should be used on worldLoad\r\n   * @param key the key to test\r\n   * @returns\r\n   */\r\n  async hasSync(key: Key): Promise<boolean> {\r\n    if (this.MEMORY) return this.has(key);\r\n    await this.addQueueTask();\r\n    return (Object.keys(this.MEMORY) as Key[]).includes(key);\r\n  }\r\n\r\n  /**\r\n   * Gets all the keys and values\r\n   * @returns\r\n   */\r\n  collection(): { [key in Key]: Value } {\r\n    if (!this.MEMORY)\r\n      throw new Error(\r\n        \"Entities not loaded! Consider using `collectionSync` instead!\"\r\n      );\r\n    return this.MEMORY;\r\n  }\r\n\r\n  /**\r\n   * Gets all the keys and values async, this should be used for grabbingCollection on world load\r\n   * @returns\r\n   */\r\n  async collectionSync(): Promise<{ [key in Key]: Value }> {\r\n    if (this.MEMORY) return this.collection();\r\n    await this.addQueueTask();\r\n    return this.MEMORY;\r\n  }\r\n\r\n  /**\r\n   * Delete the key from the table\r\n   * @param key the key to delete\r\n   * @returns\r\n   */\r\n  async delete(key: Key): Promise<boolean> {\r\n    const status = delete this.MEMORY[key];\r\n    await this.saveData();\r\n    return status;\r\n  }\r\n\r\n  /**\r\n   * Clear everything in the table\r\n   */\r\n  async clear(): Promise<void> {\r\n    this.MEMORY = {} as { [key in Key]: Value };\r\n    return await this.saveData();\r\n  }\r\n}\r\n", "import { BlockLocation } from \"@minecraft/server\";\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Max Database string size\r\n|--------------------------------------------------------------------------\r\n|\r\n| Here is the max database save size meaning when a save gets made\r\n| it tests the size of that save and splits up the save depending on this\r\n| Size. It's related to Minecraft's 32k bit limit.\r\n|\r\n*/\r\nexport const MAX_DATABASE_STRING_SIZE = 32000;\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Entity Id\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the entity id of the database this is what stores the information\r\n| of the database on its nameTag\r\n|\r\n*/\r\nexport const ENTITY_IDENTIFIER = \"rubedo:database\";\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Entity Spawn Location\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the spawn location of the database entities there will be\r\n| Multiple entities at this location for each chunk\r\n|\r\n*/\r\nexport const ENTITY_LOCATION = new BlockLocation(0, -64, 0);\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Entity's INVENTORY_SIZE\r\n|--------------------------------------------------------------------------\r\n|\r\n| The max amount of items this entity can store in its inventory\r\n|\r\n*/\r\nexport const INVENTORY_SIZE = 128;\r\n", "import { system, world } from \"@minecraft/server\";\r\nimport { DIMENSIONS } from \"../../utils\";\r\n\r\nconst CALLBACKS: {\r\n  [key: number]: () => void;\r\n} = {};\r\n\r\n/**\r\n * If the world is loaded or not\r\n */\r\nexport let ENTITIES_LOADED = false;\r\n\r\nsystem.run(async () => {\r\n  try {\r\n    await DIMENSIONS.overworld.runCommandAsync(`testfor @a`);\r\n    ENTITIES_LOADED = true;\r\n    for (const [i, callback] of Object.entries(CALLBACKS)) {\r\n      callback();\r\n      delete CALLBACKS[i as unknown as number];\r\n    }\r\n  } catch (error) {\r\n    let e = world.events.entityCreate.subscribe((data) => {\r\n      system.run(() => {\r\n        ENTITIES_LOADED = true;\r\n        for (const [i, callback] of Object.entries(CALLBACKS)) {\r\n          callback();\r\n          delete CALLBACKS[i as unknown as number];\r\n        }\r\n        world.events.entityCreate.unsubscribe(e);\r\n      });\r\n    });\r\n  }\r\n});\r\n\r\nexport class EntitiesLoad {\r\n  static async awaitLoad(): Promise<void> {\r\n    if (ENTITIES_LOADED) return;\r\n    return new Promise((resolve) => {\r\n      EntitiesLoad.subscribe(resolve);\r\n    });\r\n  }\r\n  static subscribe(callback: () => void): number {\r\n    if (ENTITIES_LOADED) {\r\n      callback();\r\n      return;\r\n    }\r\n    const key = Object.keys(CALLBACKS).length;\r\n    CALLBACKS[key] = callback;\r\n    return key;\r\n  }\r\n\r\n  static unsubscribe(key: number): void {\r\n    delete CALLBACKS[key];\r\n  }\r\n}\r\n", "import {\r\n  BlockLocation,\r\n  Entity,\r\n  Location,\r\n  MinecraftDimensionTypes,\r\n  Player,\r\n  system,\r\n  Vector3,\r\n  world,\r\n} from \"@minecraft/server\";\r\nimport { TABLES } from \"./database/tables\";\r\nimport { MessageForm } from \"./lib/Form/Models/MessageForm\";\r\nimport { durationSegment, durationSegmentType } from \"./types\";\r\n\r\n/**\r\n * This is to reduce lag when grabbing dimensions keep them set and pre-defined\r\n */\r\nexport const DIMENSIONS = {\r\n  overworld: world.getDimension(MinecraftDimensionTypes.overworld),\r\n  nether: world.getDimension(MinecraftDimensionTypes.nether),\r\n  theEnd: world.getDimension(MinecraftDimensionTypes.theEnd),\r\n  \"minecraft:overworld\": world.getDimension(MinecraftDimensionTypes.overworld),\r\n  \"minecraft:nether\": world.getDimension(MinecraftDimensionTypes.nether),\r\n  \"minecraft:the_end\": world.getDimension(MinecraftDimensionTypes.theEnd),\r\n};\r\n\r\n/**\r\n * Get score of an entity\r\n * @example getScore(Entity, 'Money');\r\n */\r\nexport function getScore(entity: Entity, objective: string): number {\r\n  try {\r\n    return world.scoreboard.getObjective(objective).getScore(entity.scoreboard);\r\n  } catch (error) {\r\n    return 0;\r\n  }\r\n}\r\n\r\n/**\r\n * sets the score of a name\r\n * @example setScore(\"Smell of curry\", 'Money');\r\n */\r\nexport function setScore(\r\n  entityName: string,\r\n  objective: string,\r\n  value: Number\r\n): void {\r\n  try {\r\n    DIMENSIONS.overworld.runCommandAsync(\r\n      `scoreboard players set \"${entityName}\" ${objective} ${value}`\r\n    );\r\n  } catch (error) {\r\n    console.warn(error + error.stack);\r\n  }\r\n}\r\n\r\n/**\r\n * Gets a players id based on a saved database values\r\n * @param playerName playerName to get\r\n */\r\nexport function getId(playerName: string): string | null {\r\n  return TABLES.ids.get(playerName);\r\n}\r\n\r\n/**\r\n * Duration converter\r\n * @param duration time to convert\r\n * @example ```\r\n * durationToMs(\"10s\")\r\n * durationToMs(\"10d,2y\")\r\n * durationToMs(\"5m\")\r\n * durationToMs(\"23ms,10s\")\r\n * ```\r\n */\r\nexport function durationToMs(duration: string): number {\r\n  /**\r\n   * This holds the different duration values this duration can have\r\n   * @example `[\"10d\", \"20s\", \"2h\"]`\r\n   * @example `[\"2h\"]`\r\n   */\r\n  const values: durationSegment[] = duration.split(\",\") as durationSegment[];\r\n  console.warn(values.length);\r\n  let ms = 0;\r\n  for (const value of values) {\r\n    const length = parseInt(value.match(/\\D+|\\d+/g)[0]);\r\n    const unit = value.match(/\\D+|\\d+/g)[1] as durationSegmentType;\r\n    if (unit == \"y\") ms = ms + 3.17098e-11 * length;\r\n    if (unit == \"w\") ms = ms + 6.048e8 * length;\r\n    if (unit == \"d\") ms = ms + 8.64e7 * length;\r\n    if (unit == \"h\") ms = ms + 3.6e6 * length;\r\n    if (unit == \"m\") ms = ms + 60000 * length;\r\n    if (unit == \"s\") ms = ms + 1000 * length;\r\n    if (unit == \"ms\") ms = ms + length;\r\n  }\r\n  return ms;\r\n}\r\n\r\n/**\r\n * Converts a date stored in ms to a Date string\r\n * @param duration milliseconds to convert\r\n * @returns Date as a string\r\n */\r\nexport function msToTime(duration: number) {\r\n  return new Date(duration).toString();\r\n}\r\n\r\n/**\r\n * Converts a location to a block location\r\n */\r\nexport function vector3ToBlockLocation(loc: Vector3): BlockLocation {\r\n  return new BlockLocation(\r\n    Math.floor(loc.x),\r\n    Math.floor(loc.y),\r\n    Math.floor(loc.z)\r\n  );\r\n}\r\n\r\n/**\r\n * Sends a confirmation message to a player to confirm a action\r\n * @param action action message to confirm\r\n * @param onConfirm callback to run when a player confirms the action\r\n * @param onCancel callback to run when a player cancels the action, this can be null\r\n * @example ```\r\n * confirmAction(\"Ban Smell of curry\", () => {\r\n * new Ban(\"Smell of curry\")\r\n * })\r\n * ```\r\n */\r\nexport function confirmAction(\r\n  player: Player,\r\n  action: string,\r\n  onConfirm: () => void,\r\n  onCancel: () => void = () => {}\r\n) {\r\n  new MessageForm(\"Confirm To Continue\", action)\r\n    .setButton1(\"Confirm\", onConfirm)\r\n    .setButton2(\"Never Mind\", onCancel)\r\n    .show(player);\r\n}\r\n\r\n/**\r\n * Sleeps your code\r\n * @param {number} tick time in ticks you want the return to occur\r\n * @returns {Promise<void>}\r\n */\r\nexport function sleep(tick: number): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    let runScheduleId = system.runSchedule(() => {\r\n      resolve();\r\n      system.clearRunSchedule(runScheduleId);\r\n    }, tick);\r\n  });\r\n}\r\n\r\n/**\r\n * Checks if a location equals another location\r\n * @param a first location\r\n * @param b location to test against first\r\n * @returns {boolean} if they locations are the same\r\n */\r\nexport function LocationEquals(\r\n  a: Vector3 | Location | BlockLocation,\r\n  b: Vector3 | Location | BlockLocation\r\n): boolean {\r\n  let aLocations = [a.x, a.y, a.z];\r\n  let bLocations = [a.x, a.y, a.z];\r\n  if (a instanceof BlockLocation || b instanceof BlockLocation) {\r\n    aLocations = aLocations.map((v) => Math.trunc(v));\r\n    bLocations = bLocations.map((v) => Math.trunc(v));\r\n  }\r\n  return aLocations.find((v, i) => bLocations[i] != v) ? false : true;\r\n}\r\n\r\n/**\r\n * Sorts 3D vectors to a min and max vector\r\n * @param vector1\r\n * @param vector2\r\n * @returns {[Vector3, Vector3]}\r\n * @author \"mrpatches123\"\r\n */\r\nexport function sort3DVectors(\r\n  vector1: Vector3,\r\n  vector2: Vector3\r\n): [Vector3, Vector3] {\r\n  const { x: x1, y: y1, z: z1 } = vector1;\r\n  const { x: x2, y: y2, z: z2 } = vector2;\r\n  const ox1 = x1 < x2 ? x1 : x2;\r\n  const oy1 = y1 < y2 ? y1 : y2;\r\n  const oz1 = z1 < z2 ? z1 : z2;\r\n  const ox2 = x1 < x2 ? x2 : x1;\r\n  const oy2 = y1 < y2 ? y2 : y1;\r\n  const oz2 = z1 < z2 ? z2 : z1;\r\n  return [\r\n    { x: ox1, y: oy1, z: oz1 },\r\n    { x: ox2, y: oy2, z: oz2 },\r\n  ];\r\n}\r\n\r\n/**\r\n * Checks if a target vector is between two vectors\r\n * @param target\r\n * @param vector1\r\n * @param vector2\r\n * @returns\r\n * @author \"mrpatches123\"\r\n */\r\nexport function betweenVector3(\r\n  target: Vector3,\r\n  vector1: Vector3,\r\n  vector2: Vector3\r\n): boolean {\r\n  const [{ x: x1, y: y1, z: z1 }, { x: x2, y: y2, z: z2 }] = sort3DVectors(\r\n    vector1,\r\n    vector2\r\n  );\r\n  let { x, y, z } = target;\r\n  return x >= x1 && x <= x2 && y >= y1 && y <= y2 && z >= z1 && z <= z2;\r\n}\r\n\r\n/**\r\n * Splits a string into chunk sizes\r\n */\r\nexport function chunkString(str: string, length: number): string[] {\r\n  return str.match(new RegExp(\".{1,\" + length + \"}\", \"g\"));\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { MessageFormData } from \"@minecraft/server-ui\";\r\nimport { TIMEOUT_THRESHOLD } from \"../../../config/form\";\r\nimport type { ButtonCallback, IMessageFormButton } from \"../types\";\r\n\r\nexport class MessageForm {\r\n  /**\r\n   *  the title that this form should have\r\n   */\r\n  title?: string;\r\n  /**\r\n   * extra text that should be displayed in the form\r\n   */\r\n  body?: string;\r\n  /**\r\n   * The default minecraft form this form is based on\r\n   */\r\n  private form: MessageFormData;\r\n  /**\r\n   * the first button of the dialog.\r\n   */\r\n  private button1: IMessageFormButton;\r\n  /**\r\n   * the second button of the dialog.\r\n   */\r\n  private button2: IMessageFormButton;\r\n  /**\r\n   * The amount of times it takes to show this form in ms\r\n   * if this value goes above 200 it will time out\r\n   */\r\n  private triedToShow: number;\r\n\r\n  /**\r\n   * Creates a new form to be shown to a player\r\n   * @param title the title that this form should have\r\n   * @param body extra text that should be displayed in the form\r\n   */\r\n  constructor(title?: string, body?: string) {\r\n    this.title = title;\r\n    this.body = body;\r\n    this.form = new MessageFormData();\r\n\r\n    if (title) this.form.title(title);\r\n    if (body) this.form.body(body);\r\n\r\n    this.triedToShow = 0;\r\n  }\r\n\r\n  /**\r\n   * Method that sets the text for the first button of the dialog.\r\n   * @param text text to show on this button\r\n   * @param callback what happens when this button is clicked\r\n   * @example ```\r\n   * setButton1(\"settings\", () => {})\r\n   * ```\r\n   */\r\n  setButton1(text: string, callback?: ButtonCallback): MessageForm {\r\n    this.button1 = { text: text, callback: callback };\r\n    this.form.button1(text);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Method that sets the text for the second button of the dialog.\r\n   * @param text text to show on this button\r\n   * @param callback what happens when this button is clicked\r\n   * @example ```\r\n   * setButton2(\"settings\", () => {})\r\n   * ```\r\n   */\r\n  setButton2(text: string, callback?: ButtonCallback): MessageForm {\r\n    this.button2 = { text: text, callback: callback };\r\n    this.form.button2(text);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows this form to the player\r\n   * @param player player to show to\r\n   */\r\n  show(player: Player): void {\r\n    this.form.show(player).then((response) => {\r\n      if (response.canceled) {\r\n        if (response.cancelationReason == \"userBusy\") {\r\n          // check time and reshow form\r\n          if (this.triedToShow > TIMEOUT_THRESHOLD)\r\n            return player.tell(\r\n              `\u00A7cForm Timeout: tried to show form, but you were busy (close chat after running command)`\r\n            );\r\n          this.triedToShow++;\r\n          this.show(player);\r\n        }\r\n        return;\r\n      }\r\n      if (response.selection == 1) this.button1?.callback?.();\r\n      if (response.selection == 0) this.button2?.callback?.();\r\n    });\r\n  }\r\n}\r\n", "import type {\r\n  IRegionDB,\r\n  IMuteData,\r\n  IBanData,\r\n  IFreezeData,\r\n  INpcLocation,\r\n  LogData,\r\n  GAMEMODE,\r\n  IProtectionsConfig,\r\n} from \"../types\";\r\nimport type { ROLES } from \"../types\";\r\nimport { Database } from \"./Database\";\r\n\r\n/**\r\n * All the Database tables that are created\r\n */\r\nexport const TABLES = {\r\n  config: new Database<string, any>(\"config\"),\r\n  freezes: new Database<string, IFreezeData>(\"freezes\"),\r\n  mutes: new Database<string, IMuteData>(\"mutes\"),\r\n  bans: new Database<string, IBanData>(\"bans\"),\r\n  regions: new Database<string, IRegionDB>(\"regions\"),\r\n  roles: new Database<string, keyof typeof ROLES>(\"roles\"),\r\n  tasks: new Database<string, any>(\"tasks\"),\r\n  npcs: new Database<string, INpcLocation>(\"npcs\"),\r\n  ids: new Database<string, string>(\"ids\"),\r\n  logs: new Database<string, LogData>(\"logs\"),\r\n  gamemode: new Database<string, keyof typeof GAMEMODE>(\"gamemode\"),\r\n  protections: new Database<string, IProtectionsConfig>(\"protections\"),\r\n};\r\n", "import { Player, world } from \"@minecraft/server\";\r\nimport { TABLES } from \"../../database/tables\";\r\n\r\n/**\r\n * Fetch an online players data\r\n */\r\nexport function fetch(playerName: string): Player | null {\r\n  return [...world.getPlayers()].find((player) => player.name === playerName);\r\n}\r\n\r\nexport interface IArgumentReturnData<T> {\r\n  /**\r\n   * If this argument matches the value\r\n   */\r\n  success: boolean;\r\n  /**\r\n   * The parsed value that should be passed in command callback\r\n   * if there is no return type this will be null\r\n   */\r\n  value?: T;\r\n}\r\n\r\nexport abstract class IArgumentType {\r\n  /**\r\n   * The return type\r\n   */\r\n  type: any;\r\n  /**\r\n   * The name that the help for this command will see\r\n   * @example \"string\"\r\n   * @example \"Location\"\r\n   * @example \"int\"\r\n   * @example \"number\"\r\n   * @example \"UnitType\"\r\n   */\r\n  typeName: string;\r\n  /**\r\n   * The name this argument is\r\n   */\r\n  name: string = \"name\";\r\n  /**\r\n   * Checks if a value matches this argument type, also\r\n   * returns the corresponding type\r\n   */\r\n  matches(value: string): IArgumentReturnData<any> {\r\n    return { success: true };\r\n  }\r\n  /**\r\n   * the fail message that should be sent if player fails to meet the matches criteria\r\n   * @param value value that was sent\r\n   * @returns what would happen if you didn't enter the right value\r\n   */\r\n  fail(value: string): string {\r\n    return `Value must be of type string!`;\r\n  }\r\n  constructor(name: string = \"any\") {}\r\n}\r\n\r\nexport class LiteralArgumentType implements IArgumentType {\r\n  type: null;\r\n  typeName = \"literal\";\r\n  matches(value: string): IArgumentReturnData<null> {\r\n    return {\r\n      success: this.name == value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `${value} should be ${this.name}!`;\r\n  }\r\n  constructor(public name: string = \"literal\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class StringArgumentType implements IArgumentType {\r\n  type: string;\r\n  typeName = \"string\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    return {\r\n      success: value && value != \"\",\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `Value must be of type string!`;\r\n  }\r\n  constructor(public name: string = \"string\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class IntegerArgumentType implements IArgumentType {\r\n  type: number;\r\n  typeName = \"int\";\r\n  matches(value: string): IArgumentReturnData<number> {\r\n    return {\r\n      success: !isNaN(value as any),\r\n      value: parseInt(value),\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `Value must be valid number!`;\r\n  }\r\n  constructor(public name: string = \"integer\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class FloatArgumentType implements IArgumentType {\r\n  type: number;\r\n  typeName = \"float\";\r\n  matches(value: string): IArgumentReturnData<number> {\r\n    return {\r\n      success: Boolean(value?.match(/^\\d+\\.\\d+$/)?.[0]),\r\n      value: parseInt(value),\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `Value must be valid float!`;\r\n  }\r\n  constructor(public name: string = \"float\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class LocationArgumentType implements IArgumentType {\r\n  type: string;\r\n  typeName = \"location\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    return {\r\n      success: /^([~^]{0,1}(-\\d)?(\\d*)?(\\.(\\d+))?)$/.test(value),\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `Value needs to be a valid number, value can include: [~,^]`;\r\n  }\r\n  constructor(public name: string = \"location\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class BooleanArgumentType implements IArgumentType {\r\n  type: boolean;\r\n  typeName = \"boolean\";\r\n  matches(value: string): IArgumentReturnData<boolean> {\r\n    return {\r\n      success: Boolean(value?.match(/^(true|false)$/)?.[0]),\r\n      value: value == \"true\" ? true : false,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `\"${value}\" can be either \"true\" or \"false\"`;\r\n  }\r\n  constructor(public name: string = \"boolean\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class PlayerArgumentType implements IArgumentType {\r\n  type: Player;\r\n  typeName = \"Player\";\r\n  matches(value: string): IArgumentReturnData<Player> {\r\n    return {\r\n      success: fetch(value) ? true : false,\r\n      value: fetch(value),\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `player: \"${value}\", is not in this world`;\r\n  }\r\n  constructor(public name: string = \"player\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class TargetArgumentType implements IArgumentType {\r\n  type: string;\r\n  typeName = \"Target\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    return {\r\n      success: Boolean(value?.match(/^(@.|\"[\\s\\S]+\")$/)?.[0]),\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `${value} is not a valid target`;\r\n  }\r\n  constructor(public name: string = \"target\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class ArrayArgumentType<T extends ReadonlyArray<string>>\r\n  implements IArgumentType\r\n{\r\n  type: T[number];\r\n  typeName = \"string\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    return {\r\n      success: this.types.includes(value),\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `\"${value}\" must be one of these values: ${this.types.join(\" | \")}`;\r\n  }\r\n  constructor(public name: string = \"array\", public types: T) {\r\n    this.name = name;\r\n    this.types = types;\r\n\r\n    this.typeName = types.join(\" | \").replace(/(.{25})..+/, \"$1...\");\r\n  }\r\n}\r\n\r\nexport class DurationArgumentType implements IArgumentType {\r\n  type: string;\r\n  typeName = \"Duration\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    return {\r\n      success: /^(\\d+[hdysmw],?)+$/.test(value),\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `\"${value}\" must be a value like \"10d\" or \"3s\" the first part is the length second is unit`;\r\n  }\r\n  constructor(public name: string) {}\r\n}\r\n\r\nexport class PlayerNameArgumentType implements IArgumentType {\r\n  type: string;\r\n  typeName = \"playerName\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    const player = TABLES.ids.get(value);\r\n    return {\r\n      success: player ? true : false,\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `player: \"${value}\" has never played this world before! Tip: if the name has spaces in it use quotes around name!`;\r\n  }\r\n  constructor(public name: string = \"playerName\") {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport const ArgumentTypes = {\r\n  string: StringArgumentType,\r\n  int: IntegerArgumentType,\r\n  float: FloatArgumentType,\r\n  location: LocationArgumentType,\r\n  boolean: BooleanArgumentType,\r\n  player: PlayerArgumentType,\r\n  target: TargetArgumentType,\r\n  array: ArrayArgumentType,\r\n  duration: DurationArgumentType,\r\n  playerName: PlayerNameArgumentType,\r\n};\r\n", "import { BeforeChatEvent, Player } from \"@minecraft/server\";\r\n\r\nexport class CommandCallback {\r\n  data: BeforeChatEvent;\r\n  sender: Player;\r\n\r\n  /**\r\n   * Returns a commands callback\r\n   * @param data chat data that was used\r\n   */\r\n  constructor(data: BeforeChatEvent) {\r\n    this.data = data;\r\n    this.sender = data.sender;\r\n  }\r\n  /**\r\n   * Replies to the sender of a command callback\r\n   * @param text Message or a lang code\r\n   * @example ctx.reply('Hello World!');\r\n   */\r\n  reply(text: string) {\r\n    this.sender.tell(text);\r\n  }\r\n}\r\n", "import { BeforeChatEvent, Player, Vector, Vector3 } from \"@minecraft/server\";\r\nimport { PREFIX } from \"../../config/commands\";\r\nimport { LiteralArgumentType, LocationArgumentType } from \"./ArgumentTypes\";\r\nimport { CommandCallback } from \"./Callback\";\r\nimport type { Command } from \"./Command\";\r\n\r\n/**\r\n * Returns a Before chat events augments\r\n * @example this.getChatAugments(BeforeChatEvent)\r\n */\r\nexport function getChatAugments(\r\n  message: string,\r\n  prefix: string\r\n): Array<string> {\r\n  try {\r\n    return message\r\n      .slice(prefix.length)\r\n      .trim()\r\n      .match(/\"[^\"]+\"|[^\\s]+/g)\r\n      .map((e) => e.replace(/\"(.+)\"/, \"$1\").toString());\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Sends a command not found message to a player\r\n * @param player player to send message to\r\n */\r\nexport function commandNotFound(player: Player, command: string) {\r\n  player.tell({\r\n    rawtext: [\r\n      {\r\n        text: `\u00A7c`,\r\n      },\r\n      {\r\n        translate: `commands.generic.unknown`,\r\n        with: [`${command}`],\r\n      },\r\n    ],\r\n  });\r\n}\r\n\r\n/**\r\n * Sends a command not found message to a player\r\n * @param player player to send message to\r\n */\r\nexport function noPerm(player: Player, command: Command) {\r\n  player.tell({\r\n    rawtext: [\r\n      {\r\n        text: command.data.invalidPermission\r\n          ? command.data.invalidPermission\r\n          : `\u00A7cYou do not have permission to use \"${command.data.name}\"`,\r\n      },\r\n    ],\r\n  });\r\n}\r\n\r\n/**\r\n * Sends a syntax failure message to player\r\n * @param player\r\n * @param command\r\n * @param args\r\n * @param i\r\n */\r\nexport function commandSyntaxFail(\r\n  player: Player,\r\n  baseCommand: Command,\r\n  command: Command,\r\n  args: string[],\r\n  i: number\r\n) {\r\n  player.tell({\r\n    rawtext: [\r\n      {\r\n        text: `\u00A7c`,\r\n      },\r\n      {\r\n        translate: `commands.generic.syntax`,\r\n        with: [\r\n          `${PREFIX}${baseCommand.data.name} ${args.slice(0, i).join(\" \")}`,\r\n          args[i] ?? \" \",\r\n          args.slice(i + 1).join(\" \"),\r\n        ],\r\n      },\r\n    ],\r\n  });\r\n  if (command.children.length > 1 || !args[i]) {\r\n    // this type could be many things\r\n    const types = command.children.map((c) =>\r\n      c.type instanceof LiteralArgumentType ? c.type.name : c.type?.typeName\r\n    );\r\n    player.tell(\r\n      `\u00A7c\"${args[i] ?? \"undefined\"}\" is not valid! Argument \"${\r\n        [...new Set(command.children.map((c) => c.type.name))][0]\r\n      }\" can be typeof: \"${types.join('\", \"')}\"`\r\n    );\r\n  } else {\r\n    // this type is only 1 thing\r\n    player.tell(`\u00A7c${command.children[0]?.type?.fail(args[i])}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a location of the inputted argument\r\n * @example parseLocationArgs([\"~1\", \"3\", \"^7\"], { location: [1,2,3] , viewVector: [1,2,3] })\r\n */\r\nexport function parseLocationArgs(\r\n  [x, y, z]: [x: string, y: string, z: string],\r\n  { location, viewVector }: { location: Vector3; viewVector: Vector }\r\n): Vector3 {\r\n  if (!x || !y || !x) return null;\r\n  const locations = [location.x, location.y, location.z];\r\n  const viewVectors = [viewVector.x, viewVector.y, viewVector.z];\r\n  const a = [x, y, z].map((arg) => {\r\n    const r = parseFloat(arg);\r\n    return isNaN(r) ? 0 : r;\r\n  });\r\n  const b = [x, y, z].map((arg, index) => {\r\n    return arg.includes(\"~\")\r\n      ? a[index] + locations[index]\r\n      : arg.includes(\"^\")\r\n      ? a[index] + viewVectors[index]\r\n      : a[index];\r\n  });\r\n  return { x: b[0], y: b[1], z: b[2] };\r\n}\r\n\r\n/**\r\n * Sends a callback back to the command\r\n * @param cmdArgs the args that the command used\r\n * @param args args to use\r\n */\r\nexport function sendCallback(\r\n  cmdArgs: string[],\r\n  args: Command<any>[],\r\n  event: BeforeChatEvent,\r\n  baseCommand: Command<any>\r\n) {\r\n  const lastArg = args[args.length - 1] ?? baseCommand;\r\n  const argsToReturn: any[] = [];\r\n  for (const [i, arg] of args.entries()) {\r\n    if (arg.type.name.endsWith(\"*\")) continue;\r\n    if (arg.type instanceof LocationArgumentType) {\r\n      argsToReturn.push(\r\n        parseLocationArgs(\r\n          [cmdArgs[i], cmdArgs[i + 1], cmdArgs[i + 2]],\r\n          event.sender\r\n        )\r\n      );\r\n      continue;\r\n    }\r\n    if (arg.type instanceof LiteralArgumentType) continue;\r\n    argsToReturn.push(arg.type.matches(cmdArgs[i]).value ?? cmdArgs[i]);\r\n  }\r\n  lastArg.callback(new CommandCallback(event), ...argsToReturn);\r\n}\r\n", "import { system, world } from \"@minecraft/server\";\r\nimport { ENTITY_INVENTORY, GUI_ITEM } from \"../../config/chest\";\r\nimport { getRole } from \"../../plugins/Anti-Cheat/utils.js\";\r\nimport { ChestGUI } from \"./Models/EntityChest\";\r\nimport { CHESTGUIS, getHeldItem } from \"./utils.js\";\r\nimport \"./pages/home\";\r\nimport { DIMENSIONS } from \"../../utils.js\";\r\nimport { EntitiesLoad } from \"../Events/EntitiesLoad\";\r\n\r\nEntitiesLoad.subscribe(() => {\r\n  system.runSchedule(() => {\r\n    for (const player of world.getPlayers()) {\r\n      /**\r\n       * Loop through all players, check if player has a chest gui\r\n       * if not create them one\r\n       * Once all players are checked verify there are no false entities\r\n       */\r\n      if (getHeldItem(player)?.typeId != GUI_ITEM) {\r\n        if (CHESTGUIS[player.name]) CHESTGUIS[player.name].despawn();\r\n        continue;\r\n      }\r\n      // Player has a item Held we need to verify that they have a gui\r\n      if (Object.keys(CHESTGUIS).includes(player?.name)) continue;\r\n      // Player does not have a chest gui spawn them in one\r\n      if (getRole(player) != \"admin\") continue;\r\n      CHESTGUIS[player.name] = new ChestGUI(player);\r\n    }\r\n  }, 10);\r\n});\r\n\r\n/**\r\n * This system will detect false entities and kill them to\r\n * reduce lag and eliminate broken/left players/entities\r\n */\r\nsystem.runSchedule(() => {\r\n  const validIds = Object.values(CHESTGUIS).map((c) => c.entity.id);\r\n  for (const entity of DIMENSIONS.overworld.getEntities({\r\n    type: ENTITY_INVENTORY,\r\n  })) {\r\n    if (validIds.includes(entity.id)) continue;\r\n    // This entity is not valid so we despawn it\r\n    entity.triggerEvent(\"despawn\");\r\n  }\r\n}, 100);\r\n", "/*\r\n|--------------------------------------------------------------------------\r\n| Gui item\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the GUI item that is used to open up the gui\r\n| this is set to the identifier of item.json and is used to find the item\r\n| in the gui template\r\n|\r\n*/\r\nexport const GUI_ITEM = \"rubedo:gui\";\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Entity Inventory\r\n|--------------------------------------------------------------------------\r\n|\r\n| The id of the entity inventory\r\n| this is found in the entities file\r\n| this will be updated if inventory entity is changed\r\n|\r\n*/\r\nexport const ENTITY_INVENTORY = \"rubedo:inventory\";\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Default Static Page id\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the default static page id of what is open by default\r\n| when you click on the gui, this can be changed but it probably shouldn't\r\n| because static pages will need to be changed\r\n|\r\n*/\r\nexport const DEFAULT_STATIC_PAGE_ID = \"home\";\r\n", "import {\r\n  world,\r\n  Player,\r\n  BlockLocation,\r\n  MinecraftBlockTypes,\r\n  Enchantment,\r\n  GameMode,\r\n  system,\r\n} from \"@minecraft/server\";\r\nimport type { ConfigType, ROLES } from \"../../types\";\r\nimport { TABLES } from \"../../database/tables\";\r\nimport { Region } from \"./modules/models/Region.js\";\r\nimport { ChangePlayerRoleTask } from \"./modules/models/Task\";\r\nimport type { IplayerTickRegister } from \"../../types\";\r\nimport { BANNED_BLOCKS, BANNED_ITEMS } from \"./config/moderation\";\r\nimport { ENCHANTMENTS } from \"./config/enchantments\";\r\nimport { APPEAL_LINK } from \"../../config/app\";\r\nimport { DIMENSIONS } from \"../../utils.js\";\r\nimport { EntitiesLoad } from \"../../lib/Events/EntitiesLoad\";\r\n\r\n/**\r\n * Kicks a player\r\n * @param player player who should be kicked\r\n * @param message the message that should be show to player\r\n * @param onFail this needs to be used for loops to unregister\r\n */\r\nexport function kick(\r\n  player: Player,\r\n  message: Array<String> = [],\r\n  onFail?: () => void\r\n): void {\r\n  if (isServerOwner(player)) {\r\n    console.warn(`[WARNING]: TRIED TO KICK OWNER`);\r\n    player.tell(`You have been tried to kick, but you cant!`);\r\n    return onFail?.();\r\n  }\r\n  try {\r\n    player.runCommandAsync(`kick @s \u00A7r${message.join(\"\\n\")}`);\r\n    player.triggerEvent(\"kick\");\r\n  } catch (error) {\r\n    player.triggerEvent(\"kick\");\r\n    if (!/\"statusCode\":-2147352576/.test(error)) return;\r\n    // This function just tried to kick the owner\r\n    if (onFail) onFail();\r\n  }\r\n}\r\n\r\n/**\r\n * Gets the role of this player\r\n * @param player player to get role from\r\n * @example getRole(\"Smell of curry\")\r\n */\r\nexport function getRole(player: Player | string): keyof typeof ROLES {\r\n  if (player instanceof Player) {\r\n    return TABLES.roles.get(player.name) ?? \"member\";\r\n  } else {\r\n    return TABLES.roles.get(player) ?? \"member\";\r\n  }\r\n}\r\n\r\n/**\r\n * Sets the role of this player\r\n * @example setRole(\"Smell of curry\", \"admin\")\r\n */\r\nexport function setRole(\r\n  player: Player | string,\r\n  value: keyof typeof ROLES\r\n): void {\r\n  if (typeof player == \"string\") {\r\n    // we need to create a task that will update the role for\r\n    // that player when they join\r\n    // also we need to set there db_role back\r\n    TABLES.roles.set(player, value);\r\n    /**\r\n     * If the player is in the game just set it now\r\n     * if they are not in the game we will need to create a task\r\n     * to set there role when they join\r\n     */\r\n    const inGamePlayer = [...world.getPlayers()].find((p) => p.name == player);\r\n    if (inGamePlayer) {\r\n      inGamePlayer.setDynamicProperty(\"role\", value);\r\n    } else {\r\n      new ChangePlayerRoleTask(player, value);\r\n    }\r\n  } else {\r\n    // just change both of them no need for task\r\n    TABLES.roles.set(player.name, value);\r\n    player.setDynamicProperty(\"role\", value);\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if a player is the owner of this world that was set using `/function`\r\n * @param player player to test\r\n * @returns if player is owner\r\n */\r\nexport function isServerOwner(player: Player): boolean {\r\n  return world.getDynamicProperty(\"worldsOwner\") == player.id;\r\n}\r\n\r\n/**\r\n * Gets the server owner\r\n * @returns server owners id\r\n */\r\nexport function getServerOwner(): string | null {\r\n  const id = world.getDynamicProperty(\"worldsOwner\") as string;\r\n  if (!id || id == \"\") return null;\r\n  return id;\r\n}\r\n\r\n/**\r\n * Gets the server owners name\r\n * @returns server owners name\r\n */\r\nexport function getServerOwnerName(): string | null {\r\n  const ownerId = getServerOwner();\r\n  if (!ownerId) return null;\r\n  const ids = TABLES.ids.collection();\r\n  return Object.keys(ids).find((key) => ids[key] === ownerId);\r\n}\r\n\r\n/**\r\n * Sets the server owner\r\n * @param player player to set the server owner too\r\n */\r\nexport function setServerOwner(player: Player) {\r\n  if (!player) return world.setDynamicProperty(\"worldsOwner\", \"\");\r\n  world.setDynamicProperty(\"worldsOwner\", player.id.toString());\r\n}\r\n\r\n/**\r\n * Checks if the server is locked down\r\n */\r\nexport function isLockedDown(): boolean {\r\n  return (world.getDynamicProperty(\"isLockDown\") ?? false) as boolean;\r\n}\r\n\r\n/**\r\n * Sets the server's lock down status\r\n * @param val if the server is locked down or not\r\n */\r\nexport function setLockDown(val: boolean) {\r\n  world.setDynamicProperty(\"isLockDown\", val);\r\n}\r\n\r\n/**\r\n * Sets Deny blocks at bottom of region every 5 mins\r\n */\r\nexport function loadRegionDenys() {\r\n  for (const region of Region.getAllRegions()) {\r\n    const loc1 = new BlockLocation(\r\n      region.from.x,\r\n      region.dimensionId == \"minecraft:overworld\" ? -64 : 0,\r\n      region.from.z\r\n    );\r\n    const loc2 = new BlockLocation(\r\n      region.to.x,\r\n      region.dimensionId == \"minecraft:overworld\" ? -64 : 0,\r\n      region.to.z\r\n    );\r\n    for (const blockLocation of loc1.blocksBetween(loc2)) {\r\n      DIMENSIONS[region.dimensionId as keyof typeof DIMENSIONS]\r\n        .getBlock(blockLocation)\r\n        ?.setType(MinecraftBlockTypes.deny);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Stores all the callbacks in an array\r\n */\r\nconst CALLBACKS: { [key: number]: IplayerTickRegister } = [];\r\n\r\n/**\r\n * Records the amount of times the forEachValidPlayer function is called\r\n * used to generate keys for callback\r\n */\r\nlet forEachValidPlayerCalls = 0;\r\n\r\n/**\r\n * Sends a callback for each player\r\n * @returns the key to disable this callback\r\n */\r\nexport function forEachValidPlayer(\r\n  callback: (player: Player) => void,\r\n  delay = 0\r\n): number {\r\n  const key = forEachValidPlayerCalls;\r\n  CALLBACKS[key] = {\r\n    callback: callback,\r\n    delay: delay,\r\n    lastCall: 0,\r\n  };\r\n  forEachValidPlayerCalls = key + 1;\r\n  return key;\r\n}\r\n\r\n/**\r\n * Sends a callback for each player\r\n * @returns the key to disable this callback\r\n */\r\nexport function clearForEachValidPlayer(key: number) {\r\n  delete CALLBACKS[key];\r\n}\r\n\r\nEntitiesLoad.subscribe(() => {\r\n  system.runSchedule(() => {\r\n    const players = [...world.getPlayers()];\r\n    for (const [i, player] of players.entries()) {\r\n      if (getRole(player) == \"admin\") continue;\r\n      for (const CALLBACK of Object.values(CALLBACKS)) {\r\n        if (\r\n          CALLBACK.delay != 0 &&\r\n          system.currentTick - CALLBACK.lastCall < CALLBACK.delay\r\n        )\r\n          continue;\r\n        CALLBACK.callback(player);\r\n        if (i == players.length - 1) CALLBACK.lastCall = system.currentTick;\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\n/**\r\n * Grabs config data from the database\r\n * @param id id to grab\r\n */\r\nexport function getConfigId<T extends keyof ConfigType>(id: T): ConfigType[T] {\r\n  switch (id) {\r\n    case \"spam_config\":\r\n      return (\r\n        TABLES.config.get(\"spam_config\") ?? {\r\n          repeatedMessages: true,\r\n          zalgo: true,\r\n          violationCount: 0,\r\n          permMutePlayer: false,\r\n        }\r\n      );\r\n\r\n    case \"cbe_config\":\r\n      return (\r\n        TABLES.config.get(\"cbe_config\") ?? {\r\n          clearItem: true,\r\n          violationCount: 0,\r\n          banPlayer: false,\r\n          canAddEnchantment: false,\r\n        }\r\n      );\r\n\r\n    case \"gamemode_config\":\r\n      return (\r\n        TABLES.config.get(\"gamemode_config\") ?? {\r\n          setToSurvival: true,\r\n          clearPlayer: true,\r\n          violationCount: 0,\r\n          banPlayer: false,\r\n        }\r\n      );\r\n\r\n    case \"nuker_data\":\r\n      return (\r\n        TABLES.config.get(\"nuker_data\") ?? {\r\n          violationCount: 0,\r\n          banPlayer: false,\r\n        }\r\n      );\r\n    case \"banned_items\":\r\n      return TABLES.config.get(\"banned_items\") ?? BANNED_ITEMS;\r\n    case \"banned_blocks\":\r\n      return TABLES.config.get(\"banned_blocks\") ?? BANNED_BLOCKS;\r\n    case \"enchantments\":\r\n      return TABLES.config.get(\"enchantments\") ?? ENCHANTMENTS;\r\n    case \"appealLink\":\r\n      return TABLES.config.get(\"appealLink\") ?? APPEAL_LINK;\r\n  }\r\n}\r\n\r\n/**\r\n * Sets a config id\r\n * @param key key to set\r\n * @param value value to set key to\r\n */\r\nexport function setConfigId<T extends keyof ConfigType>(\r\n  key: T,\r\n  value: ConfigType[T]\r\n) {\r\n  TABLES.config.set(key, value);\r\n}\r\n\r\n/**\r\n * Gets the max level of a enchantment\r\n * @param enchantment enchantment to get\r\n * @returns max level\r\n * @example ```\r\n * getMaxLevel(MinecraftEnchantmentTypes.sharpness): 5\r\n * ```\r\n */\r\nexport function getMaxEnchantmentLevel(enchantment: Enchantment): number {\r\n  const MAX_ENCHANTMENTS = getConfigId(\"enchantments\");\r\n  return (\r\n    MAX_ENCHANTMENTS[enchantment.type.id as keyof typeof ENCHANTMENTS] ??\r\n    enchantment.type.maxLevel\r\n  );\r\n}\r\n\r\n/**\r\n * Gets the Gamemode of a player\r\n * @param {Player} player player to get\r\n * @returns {keyof typeof GameMode}\r\n * @example if (getGamemode(player) == \"creative\") return;\r\n */\r\nexport function getGamemode(player: Player): keyof typeof GameMode {\r\n  return Object.values(GameMode).find(\r\n    (g) => [...world.getPlayers({ name: player.name, gameMode: g })].length\r\n  );\r\n}\r\n", "import { BlockLocation, Entity, MinecraftBlockTypes } from \"@minecraft/server\";\r\nimport { DEFAULT_REGION_PERMISSIONS } from \"../../config/region\";\r\nimport { TABLES } from \"../../../../database/tables\";\r\nimport type { IRegionCords, IRegionPermissions } from \"../../../../types\";\r\nimport { loadRegionDenys } from \"../../utils.js\";\r\nimport { betweenVector3, DIMENSIONS } from \"../../../../utils\";\r\n\r\n/**\r\n * Holds all regions in memory so its not grabbing them so much\r\n */\r\nexport let REGIONS: Array<Region> = [];\r\n\r\n/**\r\n * If the regions have been grabbed if not it will grab them and set this to true\r\n */\r\nlet REGIONS_HAVE_BEEN_GRABBED: boolean = false;\r\n\r\n/**\r\n * The Lowest Y value in minecraft\r\n */\r\nconst LOWEST_Y_VALUE: number = -64;\r\n\r\n/**\r\n * The HIGHEST Y value in minecraft\r\n */\r\nconst HIGHEST_Y_VALUE: number = 320;\r\n\r\nexport class Region {\r\n  dimensionId: string;\r\n  from: IRegionCords;\r\n  to: IRegionCords;\r\n  key: string;\r\n  permissions: IRegionPermissions;\r\n\r\n  /**\r\n   * Gets all regions\r\n   */\r\n  static async getAllRegionsSync(): Promise<Array<Region>> {\r\n    if (REGIONS_HAVE_BEEN_GRABBED) return REGIONS;\r\n    const regions = (await TABLES.regions.valuesSync()).map(\r\n      (region) =>\r\n        new Region(\r\n          region.from,\r\n          region.to,\r\n          region.dimensionId,\r\n          region.permissions,\r\n          region.key\r\n        )\r\n    );\r\n    regions.forEach((r) => {\r\n      REGIONS.push(r);\r\n    });\r\n    REGIONS_HAVE_BEEN_GRABBED = true;\r\n    return regions;\r\n  }\r\n\r\n  static getAllRegions(): Array<Region> {\r\n    if (REGIONS_HAVE_BEEN_GRABBED) return REGIONS;\r\n    const regions = TABLES.regions\r\n      .values()\r\n      .map(\r\n        (region) =>\r\n          new Region(\r\n            region.from,\r\n            region.to,\r\n            region.dimensionId,\r\n            region.permissions,\r\n            region.key\r\n          )\r\n      );\r\n    regions.forEach((r) => {\r\n      REGIONS.push(r);\r\n    });\r\n    REGIONS_HAVE_BEEN_GRABBED = true;\r\n    return regions;\r\n  }\r\n\r\n  /**\r\n   * Checks if a block location is in region\r\n   */\r\n  static blockLocationInRegion(\r\n    blockLocation: BlockLocation,\r\n    dimensionId: string\r\n  ): Region | undefined {\r\n    return this.getAllRegions().find(\r\n      (region) =>\r\n        region.dimensionId == dimensionId &&\r\n        betweenVector3(\r\n          blockLocation,\r\n          { x: region.from.x, y: LOWEST_Y_VALUE, z: region.from.z },\r\n          { x: region.to.x, y: HIGHEST_Y_VALUE, z: region.to.z }\r\n        )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Checks if a block location is in region\r\n   */\r\n  static async blockLocationInRegionSync(\r\n    blockLocation: BlockLocation,\r\n    dimensionId: string\r\n  ): Promise<Region | undefined> {\r\n    return (await this.getAllRegionsSync()).find(\r\n      (region) =>\r\n        region.dimensionId == dimensionId &&\r\n        betweenVector3(\r\n          blockLocation,\r\n          { x: region.from.x, y: LOWEST_Y_VALUE, z: region.from.z },\r\n          { x: region.to.x, y: HIGHEST_Y_VALUE, z: region.to.z }\r\n        )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Removes a region at a block Location\r\n   * @param dimensionId the id of this dimension\r\n   * @returns if the region was removed or not\r\n   */\r\n  static async removeRegionAtBlockLocation(\r\n    blockLocation: BlockLocation,\r\n    dimensionId: string\r\n  ): Promise<boolean> {\r\n    const region = this.blockLocationInRegion(blockLocation, dimensionId);\r\n    if (!region) return false;\r\n    return TABLES.regions.delete(region.key);\r\n  }\r\n  /**\r\n   * Creates a new Region to store in db\r\n   */\r\n  constructor(\r\n    from: IRegionCords,\r\n    to: IRegionCords,\r\n    dimensionId: string,\r\n    permissions?: IRegionPermissions,\r\n    key?: string\r\n  ) {\r\n    this.from = from;\r\n    this.to = to;\r\n    this.dimensionId = dimensionId;\r\n    this.permissions = permissions ?? DEFAULT_REGION_PERMISSIONS;\r\n    this.key = key ? key : Date.now().toString();\r\n\r\n    if (!key) {\r\n      this.update().then(() => {\r\n        loadRegionDenys();\r\n        REGIONS.push(this);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates this region in the database\r\n   */\r\n  async update(): Promise<void> {\r\n    return TABLES.regions.set(this.key, {\r\n      key: this.key,\r\n      from: this.from,\r\n      dimensionId: this.dimensionId,\r\n      permissions: this.permissions,\r\n      to: this.to,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * removes this region\r\n   * @returns if the region was removed successfully\r\n   */\r\n  async delete(): Promise<boolean> {\r\n    const region = TABLES.regions.get(this.key);\r\n    const loc1 = new BlockLocation(\r\n      region.from.x,\r\n      region.dimensionId == \"minecraft:overworld\" ? -64 : 0,\r\n      region.from.z\r\n    );\r\n    const loc2 = new BlockLocation(\r\n      region.to.x,\r\n      region.dimensionId == \"minecraft:overworld\" ? -64 : 0,\r\n      region.to.z\r\n    );\r\n    for (const blockLocation of loc1.blocksBetween(loc2)) {\r\n      DIMENSIONS[region.dimensionId as keyof typeof DIMENSIONS]\r\n        .getBlock(blockLocation)\r\n        ?.setType(MinecraftBlockTypes.bedrock);\r\n    }\r\n    REGIONS = REGIONS.filter((r) => r.key != this.key);\r\n    return TABLES.regions.delete(this.key);\r\n  }\r\n\r\n  /**\r\n   * Checks if a player is in this region\r\n   * @returns if a entity is in this region or not\r\n   */\r\n  entityInRegion(entity: Entity): Boolean {\r\n    return (\r\n      this.dimensionId == entity.dimension.id &&\r\n      betweenVector3(\r\n        entity.location,\r\n        { x: this.from.x, y: LOWEST_Y_VALUE, z: this.from.z },\r\n        { x: this.to.x, y: HIGHEST_Y_VALUE, z: this.to.z }\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Changes a permission to on or off\r\n   */\r\n  changePermission<T extends keyof IRegionPermissions>(\r\n    key: T,\r\n    value: IRegionPermissions[T]\r\n  ): void {\r\n    this.permissions[key] = value;\r\n    this.update();\r\n  }\r\n}\r\n", "/**\r\n * The default permissions for all regions made\r\n */\r\nexport const DEFAULT_REGION_PERMISSIONS = {\r\n  /**\r\n   * If players in this region can use doors, trapdoors, and switches like buttons and levers\r\n   */\r\n  doorsAndSwitches: true,\r\n  /**\r\n   * If players in this region can open containers, this is like chests, furnaces, hoppers, etc\r\n   */\r\n  openContainers: true,\r\n  /**\r\n   * If the players in this region can fight each other\r\n   */\r\n  pvp: false,\r\n  /**\r\n   * the entities allowed in this region\r\n   */\r\n  allowedEntities: [\r\n    \"minecraft:player\",\r\n    \"minecraft:npc\",\r\n    \"minecraft:item\",\r\n    \"rubedo:inventory\",\r\n    \"rubedo:database\",\r\n  ],\r\n};\r\n\r\n/**\r\n * All doors and switches in minecraft\r\n */\r\nexport const DOORS_SWITCHES = [\r\n  \"minecraft:acacia_door\",\r\n  \"minecraft:acacia_trapdoor\",\r\n  \"minecraft:acacia_button\",\r\n  \"minecraft:birch_door\",\r\n  \"minecraft:birch_trapdoor\",\r\n  \"minecraft:birch_button\",\r\n  \"minecraft:crimson_door\",\r\n  \"minecraft:crimson_trapdoor\",\r\n  \"minecraft:crimson_button\",\r\n  \"minecraft:dark_oak_door\",\r\n  \"minecraft:dark_oak_trapdoor\",\r\n  \"minecraft:dark_oak_button\",\r\n  \"minecraft:jungle_door\",\r\n  \"minecraft:jungle_trapdoor\",\r\n  \"minecraft:jungle_button\",\r\n  \"minecraft:mangrove_door\",\r\n  \"minecraft:mangrove_trapdoor\",\r\n  \"minecraft:mangrove_button\",\r\n  \"minecraft:spruce_door\",\r\n  \"minecraft:spruce_trapdoor\",\r\n  \"minecraft:spruce_button\",\r\n  \"minecraft:warped_door\",\r\n  \"minecraft:warped_trapdoor\",\r\n  \"minecraft:warped_button\",\r\n  \"minecraft:wooden_door\",\r\n  \"minecraft:wooden_button\",\r\n  \"minecraft:trapdoor\",\r\n  \"minecraft:iron_door\",\r\n  \"minecraft:iron_trapdoor\",\r\n  \"minecraft:polished_blackstone_button\",\r\n  \"minecraft:lever\",\r\n];\r\n\r\n/**\r\n * A List of all containers a item could be in\r\n */\r\nexport const BLOCK_CONTAINERS = [\r\n  \"minecraft:chest\",\r\n  \"minecraft:ender_chest\",\r\n  \"minecraft:barrel\",\r\n  \"minecraft:trapped_chest\",\r\n  \"minecraft:dispenser\",\r\n  \"minecraft:dropper\",\r\n  \"minecraft:furnace\",\r\n  \"minecraft:blast_furnace\",\r\n  \"minecraft:lit_furnace\",\r\n  \"minecraft:lit_blast_furnace\",\r\n  \"minecraft:hopper\",\r\n  \"minecraft:shulker_box\",\r\n  \"minecraft:undyed_shulker_box\",\r\n  \"minecraft:lit_smoker\",\r\n  \"minecraft:smoker\",\r\n];\r\n", "import type { ROLES } from \"../../../../types\";\r\nimport { TABLES } from \"../../../../database/tables\";\r\nimport type { IChangePlayerRoleData } from \"../../../../types\";\r\n\r\nexport class ChangePlayerRoleTask {\r\n  /**\r\n   * The name of the player\r\n   */\r\n  playerName: string;\r\n  /**\r\n   * The role that the player should be set to\r\n   */\r\n  role: keyof typeof ROLES;\r\n\r\n  /**\r\n   *  gets all tasks that are present\r\n   * @returns all tasks\r\n   */\r\n  static getTasks(): Array<IChangePlayerRoleData> {\r\n    return TABLES.tasks.get(\"changePlayerRole\") ?? [];\r\n  }\r\n\r\n  /**\r\n   * Gets the role this player needs to be set to\r\n   * @param playerName name\r\n   */\r\n  static getPlayersRoleToSet(playerName: string): keyof typeof ROLES | null {\r\n    const tasks = ChangePlayerRoleTask.getTasks();\r\n    return tasks.find((t) => t.playerName == playerName)?.role;\r\n  }\r\n\r\n  constructor(playerName: string, role: keyof typeof ROLES) {\r\n    let tasks = ChangePlayerRoleTask.getTasks();\r\n    tasks.push({ playerName: playerName, role: role });\r\n    TABLES.tasks.set(\"changePlayerRole\", tasks);\r\n  }\r\n}\r\n", "import { MinecraftBlockTypes, MinecraftItemTypes } from \"@minecraft/server\";\r\n\r\n/**\r\n * Items that simply get removed from inventory but will not ban\r\n */\r\nexport const FORBIDDEN_ITEMS = [\r\n  // Common CBE Items\r\n  MinecraftItemTypes.beehive.id,\r\n  MinecraftItemTypes.beeNest.id,\r\n  MinecraftItemTypes.axolotlBucket.id,\r\n  MinecraftItemTypes.codBucket.id,\r\n  MinecraftItemTypes.tadpoleBucket.id,\r\n  MinecraftItemTypes.tropicalFishBucket.id,\r\n  MinecraftItemTypes.salmonBucket.id,\r\n  MinecraftItemTypes.pufferfishBucket.id,\r\n];\r\n\r\n/**\r\n * List of items that if you hold you will be automatically banned\r\n */\r\nexport const BANNED_ITEMS = [\r\n  // Op Only Items\r\n  MinecraftItemTypes.allow.id,\r\n  MinecraftItemTypes.barrier.id,\r\n  MinecraftItemTypes.borderBlock.id,\r\n  MinecraftItemTypes.debugStick?.id ?? \"minecraft:debug_stick\",\r\n  MinecraftItemTypes.deny.id,\r\n  MinecraftItemTypes.jigsaw.id,\r\n  MinecraftItemTypes.lightBlock.id,\r\n  MinecraftItemTypes.commandBlock.id,\r\n  MinecraftItemTypes.repeatingCommandBlock.id,\r\n  MinecraftItemTypes.chainCommandBlock.id,\r\n  MinecraftItemTypes.commandBlockMinecart.id,\r\n  MinecraftItemTypes.structureBlock.id,\r\n  MinecraftItemTypes.structureVoid.id,\r\n\r\n  // Not Normal Items\r\n  MinecraftItemTypes.bedrock.id,\r\n  MinecraftItemTypes.endPortalFrame.id,\r\n\r\n  // Server Movement Blocks\r\n  \"minecraft:info_update\",\r\n  \"minecraft:info_update2\",\r\n  \"minecraft:reserved3\",\r\n  \"minecraft:reserved4\",\r\n  \"minecraft:reserved6\",\r\n  \"minecraft:movingBlock\",\r\n  \"minecraft:moving_block\",\r\n  \"minecraft:movingblock\",\r\n  \"minecraft:piston_arm_collision\",\r\n  \"minecraft:piston_arm_collision\",\r\n  \"minecraft:pistonarmcollision\",\r\n  \"minecraft:stickyPistonArmCollision\",\r\n  \"minecraft:sticky_piston_arm_collision\",\r\n  \"minecraft:unknown\",\r\n\r\n  // Common Hacked Items\r\n  \"minecraft:glowingobsidian\",\r\n  \"minecraft:invisible_bedrock\",\r\n  \"minecraft:invisiblebedrock\",\r\n  \"minecraft:netherreactor\",\r\n  \"minecraft:portal\",\r\n  \"minecraft:fire\",\r\n  \"minecraft:water\",\r\n  \"minecraft:lava\",\r\n  \"minecraft:flowing_lava\",\r\n  \"minecraft:flowing_water\",\r\n  \"minecraft:soul_fire\",\r\n];\r\n\r\n/**\r\n * Blocks in this list are forbidden from being placed but will not ban the placer\r\n */\r\nexport const FORBIDDEN_BLOCKS = [\r\n  // Common CBE Blocks\r\n  MinecraftBlockTypes.dispenser.id,\r\n];\r\n\r\n/**\r\n * List of blocks that cannot be placed down\r\n */\r\nexport const BANNED_BLOCKS = [\r\n  // Should Not be Placed\r\n  MinecraftBlockTypes.bedrock.id,\r\n  MinecraftBlockTypes.barrier.id,\r\n  \"minecraft:invisiblebedrock\",\r\n  \"minecraft:movingBlock\",\r\n  \"minecraft:movingblock\",\r\n  \"minecraft:moving_block\",\r\n];\r\n\r\n/**\r\n * The currently supported block containers by script api\r\n */\r\nexport const API_CONTAINERS = [\r\n  MinecraftBlockTypes.chest.id,\r\n  MinecraftBlockTypes.trappedChest.id,\r\n];\r\n\r\n/**\r\n * A List of containers\r\n */\r\nexport const CONTAINERS = [\r\n  MinecraftItemTypes.chest.id,\r\n  MinecraftItemTypes.trappedChest.id,\r\n  MinecraftItemTypes.barrel.id,\r\n  MinecraftItemTypes.dispenser.id,\r\n  MinecraftItemTypes.dropper.id,\r\n  MinecraftItemTypes.furnace.id,\r\n  \"minecraft:lit_furnace\",\r\n  MinecraftItemTypes.blastFurnace.id,\r\n  \"minecraft:lit_blast_furnace\",\r\n  MinecraftItemTypes.smoker.id,\r\n  \"minecraft:lit_smoker\",\r\n  MinecraftItemTypes.hopper.id,\r\n  MinecraftItemTypes.shulkerBox.id,\r\n  MinecraftItemTypes.undyedShulkerBox.id,\r\n];\r\n\r\n/**\r\n * The block size to check for blockContainers\r\n */\r\nexport const CHECK_SIZE = { x: 7, y: 7, z: 7 };\r\n", "/*\r\n|--------------------------------------------------------------------------\r\n| Enchantments\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the default enchantments that can be added to items\r\n| each enchantment is set to its desired max level this can be changed here\r\n| or in game using -config enchantments set \"enchantment\" value\r\n|\r\n*/\r\nexport const ENCHANTMENTS = {\r\n  aquaAffinity: 1,\r\n  baneOfArthropods: 5,\r\n  binding: 1,\r\n  blastProtection: 4,\r\n  channeling: 1,\r\n  depthStrider: 3,\r\n  efficiency: 5,\r\n  featherFalling: 4,\r\n  fireAspect: 2,\r\n  fireProtection: 4,\r\n  flame: 1,\r\n  fortune: 3,\r\n  frostWalker: 2,\r\n  impaling: 5,\r\n  infinity: 1,\r\n  knockback: 2,\r\n  looting: 3,\r\n  loyalty: 4,\r\n  luckOfTheSea: 3,\r\n  lure: 3,\r\n  mending: 1,\r\n  multishot: 1,\r\n  piercing: 4,\r\n  power: 5,\r\n  projectileProtection: 4,\r\n  protection: 4,\r\n  punch: 2,\r\n  quickCharge: 3,\r\n  respiration: 3,\r\n  riptide: 3,\r\n  sharpness: 5,\r\n  silkTouch: 1,\r\n  smite: 5,\r\n  soulSpeed: 3,\r\n  swiftSneak: 4,\r\n  thorns: 3,\r\n  unbreaking: 3,\r\n  vanishing: 1,\r\n};\r\n", "/*\r\n|--------------------------------------------------------------------------\r\n| Version\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the version of rubedo recommended to NOT CHANGE could cause bugs.\r\n|\r\n*/\r\nexport const VERSION = \"2.6.4-beta\";\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Game Version\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the version of minecraft that this version of rubedo\r\n| was made for its a simple constant to tell creators what version\r\n| this gametest api is supposed to work perfectly for.\r\n|\r\n*/\r\nexport const GAME_VERSION = \"1.19.50\";\r\n\r\n/*\r\n|--------------------------------------------------------------------------\r\n| Appeal Link\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is the appeal link that gets showed when someone gets banned\r\n| this link pops up at the bottom of the ban message to show\r\n| where they can appeal there ban.\r\n|\r\n*/\r\nexport const APPEAL_LINK = \"https://discord.gg/dMa3A5UYKX\";\r\n", "import { Entity, Player, system } from \"@minecraft/server\";\r\nimport { AIR } from \"../../../index.js\";\r\nimport { ENTITY_INVENTORY } from \"../../../config/chest\";\r\nimport {\r\n  ISlotChangeReturn,\r\n  onEntityInventorySlotChange,\r\n} from \"../../Events/onSlotChange\";\r\nimport {\r\n  CHESTGUIS,\r\n  clearPlayersPointer,\r\n  getItemAtSlot,\r\n  PAGES,\r\n} from \"../utils.js\";\r\nimport { ItemGrabbedCallback } from \"./ItemGrabbedCallback\";\r\nimport { ISlot, Page } from \"./Page.js\";\r\n\r\nexport class ChestGUI {\r\n  /**\r\n   * The connected player to this gui\r\n   */\r\n  player: Player;\r\n  /**\r\n   * The entity that this chest gui is associated to\r\n   */\r\n  entity: Entity;\r\n  /**\r\n   * The event that is registered on this gui\r\n   */\r\n  runScheduleId: number;\r\n\r\n  /**\r\n   * The page that this gui is currently viewing\r\n   */\r\n  page: Page;\r\n\r\n  /**\r\n   * The event that is used to test for changes in inventory\r\n   */\r\n  slotChangeEvent: number;\r\n\r\n  /**\r\n   * if the player has a chest open\r\n   */\r\n  hasChestOpen: boolean;\r\n\r\n  /**\r\n   * Spawns a entity to be attached to the player\r\n   * @param player player this entity will be attached to\r\n   */\r\n  static spawnEntity(player: Player): Entity {\r\n    try {\r\n      return player.dimension.spawnEntity(\r\n        ENTITY_INVENTORY,\r\n        player.headLocation\r\n      );\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Links a new chest gui to a player\r\n   * @param player player to link\r\n   */\r\n  constructor(player: Player) {\r\n    this.player = player;\r\n    this.entity = ChestGUI.spawnEntity(player);\r\n    if (this.entity) {\r\n      this.hasChestOpen = false;\r\n      this.setPage(\"home\");\r\n    }\r\n    this.runScheduleId = system.runSchedule(() => {\r\n      if (!this.entity) return this.despawn();\r\n      if (this.player.getComponent(\"mark_variant\").value == 1) {\r\n        if (!this.hasChestOpen) {\r\n          // Player has this inventory open run checks for changes\r\n          this.slotChangeEvent = onEntityInventorySlotChange.subscribe(\r\n            { type: ENTITY_INVENTORY },\r\n            (entity, change) => {\r\n              if (entity.id != this.entity.id) return;\r\n              this.onSlotChange(change);\r\n            }\r\n          );\r\n        }\r\n        this.hasChestOpen = true;\r\n      } else {\r\n        // Player does not have inventory open but item is held\r\n        try {\r\n          this.entity.teleport(\r\n            this.player.headLocation,\r\n            this.player.dimension,\r\n            this.player.rotation.x,\r\n            this.player.rotation.y,\r\n            true\r\n          );\r\n        } catch (error) {\r\n          this.despawn();\r\n        }\r\n      }\r\n    }, 5);\r\n  }\r\n\r\n  /**\r\n   * Sets this gui to a page of items\r\n   * @param pageId page to set this gui too\r\n   */\r\n  setPage(pageId: string, extras?: any) {\r\n    const c = this.entity.getComponent(\"inventory\").container;\r\n    for (let i = 0; i < c.size; i++) {\r\n      c.setItem(i, AIR);\r\n    }\r\n    if (!Object.keys(PAGES).includes(pageId))\r\n      throw new Error(`pageId ${pageId} does not exist!`);\r\n    const page = PAGES[pageId];\r\n    this.page = page;\r\n\r\n    page.fillType(this.entity, page, extras);\r\n    this.entity.nameTag = `size:54`;\r\n  }\r\n\r\n  /**\r\n   * This runs when a slot gets changed in the chest inventory\r\n   */\r\n  onSlotChange(change: ISlotChangeReturn) {\r\n    /**\r\n     * The guiItem that was changed\r\n     */\r\n    const slot: ISlot = this.page.slots[change.slot];\r\n\r\n    if (!slot) {\r\n      // item was added to page that is not a valid slot so set that slot back to air\r\n      this.entity.getComponent(\"inventory\").container.setItem(change.slot, AIR);\r\n    } else if (change.changeType == \"delete\") {\r\n      // item was taken from this page\r\n      if (slot.item) clearPlayersPointer(this.player, change.item);\r\n      /**\r\n       * if the slot has a item that returns when something is grabbed, this checks\r\n       * if there is a item put into the slot to return, if not it will not send a\r\n       * callback by returning before\r\n       */\r\n      if (!slot.item && !getItemAtSlot(this.entity, change.slot)) return;\r\n      slot.action(new ItemGrabbedCallback(this, slot, change));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deletes this gui and despawn its entity\r\n   */\r\n  despawn() {\r\n    try {\r\n      this.entity?.triggerEvent(\"despawn\");\r\n    } catch (error) {}\r\n    try {\r\n      delete CHESTGUIS[this.player.name];\r\n    } catch (error) {}\r\n    if (this.runScheduleId) system.clearRunSchedule(this.runScheduleId);\r\n    if (this.slotChangeEvent)\r\n      onEntityInventorySlotChange.unsubscribe(this.slotChangeEvent);\r\n  }\r\n}\r\n", "import {\r\n  Entity,\r\n  EntityQueryOptions,\r\n  ItemStack,\r\n  PlayerInventoryComponentContainer,\r\n  system,\r\n} from \"@minecraft/server\";\r\nimport { DIMENSIONS } from \"../../utils.js\";\r\n\r\ntype onSlotChangeCallback = (entity: Entity, change: ISlotChangeReturn) => void;\r\n\r\nconst CALLBACKS: {\r\n  [key: number]: {\r\n    callback: onSlotChangeCallback;\r\n    entities: EntityQueryOptions;\r\n  };\r\n} = {};\r\n\r\nconst MAPPED_INVENTORIES: { [key: string]: Array<IMappedInventoryItem> } = {};\r\nexport const PREVIOUS_CHANGE: { [key: string]: ISlotChangeReturn } = {};\r\n\r\nexport interface ISlotChangeReturn {\r\n  /**\r\n   * Slot that changed\r\n   */\r\n  slot: number;\r\n  /**\r\n   * The uid of this item\r\n   */\r\n  uid: string;\r\n  /**\r\n   * The old uid of this item\r\n   */\r\n  oldUid?: string;\r\n  /**\r\n   * the item that was grabbed / put\r\n   */\r\n  item: ItemStack;\r\n  /**\r\n   * The old itemStack that was in this slot\r\n   */\r\n  oldItem?: ItemStack;\r\n  /**\r\n   * How the inventory has changed\r\n   */\r\n  changeType: \"delete\" | \"put\" | \"swap\" | \"fluctuation\" | \"move\";\r\n}\r\n\r\ninterface IMappedInventoryItem {\r\n  /**\r\n   * a unique id for a itemStack\r\n   */\r\n  uid: string;\r\n  /**\r\n   * the item\r\n   */\r\n  item: ItemStack;\r\n}\r\n\r\n/**\r\n * Finds and returns a slot change in a inventory\r\n */\r\nfunction getSlotChanges(\r\n  entity: Entity,\r\n  oldInv: Array<IMappedInventoryItem>,\r\n  newInv: Array<IMappedInventoryItem>\r\n): Array<ISlotChangeReturn> {\r\n  if (oldInv.length != newInv.length) return [];\r\n  const changes: Array<ISlotChangeReturn> = [];\r\n  for (let i = 0; i < newInv.length; i++) {\r\n    if (\r\n      oldInv[i]?.item?.amount < newInv[i]?.item?.amount ||\r\n      (oldInv[i]?.item?.amount > newInv[i]?.item?.amount &&\r\n        oldInv[i]?.item?.amount != 0)\r\n    ) {\r\n      // Checks if the item is the same but checks if the amount has changed\r\n      const change_data: ISlotChangeReturn = {\r\n        slot: i,\r\n        uid: newInv[i].uid,\r\n        oldUid: oldInv[i].uid,\r\n        item: newInv[i].item,\r\n        oldItem: oldInv[i].item,\r\n        changeType: \"fluctuation\",\r\n      };\r\n      changes.push(change_data);\r\n      PREVIOUS_CHANGE[entity.id] = change_data;\r\n      continue;\r\n    }\r\n    if (newInv[i].uid == oldInv[i].uid) continue; // no change\r\n    if (oldInv[i]?.item && newInv[i]?.item) {\r\n      // Checks if there was a new item but a new slot was not taken up\r\n      // Meaning that the item got used like using a bucket on a cow\r\n      const change_data: ISlotChangeReturn = {\r\n        slot: i,\r\n        uid: newInv[i].uid,\r\n        oldUid: oldInv[i].uid,\r\n        item: newInv[i].item,\r\n        oldItem: oldInv[i].item,\r\n        changeType: \"swap\",\r\n      };\r\n      changes.push(change_data);\r\n      PREVIOUS_CHANGE[entity.id] = change_data;\r\n    } else if (!newInv[i]?.item) {\r\n      // There is no more item in this slot\r\n      // Meaning the item has been moved across slots or been thrown out\r\n      const change_data: ISlotChangeReturn = {\r\n        slot: i,\r\n        uid: oldInv[i].uid,\r\n        item: oldInv[i].item,\r\n        changeType: \"delete\",\r\n      };\r\n      changes.push(change_data);\r\n      PREVIOUS_CHANGE[entity.id] = change_data;\r\n    } else if (newInv[i]?.item) {\r\n      // New item has been added in this slot\r\n      if (\r\n        PREVIOUS_CHANGE[entity.id]?.changeType == \"delete\" &&\r\n        PREVIOUS_CHANGE[entity.id]?.uid == newInv[i].uid\r\n      ) {\r\n        // item has been moved across slots\r\n        const change_data: ISlotChangeReturn = {\r\n          slot: i,\r\n          uid: newInv[i].uid,\r\n          item: newInv[i].item,\r\n          changeType: \"move\",\r\n        };\r\n        changes.push(change_data);\r\n        PREVIOUS_CHANGE[entity.id] = change_data;\r\n        continue;\r\n      } else {\r\n        const change_data: ISlotChangeReturn = {\r\n          slot: i,\r\n          uid: newInv[i].uid,\r\n          item: newInv[i].item,\r\n          changeType: \"put\",\r\n        };\r\n        changes.push(change_data);\r\n        PREVIOUS_CHANGE[entity.id] = change_data;\r\n      }\r\n    }\r\n  }\r\n  return changes;\r\n}\r\n\r\n/**\r\n  * Converts a itemStack to a unique id\r\n  * @param {ItemStack} item\r\n  * @returns {string}\r\n  */\r\nexport function getItemUid(item: ItemStack): string {\r\n  if (!item) return \"\";\r\n  const data = [];\r\n  data.push(item.typeId);\r\n  data.push(item.nameTag);\r\n  data.push(item.data);\r\n  data.push(item.getLore().join(\"\"));\r\n  return data.join(\"\");\r\n}\r\n\r\n/**\r\n * Gets an entity's inventory but with mapped data\r\n */\r\nfunction mapInventory(\r\n  container: PlayerInventoryComponentContainer\r\n): Array<IMappedInventoryItem> {\r\n  const inventory = [];\r\n\r\n  for (let i = 0; i < container.size; i++) {\r\n    let item = container.getItem(i);\r\n    inventory[i] = {\r\n      uid: getItemUid(item),\r\n      item: item,\r\n    };\r\n  }\r\n  return inventory;\r\n}\r\n\r\nsystem.runSchedule(() => {\r\n  for (const callback of Object.values(CALLBACKS)) {\r\n    for (const entity of DIMENSIONS.overworld.getEntities(callback.entities)) {\r\n      const inventory = mapInventory(\r\n        entity.getComponent(\"inventory\").container\r\n      );\r\n      const changes = getSlotChanges(\r\n        entity,\r\n        MAPPED_INVENTORIES[entity.id] ?? inventory,\r\n        inventory\r\n      );\r\n      MAPPED_INVENTORIES[entity.id] = inventory;\r\n      if (changes.length == 0) continue;\r\n      if (entity.hasTag(\"skipCheck\")) {\r\n        entity.removeTag(\"skipCheck\");\r\n        delete PREVIOUS_CHANGE[entity.id];\r\n        continue;\r\n      }\r\n      for (const change of changes) {\r\n        callback.callback(entity, change);\r\n      }\r\n    }\r\n  }\r\n}, 5);\r\n\r\nexport class onEntityInventorySlotChange {\r\n  /**\r\n   * Subscribes to a callback to get notified when a entities inventory changes\r\n   * @param callback what to be called when one of these entities inventory's changes\r\n   * @param entities the entity's to grab from\r\n   * @returns the id that is used to unsubscribe\r\n   */\r\n  static subscribe(\r\n    entities: EntityQueryOptions,\r\n    callback: onSlotChangeCallback\r\n  ): number {\r\n    const key = Date.now();\r\n    CALLBACKS[key] = { callback: callback, entities: entities };\r\n    return key;\r\n  }\r\n  static unsubscribe(key: number): void {\r\n    delete CALLBACKS[key];\r\n  }\r\n}\r\n", "import { Entity, ItemStack, Location, Player } from \"@minecraft/server\";\r\nimport type { ChestGUI } from \"./Models/EntityChest\";\r\nimport type { Page } from \"./Models/Page\";\r\n\r\n/**\r\n * This will link a players name to a chest gui instance\r\n */\r\nexport const CHESTGUIS: { [key: string]: ChestGUI } = {};\r\n\r\n/**\r\n * This will link a players name to a chest gui instance\r\n */\r\nexport const PAGES: { [key: string]: Page } = {};\r\n\r\n/**\r\n * Gets a players held item\r\n */\r\nexport function getHeldItem(player: Player): ItemStack {\r\n  const inventory = player.getComponent(\"minecraft:inventory\").container;\r\n  return inventory.getItem(player.selectedSlot);\r\n}\r\n\r\n/**\r\n * Clears the player of a item in there pointer slot\r\n */\r\nexport async function clearPlayersPointer(\r\n  player: Player,\r\n  ItemToClear: ItemStack\r\n) {\r\n  try {\r\n    const inventory = player.getComponent(\"minecraft:inventory\").container;\r\n    let itemsToLoad = [];\r\n    for (let i = 0; i < inventory.size; i++) {\r\n      const item = inventory.getItem(i);\r\n      if (!item) continue;\r\n      if (item?.typeId == ItemToClear?.typeId) {\r\n        itemsToLoad.push({ slot: i, item: item });\r\n        inventory.setItem;\r\n        if (i < 9) {\r\n          player.runCommandAsync(`replaceitem entity @s slot.hotbar ${i} air`);\r\n        } else {\r\n          player.runCommandAsync(\r\n            `replaceitem entity @s slot.inventory ${i - 9} air`\r\n          );\r\n        }\r\n      }\r\n    }\r\n    await player.runCommandAsync(\r\n      `clear @s ${ItemToClear?.typeId} ${ItemToClear.data} ${ItemToClear.amount}`\r\n    );\r\n    for (const item of itemsToLoad) {\r\n      inventory.setItem(item.slot, item.item);\r\n    }\r\n  } catch (error) {\r\n    // the item couldn't be cleared that means\r\n    // they now have a item witch is really BAD\r\n    [\r\n      ...player.dimension.getEntities({\r\n        type: \"minecraft:item\",\r\n        location: new Location(\r\n          player.location.x,\r\n          player.location.y,\r\n          player.location.z\r\n        ),\r\n        maxDistance: 2,\r\n        closest: 1,\r\n      }),\r\n    ].forEach((e) => e.kill());\r\n  }\r\n}\r\n\r\n/**\r\n * Gets an item at slot\r\n */\r\nexport function getItemAtSlot(entity: Entity, slot: number): ItemStack | null {\r\n  const inventory = entity.getComponent(\"minecraft:inventory\").container;\r\n  return inventory.getItem(slot);\r\n}\r\n", "import {\r\n  ActionFormData,\r\n  MessageFormData,\r\n  ModalFormData,\r\n  ActionFormResponse,\r\n  ModalFormResponse,\r\n  MessageFormResponse,\r\n} from \"@minecraft/server-ui\";\r\nimport { ChestGUI } from \"./EntityChest\";\r\nimport { ItemStack } from \"@minecraft/server\";\r\nimport { ItemDatabase } from \"../database/Item\";\r\nimport type { ISlot } from \"./Page\";\r\nimport type { ISlotChangeReturn } from \"../../Events/onSlotChange\";\r\nimport { sleep } from \"../../../utils\";\r\n\r\ntype FormActionReturn<T> = T extends ActionFormData\r\n  ? Promise<ActionFormResponse>\r\n  : T extends ModalFormData\r\n  ? Promise<ModalFormResponse>\r\n  : Promise<MessageFormResponse>;\r\n\r\nexport class ItemGrabbedCallback {\r\n  gui: ChestGUI;\r\n  slot: ISlot;\r\n  change: ISlotChangeReturn;\r\n  /**\r\n   * New Callback\r\n   */\r\n  constructor(gui: ChestGUI, slot: ISlot, change: ISlotChangeReturn) {\r\n    this.gui = gui;\r\n    this.slot = slot;\r\n    this.change = change;\r\n  }\r\n\r\n  /**\r\n   * Messages to the owner of this gui\r\n   * @example ctx.reply('Hello World!');\r\n   */\r\n  message(text: string) {\r\n    this.gui.player.tell(text);\r\n  }\r\n\r\n  /**\r\n   * Gets the item added\r\n   */\r\n  getItemAdded(): ItemStack | null {\r\n    if (this.slot.item) return null;\r\n    return this.gui.entity\r\n      .getComponent(\"minecraft:inventory\")\r\n      .container.getItem(this.change.slot);\r\n  }\r\n\r\n  /**\r\n   * Gives the player the item the grabbed\r\n   */\r\n  GiveAction(item: ItemStack = this.slot.item.itemStack) {\r\n    this.gui.player.getComponent(\"minecraft:inventory\").container.addItem(item);\r\n  }\r\n\r\n  /**\r\n   * Gives the player the item that was grabbed also removes this item from the gui + db\r\n   * @param db the item database to remove this item from\r\n   */\r\n  TakeAction(db: ItemDatabase = null) {\r\n    this.gui.player\r\n      .getComponent(\"minecraft:inventory\")\r\n      .container.addItem(this.slot.item.itemStack);\r\n    this.gui.page.slots[this.change.slot] = null;\r\n    if (!db) return;\r\n    db.delete(this.slot.item.components.dbKey);\r\n  }\r\n\r\n  /**\r\n   * Changes the page of the chestGui when this item is grabbed\r\n   * @param page page to send to\r\n   * @param extras stuff to be passed onto the page\r\n   */\r\n  PageAction(page: string, extras?: any) {\r\n    this.gui.setPage(page, extras);\r\n  }\r\n\r\n  /**\r\n   * Closes the chest GUI when this item is grabbed\r\n   */\r\n  CloseAction() {\r\n    this.gui.despawn();\r\n  }\r\n\r\n  /**\r\n   * Sets the item back\r\n   */\r\n  SetAction() {\r\n    const container = this.gui.entity.getComponent(\r\n      \"minecraft:inventory\"\r\n    ).container;\r\n    container.setItem(this.change.slot, this.slot.item.itemStack);\r\n  }\r\n\r\n  /**\r\n   * Opens a form to the player\r\n   * @param {ActionFormData | ModalFormData | MessageFormData} form form to load\r\n   * @returns {Promise<ActionFormResponse | ModalFormResponse | MessageFormResponse>}\r\n   */\r\n  async FormAction<T extends ActionFormData | ModalFormData | MessageFormData>(\r\n    form: T\r\n  ): Promise<FormActionReturn<T>> {\r\n    this.CloseAction();\r\n    await sleep(5);\r\n    // @ts-ignore\r\n    return await form.show(this.gui.player);\r\n  }\r\n}\r\n", "import {\r\n  Enchantment,\r\n  EnchantmentList,\r\n  ItemStack,\r\n  ItemType,\r\n} from \"@minecraft/server\";\r\n\r\ninterface IPageItemComponents {\r\n  /**\r\n   * Number of the items in the stack. Valid values range between 0 and 64.\r\n   */\r\n  amount?: number;\r\n  /**\r\n   * A data value used to configure alternate states of the item.\r\n   */\r\n  data?: number;\r\n  /**\r\n   * Given name of this stack of items.\r\n   */\r\n  nameTag?: string;\r\n  /**\r\n   * a secondary display string - for an ItemStack.\r\n   */\r\n  loreList?: string[];\r\n  /**\r\n   * a collection of the enchantments on this item\r\n   */\r\n  enchantments?: Enchantment[];\r\n  /**\r\n   * A key that could be on this item, meaning its connect to database\r\n   */\r\n  dbKey?: string;\r\n}\r\n\r\nexport class PageItem {\r\n  /**\r\n   * The item type this item has\r\n   */\r\n  itemType: ItemType;\r\n  /**\r\n   * The components that this item\r\n   * this stores information such as data, enchantments etc\r\n   */\r\n  components: IPageItemComponents;\r\n\r\n  /**\r\n   * The itemStack that was set at item creation\r\n   */\r\n  setItemStack: ItemStack | null;\r\n\r\n  constructor(\r\n    itemType: ItemType,\r\n    components: IPageItemComponents = {},\r\n    itemStack?: ItemStack\r\n  ) {\r\n    this.itemType = itemType;\r\n    this.components = components;\r\n    this.setItemStack = itemStack;\r\n  }\r\n  /**\r\n   * gets itemStack that this PageItem is associated with\r\n   */\r\n  get itemStack(): ItemStack {\r\n    if (this.setItemStack) return this.setItemStack;\r\n    const itemStack = new ItemStack(this.itemType);\r\n    if (this.components) {\r\n      itemStack.amount = this.components?.amount ?? 1;\r\n      itemStack.data = this.components?.data ?? 0;\r\n      itemStack.nameTag = this.components?.nameTag;\r\n      itemStack.setLore(this.components?.loreList ?? []);\r\n      const enchantments: EnchantmentList =\r\n        itemStack.getComponent(\"enchantments\").enchantments;\r\n      for (const enchantment of this.components?.enchantments ?? []) {\r\n        enchantments.addEnchantment(enchantment);\r\n      }\r\n      itemStack.getComponent(\"enchantments\").enchantments = enchantments;\r\n    }\r\n    return itemStack;\r\n  }\r\n}\r\n", "import { Entity } from \"@minecraft/server\";\r\nimport { AIR } from \"../../../index.js\";\r\nimport { Page } from \"./Page.js\";\r\n\r\nexport type FillTypeCallback = (\r\n  entity: Entity,\r\n  page: Page,\r\n  extras: any\r\n) => void;\r\n\r\n/**\r\n * Fills a entity with desired items\r\n */\r\nexport function DefaultFill(entity: Entity, page: Page, extras: any) {\r\n  const container = entity.getComponent(\"minecraft:inventory\").container;\r\n  for (let i = 0; i < container.size; i++) {\r\n    const slot = page.slots[i];\r\n    if (!slot || !slot.item) {\r\n      container.setItem(i, AIR);\r\n      continue;\r\n    }\r\n    container.setItem(i, slot.item.itemStack);\r\n  }\r\n}\r\n", "import { PAGES } from \"../utils.js\";\r\nimport { DefaultFill, FillTypeCallback } from \"./FillTypes\";\r\nimport { ItemGrabbedCallback } from \"./ItemGrabbedCallback.js\";\r\nimport type { PageItem } from \"./PageItem\";\r\n\r\nexport interface ISlot {\r\n  /**\r\n   * The item that should be in this slot\r\n   */\r\n  item: PageItem;\r\n  /**\r\n   * What happens when there is a change in this slot\r\n   */\r\n  action: (ctx: ItemGrabbedCallback) => void;\r\n}\r\n\r\nexport class Page {\r\n  /**\r\n   * The id this page has\r\n   */\r\n  id: string;\r\n  /**\r\n   * How this page fills, these can be custom or kept default\r\n   */\r\n  fillType: FillTypeCallback;\r\n\r\n  /**\r\n   * The slots in this gui\r\n   */\r\n  slots: ISlot[];\r\n\r\n  constructor(id: string, fillType: FillTypeCallback = DefaultFill) {\r\n    if (Object.keys(PAGES).includes(id))\r\n      throw new Error(`Page: ${id}, Already exists!`);\r\n    this.id = id;\r\n    this.fillType = fillType;\r\n    this.slots = [];\r\n    PAGES[id] = this;\r\n  }\r\n\r\n  /**\r\n   * Sets slots in this page\r\n   */\r\n  setSlots(\r\n    slot: Array<number>,\r\n    item: PageItem,\r\n    action: (ctx: ItemGrabbedCallback) => void\r\n  ): Page {\r\n    const data = item ? { item: item, action: action } : null;\r\n    for (const i of slot) {\r\n      this.slots[i] = data;\r\n    }\r\n    return this;\r\n  }\r\n}\r\n", "import { PageItem } from \"../Models/PageItem.js\";\r\nimport { Page } from \"../Models/Page.js\";\r\nimport { MinecraftItemTypes } from \"@minecraft/server\";\r\n\r\n/**\r\n * The Home page of this GUI this is the most important because\r\n * when the GUI is opened it will open up here, any plugin can\r\n * change this but this is the default screen\r\n */\r\nexport let HOME_PAGE = new Page(\"home\")\r\n  .setSlots(\r\n    [22],\r\n    new PageItem(MinecraftItemTypes.enderChest, {\r\n      nameTag: \"\u00A7l\u00A7bInventory Viewer\",\r\n    }),\r\n    (ctx) => {\r\n      ctx.PageAction(\"moderation:see\");\r\n    }\r\n  )\r\n  .setSlots(\r\n    [54],\r\n    new PageItem(MinecraftItemTypes.barrier, { nameTag: \"\u00A7cClose GUI\" }),\r\n    (ctx) => {\r\n      ctx.CloseAction();\r\n    }\r\n  );\r\n", "import { system } from \"@minecraft/server\";\r\nimport { EntitiesLoad } from \"../../lib/Events/EntitiesLoad\";\r\nimport type { Protection } from \"./modules/models/Protection\";\r\n\r\n/**\r\n * All protections in this anti-cheat\r\n */\r\nexport const PROTECTIONS: { [key: string]: Protection<any> } = {};\r\n\r\nEntitiesLoad.subscribe(() => {\r\n  system.run(() => {\r\n    for (const protection of Object.values(PROTECTIONS)) {\r\n      if (!protection.getConfig().enabled ?? protection.isEnabledByDefault)\r\n        continue;\r\n      protection.enable();\r\n    }\r\n  });\r\n});\r\n", "export const text = {\r\n  \"api.name\": () => \"Smelly API\",\r\n  \"api.error.unknown\": () => \"An unknown error has occurred.\",\r\n  \"api.database.error.table_name\": (a: string, b: number) =>\r\n    `The display name ${a} is too long for an objective, it can be at most ${b} characters long`,\r\n  \"api.utilities.formatter.error.ms\": (a: string) =>\r\n    `${a} is not a string or a number`,\r\n  \"api.Providers.form.invalidType\": (a: string, b: string) =>\r\n    `Type ${a} is not a valid type to add a ${b}`,\r\n  \"modules.protections.cps.clickingToFast\": () =>\r\n    `You are clicking to fast! Please click slower!`,\r\n  \"modules.managers.mute.isMuted\": () =>\r\n    `\u00A7cYou've been temporarily muted in chat.`,\r\n  \"modules.commands.ban.reply\": (\r\n    playerName: string,\r\n    duration: string,\r\n    reason: string = \"\"\r\n  ) =>\r\n    `\u00A7cBanned \u00A7f\"\u00A7a${playerName}\u00A7f\" \u00A7cfor ${duration} Because: \"${\r\n      reason ?? \"No reason Provided\"\r\n    }\" \u00A7aSuccessfully`,\r\n  \"lockdown.kick.message\": () => [\r\n    `\u00A7cYou have been kicked!`,\r\n    `\u00A7aReason: \u00A7fServer is currently under LockDown`,\r\n    `\u00A7fServer will be up soon, Try to join later`,\r\n  ],\r\n  \"commands.ban.list.player\": (name: string, reason: string, expire: string) =>\r\n    `- \"${name}\" Because: ${reason}, Expiry ${expire}`,\r\n  \"commands.freeze.list.player\": (name: string, reason: string) =>\r\n    `- \"${name}\" Because: ${reason}`,\r\n  \"commands.mutes.list.player\": (\r\n    name: string,\r\n    reason: string,\r\n    expire: string\r\n  ) => `- \"${name}\" Because: ${reason}, Expiry: ${expire}`,\r\n  \"commands.lockdown.confirm\":\r\n    \"Are you sure you want to lockdown the server, this will kick all active players and all players who try to join who are not admin\",\r\n};\r\n", "import { Location, Player } from \"@minecraft/server\";\r\nimport {\r\n  LiteralArgumentType,\r\n  IArgumentType,\r\n  LocationArgumentType,\r\n  StringArgumentType,\r\n  IntegerArgumentType,\r\n  ArrayArgumentType,\r\n  BooleanArgumentType,\r\n} from \"./ArgumentTypes.js\";\r\nimport { CommandCallback } from \"./Callback.js\";\r\nimport { COMMANDS } from \"./index.js\";\r\nimport type { AppendArgument, ICommandData, ArgReturn } from \"./types\";\r\nexport { ArgumentTypes } from \"./ArgumentTypes\";\r\n\r\nexport class Command<\r\n  Callback extends Function = (ctx: CommandCallback) => void\r\n> {\r\n  /**\r\n   * The Arguments on this command\r\n   */\r\n  children: Command<any>[];\r\n\r\n  /**\r\n   * Function to run when this command is called\r\n   */\r\n  callback: Callback;\r\n\r\n  constructor(\r\n    public data: ICommandData,\r\n    public type?: IArgumentType,\r\n    public depth: number = 0,\r\n    public parent?: Command<any>\r\n  ) {\r\n    if (!data.requires) data.requires = (player: Player) => true;\r\n    this.data = data;\r\n    this.type = type ?? new LiteralArgumentType(this.data.name);\r\n    this.children = [];\r\n    this.depth = depth;\r\n    this.parent = parent;\r\n    this.callback = null;\r\n\r\n    COMMANDS.push(this);\r\n  }\r\n\r\n  /**\r\n   * Adds a ranch to this command of your own type\r\n   * @param type a special type to be added\r\n   * @returns new branch to this command\r\n   */\r\n  argument<T extends IArgumentType>(type: T): ArgReturn<Callback, T[\"type\"]> {\r\n    const cmd = new Command<AppendArgument<Callback, T[\"type\"]>>(\r\n      this.data,\r\n      type,\r\n      this.depth + 1,\r\n      this\r\n    );\r\n    this.children.push(cmd);\r\n    return cmd;\r\n  }\r\n\r\n  /**\r\n   * Adds a branch to this command of type string\r\n   * @param name name this argument should have\r\n   * @returns new branch to this command\r\n   */\r\n  string(name: string): ArgReturn<Callback, string> {\r\n    return this.argument(new StringArgumentType(name));\r\n  }\r\n\r\n  /**\r\n   * Adds a branch to this command of type string\r\n   * @param name name this argument should have\r\n   * @returns new branch to this command\r\n   */\r\n  int(name: string): ArgReturn<Callback, number> {\r\n    return this.argument(new IntegerArgumentType(name));\r\n  }\r\n\r\n  /**\r\n   * Adds a branch to this command of type string\r\n   * @param name name this argument should have\r\n   * @returns new branch to this command\r\n   */\r\n  array<T extends ReadonlyArray<string>>(\r\n    name: string,\r\n    types: T\r\n  ): ArgReturn<Callback, T[number]> {\r\n    return this.argument(new ArrayArgumentType(name, types));\r\n  }\r\n\r\n  /**\r\n   * Adds a branch to this command of type string\r\n   * @param name name this argument should have\r\n   * @returns new branch to this command\r\n   */\r\n  boolean(name: string): ArgReturn<Callback, boolean> {\r\n    return this.argument(new BooleanArgumentType(name));\r\n  }\r\n\r\n  /**\r\n   * Adds a argument to this command to add 3 parameters with location types and to return a Location\r\n   * @param name name this argument  should have\r\n   * @returns new branch to this command\r\n   */\r\n  location(name: string): ArgReturn<Callback, Location> {\r\n    const cmd = this.argument(new LocationArgumentType(name));\r\n    if (!name.endsWith(\"*\")) {\r\n      const newArg = cmd.location(name + \"_y*\").location(name + \"_z*\");\r\n      //@ts-ignore\r\n      return newArg;\r\n    }\r\n    //@ts-ignore\r\n    return cmd;\r\n  }\r\n\r\n  /**\r\n   * Adds a subCommand to this argument\r\n   * @param name name this literal should have\r\n   * @returns new branch to this command\r\n   */\r\n  literal(data: ICommandData): Command<Callback> {\r\n    const cmd = new Command<Callback>(\r\n      data,\r\n      new LiteralArgumentType(data.name),\r\n      this.depth + 1,\r\n      this\r\n    );\r\n    this.children.push(cmd);\r\n    return cmd;\r\n  }\r\n\r\n  /**\r\n   * Registers this command and its appending arguments\r\n   * @param callback what to run when this command gets called\r\n   */\r\n  executes(callback: Callback): Command<Callback> {\r\n    this.callback = callback;\r\n    return this;\r\n  }\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport type { IBanData } from \"../../../../types.js\";\r\nimport { durationToMs } from \"../../../../utils.js\";\r\n\r\nfunction setBan(\r\n  player: string | Player,\r\n  id: string,\r\n  duration?: string,\r\n  reason: string = \"No Reason\",\r\n  by: string = \"Rubedo Auto Mod\"\r\n) {\r\n  const data: IBanData = {\r\n    key: id,\r\n    playerName: player instanceof Player ? player.name : player,\r\n    date: Date.now(),\r\n    duration: duration ? durationToMs(duration) : null,\r\n    expire: duration ? durationToMs(duration) + Date.now() : null,\r\n    reason: reason,\r\n    by: by,\r\n  };\r\n  TABLES.bans.set(id, data);\r\n}\r\n\r\nexport class Ban {\r\n  /**\r\n   * Ban a player for a set length\r\n   */\r\n  constructor(\r\n    player: string | Player,\r\n    duration?: string,\r\n    reason: string = \"No Reason\",\r\n    by: string = \"Rubedo Auto Mod\"\r\n  ) {\r\n    if (player instanceof Player) {\r\n      setBan(player, player.id, duration, reason, by);\r\n    } else {\r\n      setBan(player, TABLES.ids.get(player), duration, reason, by);\r\n    }\r\n  }\r\n}\r\n", "import { text } from \"../../../../lang/text.js\";\r\nimport type { CommandCallback } from \"../../../../lib/Command/Callback.js\";\r\nimport { Command, ArgumentTypes } from \"../../../../lib/Command/Command.js\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport { confirmAction, msToTime } from \"../../../../utils.js\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { Ban } from \"../models/Ban.js\";\r\n\r\nfunction ban(\r\n  ctx: CommandCallback,\r\n  player: string,\r\n  duration: string,\r\n  reason: string,\r\n  by: string\r\n) {\r\n  if (TABLES.bans.get(TABLES.ids.get(player)))\r\n    return ctx.reply(`\u00A7c${player} is already banned`);\r\n  ctx.reply(`\u00A7aClose chat to confirm`);\r\n  confirmAction(\r\n    ctx.sender,\r\n    `Are you sure you want to ban ${player}, for ${duration ?? \"forever\"}`,\r\n    () => {\r\n      new Ban(player, duration, reason, ctx.sender.name);\r\n      ctx.reply(text[\"modules.commands.ban.reply\"](player, duration, reason));\r\n    }\r\n  );\r\n}\r\n\r\nconst root = new Command({\r\n  name: \"ban\",\r\n  description: \"Manage bans\",\r\n  requires: (player) => [\"admin\", \"moderator\"].includes(getRole(player)),\r\n});\r\n\r\nroot\r\n  .literal({\r\n    name: \"add\",\r\n    description: \"Bans a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName())\r\n  .executes((ctx, player) => {\r\n    ban(ctx, player, null, null, ctx.sender.name);\r\n  })\r\n  .argument(new ArgumentTypes.duration(\"duration\"))\r\n  .executes((ctx, player, duration) => {\r\n    ban(ctx, player, duration, null, ctx.sender.name);\r\n  })\r\n  .string(\"reason\")\r\n  .executes((ctx, player, duration, reason) => {\r\n    ban(ctx, player, duration, reason, ctx.sender.name);\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"remove\",\r\n    description: \"un-bans a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName(\"playerName\"))\r\n  .executes((ctx, playerName) => {\r\n    const banData = TABLES.bans\r\n      .values()\r\n      .find((ban) => ban.playerName == playerName);\r\n    if (!banData) return ctx.reply(`${playerName} is not banned`);\r\n    if (TABLES.bans.delete(banData.key)) {\r\n      ctx.reply(`\u00A7a${playerName}\u00A7r has been Unbanned!`);\r\n    } else {\r\n      ctx.reply(`\u00A7cFailed to un-ban ${playerName}`);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"list\",\r\n    description: \"Lists all bans\",\r\n  })\r\n  .executes((ctx) => {\r\n    const bans = TABLES.bans.values();\r\n    if (bans.length == 0) return ctx.sender.tell(`\u00A7cNo one is banned!`);\r\n    ctx.sender.tell(`\u00A72--- Showing Bans (${bans.length}) ---`);\r\n    for (const ban of bans) {\r\n      ctx.sender.tell(\r\n        text[\"commands.ban.list.player\"](\r\n          ban.playerName,\r\n          ban.reason,\r\n          ban.expire ? msToTime(ban.duration) : \"Forever\"\r\n        )\r\n      );\r\n    }\r\n  });\r\n", "import { world } from \"@minecraft/server\";\r\nimport { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { getRole } from \"../../utils.js\";\r\n\r\nfunction broadcast(text: string) {\r\n    if (!text) return;\r\n    world.say({\r\n        \"rawtext\":[\r\n            {\"text\":`\r\n\u00A72\u00A7k===========================\r\n\u00A7r\u00A77====== \u00A7f[ \u00A7c\u00A7lBroadcast \u00A7f] \u00A77======\r\n\u00A7r\u00A7o ${text}\r\n\u00A7r\u00A72\u00A7k===========================\r\n`},\r\n        ]\r\n    });\r\n}\r\n\r\nnew Command({\r\n  name: \"broadcast\",\r\n  description: \"Broadcast System\",\r\n  aliases: [\"bc\"],\r\n  requires: (player) => [\"admin\", \"moderator\"].includes(getRole(player)),\r\n})\r\n  .string('message')\r\n  .executes((ctx, message) => {\r\n    broadcast(message);\r\n  })\r\n", "import { Command } from \"../../../../lib/Command/Command\";\r\nimport { TABLES } from \"../../../../database/tables\";\r\nimport { getRole } from \"../../utils\";\r\n\r\nconst root = new Command({\r\n  name: \"database\",\r\n  description: \"Interacts with SA Database\",\r\n  aliases: [\"db\"],\r\n  requires: (player) => getRole(player) == \"admin\",\r\n});\r\n\r\nroot\r\n  .literal({\r\n    name: \"get\",\r\n  })\r\n  .string(\"table\")\r\n  .string(\"key\")\r\n  .executes((ctx, table, key) => {\r\n    try {\r\n      const data = TABLES[table as keyof typeof TABLES].get(key);\r\n      if (data) {\r\n        ctx.reply(JSON.stringify(data));\r\n      } else {\r\n        ctx.reply(`No data could be found for key ${key}`);\r\n      }\r\n    } catch (error) {\r\n      ctx.reply(error + error.stack);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"set\",\r\n  })\r\n  .string(\"table\")\r\n  .string(\"key\")\r\n  .string(\"value\")\r\n  .executes((ctx, table, key, value) => {\r\n    try {\r\n      TABLES[table as keyof typeof TABLES].set(key, value);\r\n      ctx.reply(`Set Key: \"${key}\", to value: \"${value}\" on table: \"${table}\"`);\r\n    } catch (error) {\r\n      ctx.reply(error + error.stack);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"clear\",\r\n  })\r\n  .string(\"table\")\r\n  .executes((ctx, table) => {\r\n    try {\r\n      TABLES[table as keyof typeof TABLES].clear();\r\n      ctx.reply(`Cleared Table ${table}`);\r\n    } catch (error) {\r\n      ctx.reply(error + error.stack);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"keys\",\r\n    description: \"Returns all keys on a database\",\r\n  })\r\n  .string(\"table\")\r\n  .executes((ctx, table) => {\r\n    try {\r\n      const keys = TABLES[table as keyof typeof TABLES].keys();\r\n      ctx.reply(`Keys on database: ${table}: ${keys}`);\r\n    } catch (error) {\r\n      ctx.reply(error + error.stack);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"values\",\r\n    description: \"Returns all values on a database\",\r\n  })\r\n  .string(\"table\")\r\n  .executes((ctx, table) => {\r\n    try {\r\n      const values = TABLES[table as keyof typeof TABLES].values();\r\n      ctx.reply(\r\n        `Values on database: ${table}: ${JSON.stringify(values, null, 2)}`\r\n      );\r\n    } catch (error) {\r\n      // likely occurs when table is empty\r\n      if (error instanceof TypeError) {\r\n        ctx.reply(`No values on database ${table}`);\r\n      } else {\r\n        ctx.reply(error + error.stack);\r\n      }\r\n    }\r\n  });\r\n", "import { ArgumentTypes, Command } from \"../../../../lib/Command/Command.js\";\r\nimport { getRole } from \"../../utils.js\";\r\n\r\nnew Command({\r\n  name: \"ecwipe\",\r\n  description: \"Clears a players ender chest\",\r\n  requires: (player) => getRole(player) == \"admin\",\r\n})\r\n  .argument(new ArgumentTypes.player(\"player\"))\r\n  .executes((ctx, player) => {\r\n    for (let i = 0; i < 27; i++) {\r\n      player.runCommandAsync(`replaceitem entity @s slot.enderchest ${i} air`);\r\n    }\r\n    ctx.reply(`\u00A7aCleared \"${player.name}\"'s Ender chest!`);\r\n  });\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport type { IFreezeData } from \"../../../../types.js\";\r\n\r\nexport class Freeze {\r\n  /**\r\n   * Freeze a player\r\n   */\r\n  constructor(player: Player, reason: string = \"No Reason\") {\r\n    const data: IFreezeData = {\r\n      playerName: player.name,\r\n      key: player.id,\r\n      reason: reason,\r\n      location: {\r\n        x: player.location.x,\r\n        y: player.location.y,\r\n        z: player.location.z,\r\n        dimension: player.dimension.id,\r\n      },\r\n    };\r\n    TABLES.freezes.set(player.id, data);\r\n  }\r\n}\r\n", "import { ArgumentTypes, Command } from \"../../../../lib/Command/Command.js\";\r\nimport { Freeze } from \"../models/Freeze.js\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport { text } from \"../../../../lang/text.js\";\r\n\r\nconst root = new Command({\r\n  name: \"freeze\",\r\n  description: \"Manage Freezes\",\r\n  requires: (player) => [\"admin\", \"moderator\"].includes(getRole(player)),\r\n});\r\n\r\nroot\r\n  .literal({\r\n    name: \"add\",\r\n    description: \"Freezes a player\",\r\n  })\r\n  .argument(new ArgumentTypes.player(\"player\"))\r\n  .string(\"reason\")\r\n  .executes((ctx, player, reason) => {\r\n    new Freeze(player, reason);\r\n    ctx.reply(\r\n      `\u00A7cFroze \u00A7f\"\u00A7a${player.name}\u00A7f\" Because: \"${reason}\" \u00A7aSuccessfully`\r\n    );\r\n    ctx.sender.tell(\r\n      `\u00A7cYou have been frozen by \u00A7f\"\u00A7a${ctx.sender.name}\u00A7f\" Because: \"${reason}\"`\r\n    );\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"remove\",\r\n    description: \"unfreezes a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName(\"playerName\"))\r\n  .executes((ctx, playerName) => {\r\n    const freeze = TABLES.freezes\r\n      .values()\r\n      .find((freeze) => freeze.playerName == playerName);\r\n    if (!freeze) return ctx.reply(`${playerName} is not frozen`);\r\n\r\n    TABLES.freezes.delete(freeze.key);\r\n\r\n    ctx.reply(`\u00A7a${playerName}\u00A7r has been UnFrozen!`);\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"list\",\r\n    description: \"Lists all freezes\",\r\n  })\r\n  .executes((ctx) => {\r\n    const freezes = TABLES.freezes.values();\r\n    if (freezes.length == 0) return ctx.sender.tell(`\u00A7cNo one is frozen!`);\r\n    ctx.sender.tell(`\u00A72--- Showing Freezes (${freezes.length}) ---`);\r\n    for (const freeze of freezes) {\r\n      ctx.sender.tell(\r\n        text[\"commands.freeze.list.player\"](freeze.playerName, freeze.reason)\r\n      );\r\n    }\r\n  });\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { PREFIX } from \"../../../../config/commands.js\";\r\nimport {\r\n  IArgumentReturnData,\r\n  IArgumentType,\r\n} from \"../../../../lib/Command/ArgumentTypes.js\";\r\nimport { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { COMMANDS } from \"../../../../lib/Command/index.js\";\r\n\r\nclass CommandNameArgumentType implements IArgumentType {\r\n  type: string;\r\n  typeName = \"CommandName\";\r\n  matches(value: string): IArgumentReturnData<string> {\r\n    return {\r\n      success: Boolean(\r\n        COMMANDS.find((c) => c.depth == 0 && c.data.name == value)\r\n      ),\r\n      value: value,\r\n    };\r\n  }\r\n  fail(value: string): string {\r\n    return `\"${value}\" is not a valid command`;\r\n  }\r\n  constructor(public name: string) {}\r\n}\r\n\r\n/**\r\n * Sends text in chat relation to the args in the command to player\r\n */\r\nfunction sendCommandType(\r\n  baseCommand: Command,\r\n  args: Command[],\r\n  player: Player\r\n) {\r\n  player.tell(\r\n    `${PREFIX}${baseCommand.data.name} ${args\r\n      .map((a) =>\r\n        a.type.typeName == \"literal\"\r\n          ? a.data.name\r\n          : `<${a.type.name}: ${a.type.typeName}>`\r\n      )\r\n      .join(\" \")}`\r\n  );\r\n}\r\n\r\nfunction sendArguments(bc: Command, c: Command, args: Command[], p: Player) {\r\n  if (!c.data?.requires(p)) return;\r\n  if (c.callback) {\r\n    // command has a callback\r\n    sendCommandType(bc, c.depth == 0 ? args : args.concat(c), p);\r\n  }\r\n  if (c.children.length > 0) {\r\n    // cmd has arguments\r\n    for (const child of c.children) {\r\n      sendArguments(bc, child, c.depth == 0 ? args : args.concat(c), p);\r\n    }\r\n  }\r\n}\r\n\r\nfunction sendPageHeader(player: Player, p: number, maxPages: number) {\r\n  player.tell(\r\n    `\u00A72--- Showing help page ${p} of ${maxPages} (${PREFIX}help <page: int>) ---`\r\n  );\r\n}\r\n\r\nfunction getCommands(player: Player): Command<any>[] {\r\n  return COMMANDS.filter((c) => {\r\n    return c.depth == 0 && c.data?.requires(player);\r\n  });\r\n}\r\n\r\nfunction getMaxPages(player: Player): number {\r\n  const commands = getCommands(player);\r\n  if (commands.length == 0) return 0;\r\n  return Math.ceil(commands.length / 5);\r\n}\r\n\r\nconst root = new Command({\r\n  name: \"help\",\r\n  description: \"Provides help/list of commands.\",\r\n  aliases: [\"?\", \"h\"],\r\n}).executes((ctx) => {\r\n  // show page 1\r\n  const maxPages = getMaxPages(ctx.sender);\r\n  const commands = getCommands(ctx.sender).slice(1 * 5 - 5, 1 * 5);\r\n  sendPageHeader(ctx.sender, 1, maxPages);\r\n  for (const cmd of commands) {\r\n    sendArguments(cmd, cmd, [], ctx.sender);\r\n  }\r\n});\r\n\r\nroot.int(\"page\").executes((ctx, p) => {\r\n  // shows page\r\n  const maxPages = getMaxPages(ctx.sender);\r\n  if (p > maxPages) p = maxPages;\r\n  const commands = getCommands(ctx.sender).slice(p * 5 - 5, p * 5);\r\n  sendPageHeader(ctx.sender, p, maxPages);\r\n  for (const cmd of commands) {\r\n    sendArguments(cmd, cmd, [], ctx.sender);\r\n  }\r\n});\r\n\r\nroot\r\n  .argument(new CommandNameArgumentType(\"command\"))\r\n  .executes((ctx, command) => {\r\n    // shows command\r\n    const cmd = COMMANDS.filter(\r\n      (c) => c.depth == 0 && c.data.name == command\r\n    )[0];\r\n    ctx.sender.tell(\r\n      `\u00A7e${cmd.data.name}: ${\r\n        cmd.data.aliases ? `aliases (${cmd.data.aliases.join(\", \")})` : \"\"\r\n      }`\r\n    );\r\n    ctx.sender.tell(`\u00A7e${cmd.data.description}`);\r\n    ctx.sender.tell(`Usage:`);\r\n    sendArguments(cmd, cmd, [], ctx.sender);\r\n  });\r\n", "import { world } from \"@minecraft/server\";\r\nimport { text } from \"../../../../lang/text.js\";\r\nimport { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { confirmAction } from \"../../../../utils.js\";\r\nimport { getRole, isLockedDown, kick, setLockDown } from \"../../utils.js\";\r\n\r\nnew Command({\r\n  name: \"lockdown\",\r\n  description: \"Toggles the servers lockdown, meaning no one can join\",\r\n  requires: (player) => getRole(player) == \"admin\",\r\n}).executes((ctx) => {\r\n  if (isLockedDown()) {\r\n    setLockDown(false);\r\n    ctx.sender.tell(`\u00A7aUnlocked the server!`);\r\n  } else {\r\n    ctx.reply(`\u00A7aClose chat to confirm lockdown`);\r\n    confirmAction(ctx.sender, text[\"commands.lockdown.confirm\"], () => {\r\n      setLockDown(true);\r\n      for (const player of world.getPlayers()) {\r\n        if (getRole(player) == \"admin\") continue;\r\n        kick(player, text[\"lockdown.kick.message\"]());\r\n      }\r\n      world.say(`\u00A7l\u00A7cServer is now LOCKED!`);\r\n    });\r\n  }\r\n});\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport type { IMuteData } from \"../../../../types.js\";\r\nimport { durationToMs } from \"../../../../utils.js\";\r\n\r\nexport class Mute {\r\n  length: number;\r\n  /**\r\n   * Gets the mute data for this player\r\n   */\r\n  static getMuteData(player: Player): IMuteData {\r\n    return TABLES.mutes.get(player.name);\r\n  }\r\n  /**\r\n   * Mutes a player for a length\r\n   */\r\n  constructor(\r\n    player: Player,\r\n    duration?: string,\r\n    reason: string = \"No Reason\",\r\n    by: string = \"Rubedo Auto Mod\"\r\n  ) {\r\n    const msLength = duration ? durationToMs(duration) : null;\r\n    const data: IMuteData = {\r\n      playerName: player.name,\r\n      date: Date.now(),\r\n      duration: msLength,\r\n      expire: msLength ? msLength + Date.now() : null,\r\n      reason: reason,\r\n      by: by,\r\n    };\r\n    TABLES.mutes.set(player.name, data);\r\n  }\r\n}\r\n", "import { ArgumentTypes, Command } from \"../../../../lib/Command/Command.js\";\r\nimport { Mute } from \"../models/Mute.js\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport { text } from \"../../../../lang/text.js\";\r\nimport { msToTime } from \"../../../../utils.js\";\r\n\r\nconst root = new Command({\r\n  name: \"mute\",\r\n  description: \"Manage Mutes\",\r\n  requires: (player) => [\"admin\", \"moderator\"].includes(getRole(player)),\r\n});\r\n\r\nroot\r\n  .literal({\r\n    name: \"add\",\r\n    description: \"Mutes a player\",\r\n  })\r\n  .argument(new ArgumentTypes.player(\"player\"))\r\n  .argument(new ArgumentTypes.duration(\"duration\"))\r\n  .string(\"reason\")\r\n  .executes((ctx, player, duration, reason) => {\r\n    new Mute(player, duration, reason, ctx.sender.name);\r\n    ctx.reply(\r\n      `\u00A7cMuted \u00A7f\"\u00A7a${player.name}\u00A7f\" \u00A7cfor ${duration} Because: \"${reason}\" \u00A7aSuccessfully`\r\n    );\r\n    player.tell(\r\n      `\u00A7cYou have been muted by \u00A7f\"${ctx.sender.name}\" \u00A7cfor ${duration} Because: \"${reason}\"`\r\n    );\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"remove\",\r\n    description: \"un-mutes a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName(\"playerName\"))\r\n  .executes((ctx, playerName) => {\r\n    const mute = TABLES.mutes\r\n      .values()\r\n      .find((mute) => mute.playerName == playerName);\r\n    if (!mute) return ctx.reply(`${playerName} is not muted!`);\r\n\r\n    TABLES.mutes.delete(mute.playerName);\r\n    try {\r\n      ctx.sender.runCommandAsync(`ability \"${playerName}\" mute false`);\r\n    } catch (error) {}\r\n    ctx.reply(`\u00A7a${playerName}\u00A7r has been UnMuted!`);\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"list\",\r\n    description: \"Lists all freezes\",\r\n  })\r\n  .executes((ctx) => {\r\n    const mutes = TABLES.mutes.values();\r\n    if (mutes.length == 0) return ctx.sender.tell(`\u00A7cNo one is muted!`);\r\n    ctx.sender.tell(`\u00A72--- Showing Mutes (${mutes.length}) ---`);\r\n    for (const mute of mutes) {\r\n      ctx.sender.tell(\r\n        text[\"commands.mutes.list.player\"](\r\n          mute.playerName,\r\n          mute.reason,\r\n          mute.expire ? msToTime(mute.expire) : \"Forever\"\r\n        )\r\n      );\r\n    }\r\n  });\r\n", "import { Location } from \"@minecraft/server\";\r\nimport { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { Npc } from \"../models/Npc.js\";\r\n\r\nnew Command({\r\n  name: \"npc\",\r\n  description: \"Spawns a npc at your coordinates\",\r\n  requires: (player) => getRole(player) == \"admin\",\r\n}).executes((ctx) => {\r\n  const { x, y, z } = ctx.sender.location;\r\n  new Npc(new Location(x, y, z), ctx.sender.dimension);\r\n  ctx.reply(`Spawned a verified npc at your current location`);\r\n});\r\n", "import { Dimension, Entity, Location } from \"@minecraft/server\";\r\nimport { clearNpcLocations, NPC_LOCATIONS } from \"../../index.js\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport type { INpcLocation } from \"../../../../types.js\";\r\nimport { LocationEquals } from \"../../../../utils.js\";\r\n\r\nexport class Npc {\r\n  /**\r\n   * Checks if a entity is a valid npc\r\n   * @param entity npc\r\n   */\r\n  static isValid(entity: Entity): boolean {\r\n    if (entity.typeId != \"minecraft:npc\") return false;\r\n    if (NPC_LOCATIONS.find((l) => LocationEquals(l, entity.location)))\r\n      return true;\r\n    return TABLES.npcs.keys().find((key) => entity.id == key) ? true : false;\r\n  }\r\n  /**\r\n   * Adds a new verified npc to the world\r\n   */\r\n  constructor(location: Location, dimension: Dimension) {\r\n    NPC_LOCATIONS.push(location);\r\n    const entity = dimension.spawnEntity(\"minecraft:npc\", location);\r\n\r\n    const data: INpcLocation = {\r\n      dimension: entity.dimension.id,\r\n      x: entity.location.x,\r\n      y: entity.location.y,\r\n      z: entity.location.z,\r\n    };\r\n    TABLES.npcs.set(entity.id, data);\r\n    clearNpcLocations();\r\n  }\r\n}\r\n", "import { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { system } from \"@minecraft/server\";\r\n\r\nasync function getServerTPS(): Promise<number> {\r\n  let startTime = Date.now();\r\n  let ticks = 0;\r\n  return new Promise((resolve) => {\r\n    let s = system.runSchedule(() => {\r\n      if (Date.now() - startTime < 1000) {\r\n        ticks++;\r\n      } else {\r\n        system.clearRunSchedule(s);\r\n        resolve(ticks);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nnew Command({\r\n  name: \"ping\",\r\n  description: \"Returns the current Ticks Per Second of the servers ping\",\r\n}).executes(async (ctx) => {\r\n  let ticks = await getServerTPS();\r\n  ctx.reply(\r\n    `\u00A7aCurrent Ticks Per Second: ${\r\n      ticks > 18 ? \"\u00A7f{ \u00A7aGood\" : ticks > 13 ? \"\u00A7f{ \u00A7eOk\" : \"\u00A7f{ \u00A7cSevere\"\r\n    } ${ticks} \u00A7f}`\r\n  );\r\n});\r\n", "import { BlockLocation } from \"@minecraft/server\";\r\nimport { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { Region } from \"../models/Region.js\";\r\nimport { getRole } from \"../../utils.js\";\r\n\r\nconst command = new Command({\r\n  name: \"region\",\r\n  description: \"Create a Region\",\r\n  requires: (player) => getRole(player) == \"admin\",\r\n});\r\n\r\ncommand\r\n  .literal({\r\n    name: \"add\",\r\n    description: \"Adds a new protection region\",\r\n  })\r\n  .int(\"from_x\")\r\n  .int(\"from_z\")\r\n  .int(\"to_x\")\r\n  .int(\"to_z\")\r\n  .executes((ctx, from_x, from_z, to_x, to_z) => {\r\n    new Region(\r\n      { x: from_x, z: from_z },\r\n      { x: to_x, z: to_z },\r\n      ctx.sender.dimension.id\r\n    );\r\n    ctx.reply(\r\n      `Created Region From ${from_x} -64 ${from_z} ${to_x} 320 ${to_z}`\r\n    );\r\n  });\r\n\r\ncommand\r\n  .literal({\r\n    name: \"remove\",\r\n    description: \"Removes a region at the players current position\",\r\n  })\r\n  .executes((ctx) => {\r\n    const loc = new BlockLocation(\r\n      ctx.sender.location.x,\r\n      ctx.sender.location.y,\r\n      ctx.sender.location.z\r\n    );\r\n    const r = Region.removeRegionAtBlockLocation(loc, ctx.sender.dimension.id);\r\n    if (r) {\r\n      ctx.reply(`Removed Region at ${loc.x} ${loc.y} ${loc.z}`);\r\n    } else {\r\n      ctx.reply(`Failed to find/remove region at ${loc.x} ${loc.y} ${loc.z}`);\r\n    }\r\n  });\r\n\r\ncommand\r\n  .literal({\r\n    name: \"removeAll\",\r\n    description: \"Removes all regions\",\r\n  })\r\n  .executes((ctx) => {\r\n    Region.getAllRegions().forEach((r) => r.delete());\r\n    ctx.reply(`Removed All regions`);\r\n  });\r\n\r\ncommand\r\n  .literal({\r\n    name: \"list\",\r\n    description: \"Lists all regions and positions\",\r\n  })\r\n  .executes((ctx) => {\r\n    const regions = Region.getAllRegions();\r\n    for (const region of regions) {\r\n      ctx.reply(\r\n        `Region from ${region.from.x}, ${region.from.z} to ${region.to.x}, ${region.to.z} in dimension ${region.dimensionId}`\r\n      );\r\n    }\r\n    if (regions.length == 0) return ctx.reply(`No regions have been made yet`);\r\n  });\r\n\r\nconst permission = command.literal({\r\n  name: \"permission\",\r\n  description: \"Handles permissions for regions\",\r\n});\r\n\r\npermission\r\n  .literal({\r\n    name: \"set\",\r\n    description:\r\n      \"Sets a certain permission on the region the player is currently in to a value\",\r\n  })\r\n  .array(\"key\", [\"doorsAndSwitches\", \"openContainers\", \"pvp\"] as const)\r\n  .boolean(\"value\")\r\n  .executes((ctx, key, value) => {\r\n    const region = Region.blockLocationInRegion(\r\n      new BlockLocation(\r\n        ctx.sender.location.x,\r\n        ctx.sender.location.y,\r\n        ctx.sender.location.z\r\n      ),\r\n      ctx.sender.dimension.id\r\n    );\r\n    if (!region) return ctx.reply(`You are not in a region`);\r\n    region.changePermission(key, value);\r\n    ctx.reply(`Changed permission ${key} to ${value}`);\r\n  });\r\n\r\npermission\r\n  .literal({\r\n    name: \"list\",\r\n    description: \"Lists the permissions for the current region\",\r\n  })\r\n  .executes((ctx) => {\r\n    const region = Region.blockLocationInRegion(\r\n      new BlockLocation(\r\n        ctx.sender.location.x,\r\n        ctx.sender.location.y,\r\n        ctx.sender.location.z\r\n      ),\r\n      ctx.sender.dimension.id\r\n    );\r\n    if (!region) return ctx.reply(`You are not in a region`);\r\n    ctx.reply(\r\n      `Current region permissions ${JSON.stringify(region.permissions)}`\r\n    );\r\n  });\r\n\r\nconst entityCommands = permission.literal({\r\n  name: \"entities\",\r\n  description: \"Holds the subCommands for adding or removing allowedEntities\",\r\n});\r\n\r\nentityCommands\r\n  .literal({\r\n    name: \"add\",\r\n    description: \"Adds a entity to the allowed entities list\",\r\n  })\r\n  .string(\"entity\")\r\n  .executes((ctx, entity) => {\r\n    const region = Region.blockLocationInRegion(\r\n      new BlockLocation(\r\n        ctx.sender.location.x,\r\n        ctx.sender.location.y,\r\n        ctx.sender.location.z\r\n      ),\r\n      ctx.sender.dimension.id\r\n    );\r\n    if (!region) return ctx.reply(`You are not in a region`);\r\n    const currentAllowedEntities = region.permissions.allowedEntities;\r\n    currentAllowedEntities.push(entity);\r\n    region.changePermission(\"allowedEntities\", currentAllowedEntities);\r\n    ctx.reply(\r\n      `Added entity ${entity} to the allowed entities of the region your currently standing in`\r\n    );\r\n  });\r\n\r\nentityCommands\r\n  .literal({\r\n    name: \"remove\",\r\n    description: \"Removes a entity from the allowed entities in the region\",\r\n  })\r\n  .string(\"entity\")\r\n  .executes((ctx, entity) => {\r\n    const region = Region.blockLocationInRegion(\r\n      new BlockLocation(\r\n        ctx.sender.location.x,\r\n        ctx.sender.location.y,\r\n        ctx.sender.location.z\r\n      ),\r\n      ctx.sender.dimension.id\r\n    );\r\n    if (!region) return ctx.reply(`You are not in a region`);\r\n    let currentAllowedEntities = region.permissions.allowedEntities;\r\n    if (!currentAllowedEntities.includes(entity))\r\n      return ctx.reply(\r\n        `The entity ${entity} is not allowed to enter the region`\r\n      );\r\n    currentAllowedEntities = currentAllowedEntities.filter((v) => v != entity);\r\n    region.changePermission(\"allowedEntities\", currentAllowedEntities);\r\n    ctx.reply(\r\n      `Removed entity ${entity} to the allowed entities of the region your currently standing in`\r\n    );\r\n  });\r\n", "import { Events, ItemStack, Player } from \"@minecraft/server\";\r\nimport type { APPEAL_LINK } from \"./config/app\";\r\nimport type { ENCHANTMENTS } from \"./plugins/Anti-Cheat/config/enchantments\";\r\nimport type {\r\n  BANNED_BLOCKS,\r\n  BANNED_ITEMS,\r\n} from \"./plugins/Anti-Cheat/config/moderation\";\r\nimport type { BlockInventory } from \"./plugins/Anti-Cheat/modules/models/BlockInventory\";\r\n\r\n/**\r\n * The roles that are in this server\r\n */\r\nexport enum ROLES {\r\n  member,\r\n  admin,\r\n  moderator,\r\n  builder,\r\n}\r\n\r\nexport interface IMsOptions {\r\n  compactDuration?: string;\r\n  fullDuration?: string;\r\n  avoidDuration?: Array<string>;\r\n}\r\n\r\nexport interface IplayerTickRegister {\r\n  /**\r\n   * callback to send\r\n   */\r\n  callback: (player: Player) => void;\r\n  /**\r\n   * delay in ticks\r\n   */\r\n  delay: number;\r\n  /**\r\n   * the last tick it sent a callback\r\n   */\r\n  lastCall: number;\r\n}\r\n\r\nexport interface ISlotChangeReturn {\r\n  /**\r\n   * Slot that changed\r\n   */\r\n  slot: number;\r\n  /**\r\n   * the item that was grabbed / put\r\n   */\r\n  item: ItemStack;\r\n}\r\n\r\nexport interface IEvents {\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface IContainerLocation {\r\n  [key: string]: BlockInventory;\r\n}\r\n\r\nexport interface IBanData {\r\n  /**\r\n   * The unique id of this ban\r\n   */\r\n  key: string;\r\n  /**\r\n   * The playersName of who was banned\r\n   * @example \"Smell of curry\"\r\n   */\r\n  playerName: string;\r\n  /**\r\n   * The date in MS when this player was banned\r\n   */\r\n  date: number;\r\n  /**\r\n   * The duration in ms that this ban will be for\r\n   * if null player is banned forever\r\n   */\r\n  duration?: number;\r\n  /**\r\n   * When this ban will expire, if null it will never expire meaning player is banned forever\r\n   */\r\n  expire?: number;\r\n  /**\r\n   * The reason for why this player was banned\r\n   * @example \"Hacking\"\r\n   */\r\n  reason?: string;\r\n  /**\r\n   * Who banned this player\r\n   * @example \"Smell of curry\"\r\n   * @example \"Rubedo Anti Cheat\"\r\n   */\r\n  by?: string;\r\n}\r\n\r\nexport interface IFreezeData {\r\n  /**\r\n   * Players name of who was banned\r\n   */\r\n  playerName: string;\r\n  /**\r\n   * Unique id of this freeze instance\r\n   */\r\n  key: string;\r\n  /**\r\n   * The reason for this freeze\r\n   */\r\n  reason?: string;\r\n  /**\r\n   * The location of this freeze\r\n   */\r\n  location: {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n    dimension: string;\r\n  };\r\n}\r\n\r\nexport interface IMuteData {\r\n  /**\r\n   * Players name of who is muted\r\n   * @example \"Smell of curry\"\r\n   */\r\n  playerName: string;\r\n  /**\r\n   * The date this player got muted\r\n   */\r\n  date: number;\r\n  /**\r\n   * The duration of this mute in ms\r\n   * if null player is muted forever\r\n   */\r\n  duration?: number;\r\n  /**\r\n   * When this players mute will expire in ms\r\n   * if null this mute will never expire\r\n   */\r\n  expire?: number;\r\n  /**\r\n   * Why this player is muted\r\n   * @example \"Spamming\"\r\n   */\r\n  reason?: string;\r\n  /**\r\n   * Who muted this player\r\n   * @example \"Smell of curry\"\r\n   * @example \"Rubedo Anti Cheat\"\r\n   */\r\n  by?: string;\r\n}\r\n\r\nexport interface INpcLocation {\r\n  dimension: string;\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n}\r\n\r\nexport interface IRegionDB {\r\n  dimensionId: string;\r\n  from: IRegionCords;\r\n  to: IRegionCords;\r\n  key: string;\r\n  permissions: IRegionPermissions;\r\n}\r\n\r\nexport interface IRegionCords {\r\n  x: number;\r\n  z: number;\r\n}\r\n\r\nexport interface IRegionPermissions {\r\n  /**\r\n   * if the player can use chests, default: true\r\n   */\r\n  doorsAndSwitches: Boolean;\r\n  /**\r\n   * if the player can use doors, default: true\r\n   */\r\n  openContainers: Boolean;\r\n  /**\r\n   * if players can fight, default: false\r\n   */\r\n  pvp: Boolean;\r\n  /**\r\n   * the entities allowed in this region\r\n   */\r\n  allowedEntities: Array<string>;\r\n}\r\n\r\nexport interface IChangePlayerRoleData {\r\n  /**\r\n   * The name of the player\r\n   */\r\n  playerName: string;\r\n  /**\r\n   * The role that the player should be set to\r\n   */\r\n  role: keyof typeof ROLES;\r\n}\r\n\r\nexport type durationSegmentType = \"y\" | \"w\" | \"d\" | \"h\" | \"m\" | \"s\" | \"ms\";\r\nexport type durationSegment = `${number}${durationSegmentType}`;\r\n\r\nexport type ConfigIds =\r\n  | \"spam_config\"\r\n  | \"cbe_config\"\r\n  | \"gamemode_config\"\r\n  | \"nuker_data\"\r\n  | \"banned_items\"\r\n  | \"banned_blocks\";\r\n\r\nexport type ConfigType = {\r\n  spam_config: {\r\n    /**\r\n     * @default true\r\n     */\r\n    repeatedMessages: boolean;\r\n    /**\r\n     * @default true\r\n     */\r\n    zalgo: boolean;\r\n    /**\r\n     * @default 0\r\n     */\r\n    violationCount: number;\r\n    /**\r\n     * @default false\r\n     */\r\n    permMutePlayer: boolean;\r\n  };\r\n  cbe_config: {\r\n    /**\r\n     * @default true\r\n     */\r\n    clearItem: boolean;\r\n    /**\r\n     * @default 0\r\n     */\r\n    violationCount: number;\r\n    /**\r\n     * @default false\r\n     */\r\n    banPlayer: boolean;\r\n    /**\r\n     * @default false\r\n     */\r\n    canAddEnchantment: boolean;\r\n  };\r\n  gamemode_config: {\r\n    /**\r\n     * @default true\r\n     */\r\n    setToSurvival: boolean;\r\n    /**\r\n     * @default true\r\n     */\r\n    clearPlayer: boolean;\r\n    /**\r\n     * @default 0\r\n     */\r\n    violationCount: number;\r\n    /**\r\n     * @default false\r\n     */\r\n    banPlayer: boolean;\r\n  };\r\n  nuker_data: {\r\n    /**\r\n     * @default 0\r\n     */\r\n    violationCount: number;\r\n    /**\r\n     * @default false\r\n     */\r\n    banPlayer: boolean;\r\n  };\r\n  /**\r\n   * {@link BANNED_ITEMS}\r\n   */\r\n  banned_items: string[];\r\n  /**\r\n   * {@link BANNED_BLOCKS}\r\n   */\r\n  banned_blocks: string[];\r\n  /**\r\n   * {@link ENCHANTMENTS}\r\n   */\r\n  enchantments: {\r\n    [Property in keyof typeof ENCHANTMENTS]: number;\r\n  };\r\n  /**\r\n   * {@link APPEAL_LINK}\r\n   */\r\n  appealLink: string;\r\n};\r\n\r\nexport interface LogData {\r\n  /**\r\n   * An optional playerName who is associated with this log\r\n   * @example \"Smell of curry\"\r\n   */\r\n  playerName?: string;\r\n  /**\r\n   * The message for this log\r\n   * @example \"Smell of curry is bad\"\r\n   */\r\n  message: string;\r\n  /**\r\n   * An optional property to list what protection this was from\r\n   */\r\n  protection?: string;\r\n}\r\n\r\nexport type EventsReturnType<T extends keyof Events> = (\r\n  arg: Parameters<Parameters<Events[T][\"subscribe\"]>[0]>[0]\r\n) => void;\r\n\r\nexport type IProtectionsConfig = {\r\n  [key: string]: boolean | string | number;\r\n  /**\r\n   * If this protection is enabled\r\n   */\r\n  enabled: boolean\r\n};\r\n\r\nexport enum GAMEMODE {\r\n  survival,\r\n  creative,\r\n  adventure,\r\n}", "import { ROLES } from \"../../../../types\";\r\nimport { ArgumentTypes, Command } from \"../../../../lib/Command/Command\";\r\nimport {\r\n  getRole,\r\n  getServerOwner,\r\n  isServerOwner,\r\n  setRole,\r\n  setServerOwner,\r\n} from \"../../utils.js\";\r\nimport { TABLES } from \"../../../../database/tables\";\r\nimport { confirmAction } from \"../../../../utils\";\r\n\r\n// Helper\r\nconst StringIsNumber = (value: any) => isNaN(Number(value)) === false;\r\n\r\n// Turn enum into array\r\nfunction ToArray(enumme: any) {\r\n  return (\r\n    Object.keys(enumme)\r\n      // @ts-ignore\r\n      .filter(StringIsNumber)\r\n      .map((key) => enumme[key])\r\n  );\r\n}\r\n\r\nconst root = new Command({\r\n  name: \"role\",\r\n  description: \"Changes the role for a player\",\r\n  requires: (player) => getRole(player) == \"admin\" || isServerOwner(player),\r\n});\r\n\r\nroot\r\n  .literal({\r\n    name: \"set\",\r\n    description: \"Sets the role for a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName(\"playerName\"))\r\n  .argument(new ArgumentTypes.array(\"role\", ToArray(ROLES) as string[]))\r\n  .executes((ctx, playerName, role) => {\r\n    setRole(playerName, role as keyof typeof ROLES);\r\n    ctx.reply(`Changed role of ${playerName} to ${role}`);\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"get\",\r\n    description: \"Gets the role of a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName(\"playerName\"))\r\n  .executes((ctx, playerName) => {\r\n    const role = getRole(playerName);\r\n    ctx.reply(`${playerName} has role: ${role}`);\r\n  });\r\n\r\nconst ownerRoot = root.literal({\r\n  name: \"owner\",\r\n  description: \"Manages the owner\",\r\n});\r\n\r\nownerRoot\r\n  .literal({\r\n    name: \"get\",\r\n    description: \"Gets the owner of the world\",\r\n  })\r\n  .executes((ctx) => {\r\n    const ownerId = getServerOwner();\r\n    const ids = TABLES.ids.collection();\r\n    const ownerName = Object.keys(ids).find((key) => ids[key] === ownerId);\r\n    ctx.reply(`\u00A7aServer Owner: ${ownerName} (id: ${ownerId})`);\r\n  });\r\n\r\nownerRoot\r\n  .literal({\r\n    name: \"transfer\",\r\n    description: \"Transfers the owner of the world\",\r\n    requires: (player) => isServerOwner(player),\r\n  })\r\n  .argument(new ArgumentTypes.player())\r\n  .executes((ctx, player) => {\r\n    confirmAction(\r\n      ctx.sender,\r\n      `Are you sure you want to transfer the server ownership to ${player.name}, this action is not reversible!`,\r\n      () => {\r\n        setServerOwner(player);\r\n        ctx.reply(\r\n          `\u00A7aSet the server Owner to: ${player.name} (id: ${player.id})`\r\n        );\r\n      }\r\n    );\r\n    ctx.reply(`\u00A7aClose chat to confirm`);\r\n  });\r\n\r\nownerRoot\r\n  .literal({\r\n    name: \"clear\",\r\n    description: \"clear's the owner of the world\",\r\n    requires: (player) => isServerOwner(player),\r\n  })\r\n  .executes((ctx) => {\r\n    confirmAction(\r\n      ctx.sender,\r\n      \"Are you sure you want to clear the server owner, this action is not reversible!\",\r\n      () => {\r\n        setServerOwner(null);\r\n        ctx.reply(\r\n          `\u00A7aCleared the server owner! run \"/reload\" or reload world to run \"/function start\" again!`\r\n        );\r\n      }\r\n    );\r\n    ctx.reply(`\u00A7aClose chat to confirm`);\r\n  });\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { ActionFormData } from \"@minecraft/server-ui\";\r\nimport { TIMEOUT_THRESHOLD } from \"../../../config/form\";\r\nimport type { ButtonCallback, IActionFormButton } from \"../types\";\r\n\r\nexport class ActionForm {\r\n  /**\r\n   *  the title that this form should have\r\n   */\r\n  title?: string;\r\n  /**\r\n   * extra text that should be displayed in the form\r\n   */\r\n  body?: string;\r\n  /**\r\n   * The buttons this form has\r\n   */\r\n  private buttons: IActionFormButton[];\r\n\r\n  /**\r\n   * The default minecraft form this form is based on\r\n   */\r\n  private form: ActionFormData;\r\n\r\n  /**\r\n   * The amount of times it takes to show this form in ms\r\n   * if this value goes above 200 it will time out\r\n   */\r\n  private triedToShow: number;\r\n\r\n  /**\r\n   * Creates a new form to be shown to a player\r\n   * @param title the title that this form should have\r\n   * @param body extra text that should be displayed in the form\r\n   */\r\n  constructor(title?: string, body?: string) {\r\n    this.title = title;\r\n    this.body = body;\r\n    this.form = new ActionFormData();\r\n\r\n    if (title) this.form.title(title);\r\n    if (body) this.form.body(body);\r\n\r\n    this.buttons = [];\r\n\r\n    this.triedToShow = 0;\r\n  }\r\n\r\n  /**\r\n   * Adds a button to this form\r\n   * @param text text to show on this button\r\n   * @param iconPath the path this button shows\r\n   * @param callback what happens when this button is clicked\r\n   * @example ```\r\n   * addButton(\"settings\", \"textures/items/sum\")\r\n   * ```\r\n   */\r\n  addButton(\r\n    text: string,\r\n    iconPath: string = null,\r\n    callback: ButtonCallback\r\n  ): ActionForm {\r\n    this.buttons.push({\r\n      text: text,\r\n      iconPath: iconPath,\r\n      callback: callback,\r\n    });\r\n    this.form.button(text, iconPath);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows this form to the player\r\n   * @param player player to show to\r\n   */\r\n  show(player: Player): void {\r\n    this.form.show(player).then((response) => {\r\n      if (response.canceled) {\r\n        if (response.cancelationReason == \"userBusy\") {\r\n          // check time and reshow form\r\n          if (this.triedToShow > TIMEOUT_THRESHOLD)\r\n            return player.tell(\r\n              `\u00A7cForm Timeout: tried to show form, but you were busy (close chat after running command)`\r\n            );\r\n          this.triedToShow++;\r\n          this.show(player);\r\n        }\r\n        return;\r\n      }\r\n      this.buttons[response.selection].callback?.();\r\n    });\r\n  }\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { ModalFormData } from \"@minecraft/server-ui\";\r\nimport { TIMEOUT_THRESHOLD } from \"../../../config/form\";\r\nimport type { AppendFormField, IModalFormArg, Range } from \"../types\";\r\nimport { FormCallback } from \"./FormCallback\";\r\n\r\nexport class ModalForm<\r\n  Callback extends Function = (ctx: FormCallback) => void\r\n> {\r\n  /**\r\n   *  the title that this form should have\r\n   */\r\n  title?: string;\r\n\r\n  /**\r\n   * The default minecraft form this form is based on\r\n   */\r\n  private form: ModalFormData;\r\n\r\n  /**\r\n   * The arguments this form has\r\n   */\r\n  private args: IModalFormArg[];\r\n\r\n  /**\r\n   * Creates a new form to be shown to a player\r\n   * @param title the title that this form should have\r\n   */\r\n  constructor(title?: string) {\r\n    this.title = title;\r\n    this.form = new ModalFormData();\r\n\r\n    if (title) this.form.title(title);\r\n\r\n    this.args = [];\r\n  }\r\n\r\n  /**\r\n   * Adds a dropdown to this form\r\n   * @param label label to show on dropdown\r\n   * @param options the available options for this dropdown\r\n   * @param defaultValueIndex the default value index\r\n   * @returns this\r\n   */\r\n  addDropdown<T extends ReadonlyArray<string>>(\r\n    label: string,\r\n    options: T,\r\n    defaultValueIndex?: number\r\n  ): ModalForm<AppendFormField<Callback, T[number]>> {\r\n    // @ts-ignore\r\n    this.args.push({ type: \"dropdown\", options: options });\r\n    // @ts-ignore\r\n    this.form.dropdown(label, options, defaultValueIndex);\r\n    // @ts-ignore\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a slider to this form\r\n   * @param label label to be shown on this slider\r\n   * @param minimumValue the smallest value this can be\r\n   * @param maximumValue the maximum value this can be\r\n   * @param valueStep how this slider increments\r\n   * @param defaultValue the default value in slider\r\n   * @returns this\r\n   */\r\n  addSlider<T extends number, U extends number>(\r\n    label: string,\r\n    minimumValue: T,\r\n    maximumValue: U,\r\n    valueStep: number,\r\n    defaultValue?: number\r\n  ): ModalForm<AppendFormField<Callback, Range<T, U>>> {\r\n    this.args.push({ type: \"slider\" });\r\n    this.form.slider(\r\n      label,\r\n      minimumValue,\r\n      maximumValue,\r\n      valueStep,\r\n      defaultValue\r\n    );\r\n    // @ts-ignore\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a toggle to this form\r\n   * @param label the name of this toggle\r\n   * @param defaultValue the default toggle value could be true or false\r\n   * @returns\r\n   */\r\n  addToggle(\r\n    label: string,\r\n    defaultValue?: boolean\r\n  ): ModalForm<AppendFormField<Callback, boolean>> {\r\n    this.args.push({ type: \"toggle\" });\r\n    this.form.toggle(label, defaultValue);\r\n    // @ts-ignore\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a text field to this form\r\n   * @param label label for this textField\r\n   * @param placeholderText the text that shows on this field\r\n   * @param defaultValue the default value that this field has\r\n   */\r\n  addTextField(\r\n    label: string,\r\n    placeholderText: string,\r\n    defaultValue?: string\r\n  ): ModalForm<AppendFormField<Callback, string>> {\r\n    this.args.push({ type: \"textField\" });\r\n    this.form.textField(label, placeholderText, defaultValue);\r\n    // @ts-ignore\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows this form to a player\r\n   * @param player player to show to\r\n   * @param callback sends a callback when this form is submitted\r\n   */\r\n  async show(player: Player, callback: Callback) {\r\n    for (let i = 0; i < TIMEOUT_THRESHOLD; i++) {\r\n      let response = await this.form.show(player);\r\n      if (response.cancelationReason == \"userBusy\") continue;\r\n      callback(\r\n        new FormCallback(this, player, callback),\r\n        ...response.formValues.map((v, i) =>\r\n          this.args[i].type == \"dropdown\" ? this.args[i].options[v] : v\r\n        )\r\n      );\r\n      return;\r\n    }\r\n    return player.tell(\r\n      `\u00A7cForm Timeout: tried to show form, but you were busy (close chat after running command)`\r\n    );\r\n  }\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { ActionForm } from \"./ActionForm\";\r\nimport { MessageForm } from \"./MessageForm\";\r\nimport { ModalForm } from \"./ModelForm\";\r\n\r\nexport class FormCallback {\r\n  /**\r\n   * form that was used in this call\r\n   */\r\n  private form: ActionForm | MessageForm | ModalForm<any>;\r\n  /**\r\n   * player that this form used\r\n   */\r\n  private player: Player;\r\n\r\n  /**\r\n   * the function that was called\r\n   */\r\n  private callback: () => void;\r\n\r\n  /**\r\n   * Creates a new form callback instance that can be used by\r\n   * buttons, and args to run various functions\r\n   * @param form form that is used in this call\r\n   */\r\n  constructor(\r\n    form: ActionForm | MessageForm | ModalForm<any>,\r\n    player: Player,\r\n    callback: any\r\n  ) {\r\n    this.form = form;\r\n    this.player = player;\r\n    this.callback = callback;\r\n  }\r\n\r\n  /**\r\n   * Reshow the form and shows the user a error message\r\n   * @param message error message to show\r\n   */\r\n  error(message: string) {\r\n    new MessageForm(\"Error\", message)\r\n      .setButton1(\"Return to form\", () => {\r\n        this.form.show(this.player, this.callback);\r\n      })\r\n      .setButton2(\"Cancel\", null)\r\n      .show(this.player);\r\n  }\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { APPEAL_LINK } from \"../../../../config/app\";\r\nimport { ENCHANTMENTS } from \"../../config/enchantments\";\r\nimport { ActionForm } from \"../../../../lib/Form/Models/ActionForm\";\r\nimport { ModalForm } from \"../../../../lib/Form/Models/ModelForm\";\r\nimport { getConfigId, setConfigId } from \"../../utils\";\r\n\r\nexport function manageBannedItemsForm(player: Player) {\r\n  new ActionForm(\"Manage Banned Items\")\r\n    .addButton(\"Remove a Banned Item\", null, () => {\r\n      removeBannedItemForm(player);\r\n    })\r\n    .addButton(\"Ban an item\", null, () => {\r\n      addBannedItemForm(player);\r\n    })\r\n    .show(player);\r\n}\r\nexport function removeBannedItemForm(player: Player) {\r\n  new ModalForm(\"Remove Banned Items\")\r\n    .addDropdown(\"Select item to remove\", getConfigId(\"banned_items\"))\r\n    .show(player, (ctx, item) => {\r\n      let items = getConfigId(\"banned_items\");\r\n      items = items.filter((p) => p != item);\r\n      setConfigId(\"banned_items\", items);\r\n      player.tell(`Removed Banned item \"${item}\"`);\r\n    });\r\n}\r\n\r\nexport function addBannedItemForm(player: Player) {\r\n  new ModalForm(\"Add Banned Item\")\r\n    .addTextField(\"Item Id\", \"minecraft:string\")\r\n    .show(player, (ctx, item) => {\r\n      let items = getConfigId(\"banned_items\");\r\n      if (items.includes(item))\r\n        return ctx.error(`\u00A7cItem \"${item}\" is already banned`);\r\n      items.push(item);\r\n      setConfigId(\"banned_items\", items);\r\n      player.tell(`Banned the item \"${item}\"`);\r\n    });\r\n}\r\n\r\nexport function manageBannedBlocksForm(player: Player) {\r\n  new ActionForm(\"Manage Banned Blocks\")\r\n    .addButton(\"Remove a Banned Block\", null, () => {\r\n      removeBannedBlockForm(player);\r\n    })\r\n    .addButton(\"Ban an block\", null, () => {\r\n      addBannedBlockForm(player);\r\n    })\r\n    .show(player);\r\n}\r\n\r\nexport function removeBannedBlockForm(player: Player) {\r\n  new ModalForm(\"Remove Banned Block\")\r\n    .addDropdown(\"Select block to remove\", getConfigId(\"banned_blocks\"))\r\n    .show(player, (ctx, block) => {\r\n      let blocks = getConfigId(\"banned_blocks\");\r\n      blocks = blocks.filter((p) => p != block);\r\n      setConfigId(\"banned_blocks\", blocks);\r\n      player.tell(`Removed Banned block \"${block}\"`);\r\n    });\r\n}\r\n\r\nexport function addBannedBlockForm(player: Player) {\r\n  new ModalForm(\"Add Banned Block\")\r\n    .addTextField(\"Block Id\", \"minecraft:barrier\")\r\n    .show(player, (ctx, block) => {\r\n      let blocks = getConfigId(\"banned_blocks\");\r\n      if (blocks.includes(block))\r\n        return ctx.error(`\u00A7cBlock \"${block}\" is already banned`);\r\n      blocks.push(block);\r\n      setConfigId(\"banned_blocks\", blocks);\r\n      player.tell(`Banned the block \"${block}\"`);\r\n    });\r\n}\r\n\r\nexport function manageEnchantmentLevelsForm(player: Player) {\r\n  new ModalForm(\"Manage Enchantment Levels\")\r\n    .addDropdown(\"Enchantment to change\", Object.keys(ENCHANTMENTS), 0)\r\n    .addTextField(\"Level (number)\", \"5\")\r\n    .show(player, (ctx, enchantment, levelString) => {\r\n      if (isNaN(levelString as any))\r\n        return ctx.error(\r\n          `\u00A7c\"${levelString}\" is not a number, please enter a value like, \"3\", \"9\", etc.`\r\n        );\r\n      const level = parseInt(levelString);\r\n      let enchants = getConfigId(\"enchantments\");\r\n      enchants[enchantment as keyof typeof ENCHANTMENTS] = level;\r\n      setConfigId(\"enchantments\", enchants);\r\n      player.tell(`Set max level for ${enchantment} to ${level}`);\r\n    });\r\n}\r\n\r\nexport function manageAppealLinkForm(player: Player) {\r\n  new ModalForm(\"Manage Appeal Link\")\r\n    .addTextField(\"Appeal Link\", APPEAL_LINK)\r\n    .show(player, (ctx, link) => {\r\n      setConfigId(\"appealLink\", link);\r\n      player.tell(`Changed the servers appeal link to ${link}`);\r\n    });\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { ActionForm } from \"../../../../lib/Form/Models/ActionForm\";\r\nimport { ModalForm } from \"../../../../lib/Form/Models/ModelForm\";\r\nimport { IProtectionsConfig } from \"../../../../types\";\r\nimport { PROTECTIONS } from \"../../protections\";\r\nimport { Protection } from \"../models/Protection\";\r\nimport { showHomeForm } from \"./home\";\r\n\r\nexport function showAutoModHomeForm(player: Player) {\r\n  const form = new ActionForm(\"Manage Protections\");\r\n\r\n  for (const protection of Object.values(PROTECTIONS)) {\r\n    form.addButton(protection.name, protection.iconPath, () => {\r\n      showProtectionConfig(protection, player);\r\n    });\r\n  }\r\n  form\r\n    .addButton(\"Back\", \"textures/ui/arrow_dark_left_stretch.png\", () => {\r\n      showHomeForm(player);\r\n    })\r\n    .show(player);\r\n}\r\n\r\nexport function showProtectionConfig(protection: Protection, player: Player) {\r\n  const data = protection.getConfig();\r\n  const form = new ModalForm(\r\n    `Manage ${protection.name} Protection Config`\r\n  ).addToggle(\"Enabled\", data[\"enabled\"]);\r\n  let keys: string[] = [];\r\n  for (const [key, value] of Object.entries(protection.configDefault)) {\r\n    keys.push(key);\r\n    if (typeof value.defaultValue == \"boolean\") {\r\n      form.addToggle(value.description, data[key] as boolean);\r\n    } else if (typeof value.defaultValue == \"number\") {\r\n      form.addSlider(value.description, 0, 100, 1, data[key] as number);\r\n    } else {\r\n      form.addTextField(value.description, null, data[key] as string);\r\n    }\r\n  }\r\n  form.show(player, (ctx, enabled, ...keys) => {\r\n    if (enabled != data[\"enabled\"]) {\r\n      if (enabled) protection.enable();\r\n      if (!enabled) protection.disable();\r\n    }\r\n    let config: IProtectionsConfig = {\r\n      enabled: enabled,\r\n    };\r\n    for (const [i, key] of Object.keys(protection.configDefault).entries()) {\r\n      config[key] = keys[i];\r\n    }\r\n    protection.setConfig(config);\r\n    player.tell(`Updated config for ${protection.name}!`);\r\n  });\r\n}\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { ActionForm } from \"../../../../lib/Form/Models/ActionForm\";\r\nimport * as settings from \"./settings\";\r\nimport * as automod from \"./automod\";\r\n\r\nexport function showHomeForm(player: Player) {\r\n  new ActionForm(\"Rubedo Settings\")\r\n    .addButton(\"Auto Mod\", \"textures/ui/permissions_op_crown.png\", () => {\r\n      automod.showAutoModHomeForm(player);\r\n    })\r\n    .addButton(\"Banned items\", \"textures/blocks/sculk_shrieker_top.png\", () => {\r\n      settings.manageBannedItemsForm(player);\r\n    })\r\n    .addButton(\"Banned blocks\", \"textures/blocks/barrier.png\", () => {\r\n      settings.manageBannedBlocksForm(player);\r\n    })\r\n    .addButton(\"Enchantments\", \"textures/items/book_enchanted.png\", () => {\r\n      settings.manageEnchantmentLevelsForm(player);\r\n    })\r\n    .addButton(\"Appeal Link\", \"textures/ui/Feedback.png\", () => {\r\n      settings.manageAppealLinkForm(player);\r\n    })\r\n    .show(player);\r\n}\r\n", "import { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { showHomeForm } from \"../forms/home.js\";\r\n\r\nnew Command({\r\n  name: \"settings\",\r\n  description: \"Opens up the settings menu for the player\",\r\n  requires: (player) => [\"admin\", \"moderator\"].includes(getRole(player)),\r\n}).executes((ctx) => {\r\n  showHomeForm(ctx.sender);\r\n  ctx.sender.tell(`\u00A7aForm request sent, close chat to continue!`);\r\n});\r\n", "import { Player, world } from \"@minecraft/server\";\r\nimport { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { getRole } from \"../../utils.js\";\r\n\r\nfunction vanish(player: Player, say: boolean) {\r\n  if (player.hasTag(`spectator`)) {\r\n    player.runCommandAsync(`gamemode s`);\r\n    player.triggerEvent(`removeSpectator`);\r\n    player.removeTag(`spectator`);\r\n    if (!say) return;\r\n    world.say({\r\n      rawtext: [\r\n        {\r\n          translate: \"multiplayer.player.joined\",\r\n          with: [`\u00A7e${player.name}`],\r\n        },\r\n      ],\r\n    });\r\n  } else {\r\n    player.runCommandAsync(`gamemode spectator`);\r\n    player.triggerEvent(`addSpectator`);\r\n    player.addTag(`spectator`);\r\n    if (!say) return;\r\n    world.say({\r\n      rawtext: [\r\n        {\r\n          translate: \"multiplayer.player.left\",\r\n          with: [`\u00A7e${player.name}`],\r\n        },\r\n      ],\r\n    });\r\n  }\r\n}\r\n\r\nnew Command({\r\n  name: \"vanish\",\r\n  description: \"Toggles Vanish Mode on the sender\",\r\n  requires: (player) => getRole(player) == \"admin\",\r\n})\r\n  .executes((ctx) => {\r\n    vanish(ctx.sender, false);\r\n  })\r\n  .boolean(\"say\")\r\n  .executes((ctx, say) => {\r\n    vanish(ctx.sender, say);\r\n  });\r\n", "import { Command } from \"../../../../lib/Command/Command.js\";\r\nimport { VERSION } from \"../../../../config/app\";\r\n\r\nnew Command({\r\n  name: \"version\",\r\n  description: \"Get Current Version\",\r\n  aliases: [\"v\"],\r\n}).executes((ctx) => {\r\n  ctx.reply(`Current BotWea AC Version: ${VERSION}`);\r\n});\r\n", "import { ArgumentTypes, Command } from \"../../../../lib/Command/Command\";\r\nimport { getRole, kick } from \"../../utils\";\r\n\r\nnew Command({\r\n  name: \"kick\",\r\n  description: \"Kicks a player from the game\",\r\n  requires: (player) => [\"admin\", \"moderator\"].includes(getRole(player)),\r\n})\r\n  .argument(new ArgumentTypes.player())\r\n  .string(\"reason\")\r\n  .executes((ctx, player, reason) => {\r\n    kick(player, [reason]);\r\n    ctx.reply(`\u00A7aKicked ${player.name} from world`);\r\n  });\r\n", "import { TABLES } from \"../../../../database/tables\";\r\nimport type { LogData } from \"../../../../types\";\r\n\r\nexport class Log {\r\n  /**\r\n   * The data on this Log\r\n   */\r\n  data: LogData;\r\n  constructor(data: LogData) {\r\n    this.data = data;\r\n    console.warn(`[LOG]: ${data.message}`);\r\n    TABLES.logs.set(Date.now().toString(), data);\r\n  }\r\n}\r\n", "import { PREFIX } from \"../../../../config/commands\";\r\nimport { ArgumentTypes, Command } from \"../../../../lib/Command/Command\";\r\nimport { TABLES } from \"../../../../database/tables\";\r\nimport { getRole } from \"../../utils\";\r\nimport { Log } from \"../models/Log\";\r\n\r\nfunction timeDifference(previous: number) {\r\n  var msPerMinute = 60 * 1000;\r\n  var msPerHour = msPerMinute * 60;\r\n  var msPerDay = msPerHour * 24;\r\n  var msPerMonth = msPerDay * 30;\r\n  var msPerYear = msPerDay * 365;\r\n\r\n  var elapsed = Date.now() - previous;\r\n\r\n  if (elapsed < msPerMinute) {\r\n    return Math.round(elapsed / 1000) + \" seconds ago\";\r\n  } else if (elapsed < msPerHour) {\r\n    return Math.round(elapsed / msPerMinute) + \" minutes ago\";\r\n  } else if (elapsed < msPerDay) {\r\n    return Math.round(elapsed / msPerHour) + \" hours ago\";\r\n  } else if (elapsed < msPerMonth) {\r\n    return \"approximately \" + Math.round(elapsed / msPerDay) + \" days ago\";\r\n  } else if (elapsed < msPerYear) {\r\n    return \"approximately \" + Math.round(elapsed / msPerMonth) + \" months ago\";\r\n  } else {\r\n    return \"approximately \" + Math.round(elapsed / msPerYear) + \" years ago\";\r\n  }\r\n}\r\n\r\nconst root = new Command({\r\n  name: \"log\",\r\n  description: \"Manages the log command\",\r\n  requires: (player) => getRole(player) == \"admin\",\r\n});\r\n\r\nroot\r\n  .literal({\r\n    name: \"add\",\r\n    description: \"Adds a new log\",\r\n  })\r\n  .string(\"message\")\r\n  .executes((ctx, message) => {\r\n    new Log({ message: message });\r\n    ctx.reply(`\u00A7aAdded new log: ${message}`);\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"getAll\",\r\n    description: \"Gets all logs sorted in descending\",\r\n  })\r\n  .int(\"page\")\r\n  .array(\"order\", [\"ascending\", \"descending\"] as const)\r\n  .executes((ctx, page, order) => {\r\n    const allLogs = Object.entries(TABLES.logs.collection()).sort((a, b) =>\r\n      order == \"ascending\"\r\n        ? parseInt(b[0]) - parseInt(a[0])\r\n        : parseInt(a[0]) - parseInt(b[0])\r\n    );\r\n    if (allLogs.length == 0) return ctx.reply(`\u00A7cNo Logs have been made!`);\r\n    const maxPages = Math.ceil(allLogs.length / 8);\r\n    if (page > maxPages) page = maxPages;\r\n    ctx.reply(\r\n      `\u00A72--- Showing logs page ${page} of ${maxPages} (${PREFIX}log getAll <page: int>) ---`\r\n    );\r\n\r\n    for (const [key, value] of allLogs.slice(page * 8 - 8, page * 8)) {\r\n      ctx.reply(`${timeDifference(parseInt(key))}: ${value.message}`);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"getPlayersLogs\",\r\n    description: \"Gets all logs associated with a player\",\r\n  })\r\n  .argument(new ArgumentTypes.playerName())\r\n  .int(\"page\")\r\n  .array(\"order\", [\"ascending\", \"descending\"] as const)\r\n  .executes((ctx, playerName, page, order) => {\r\n    const allLogs = Object.entries(TABLES.logs.collection())\r\n      .filter((v) => v[1].playerName == playerName)\r\n      .sort((a, b) =>\r\n        order == \"ascending\"\r\n          ? parseInt(b[0]) - parseInt(a[0])\r\n          : parseInt(a[0]) - parseInt(b[0])\r\n      );\r\n    if (allLogs.length == 0)\r\n      return ctx.reply(`\u00A7cNo Logs exists for \"${playerName}\"!`);\r\n    const maxPages = Math.ceil(allLogs.length / 8);\r\n    if (page > maxPages) page = maxPages;\r\n    ctx.reply(\r\n      `\u00A72--- Showing logs for \"${playerName}\" page ${page} of ${maxPages} ---`\r\n    );\r\n\r\n    for (const [key, value] of allLogs.slice(page * 8 - 8, page * 8)) {\r\n      ctx.reply(`${timeDifference(parseInt(key))}: ${value.message}`);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"getProtectionLogs\",\r\n    description: \"Gets all logs associated with a protection\",\r\n  })\r\n  .string(\"protection\")\r\n  .int(\"page\")\r\n  .array(\"order\", [\"ascending\", \"descending\"] as const)\r\n  .executes((ctx, protection, page, order) => {\r\n    const allLogs = Object.entries(TABLES.logs.collection())\r\n      .filter((v) => v[1].protection == protection)\r\n      .sort((a, b) =>\r\n        order == \"ascending\"\r\n          ? parseInt(b[0]) - parseInt(a[0])\r\n          : parseInt(a[0]) - parseInt(b[0])\r\n      );\r\n    if (allLogs.length == 0)\r\n      return ctx.reply(`\u00A7cNo Logs exists for protection: \"${protection}\"!`);\r\n    const maxPages = Math.ceil(allLogs.length / 8);\r\n    if (page > maxPages) page = maxPages;\r\n    ctx.reply(\r\n      `\u00A72--- Showing logs for Protection: \"${protection}\" page ${page} of ${maxPages} ---`\r\n    );\r\n\r\n    for (const [key, value] of allLogs.slice(page * 8 - 8, page * 8)) {\r\n      ctx.reply(`${timeDifference(parseInt(key))}: ${value.message}`);\r\n    }\r\n  });\r\n\r\nroot\r\n  .literal({\r\n    name: \"clearAll\",\r\n    description: \"Clears all logs\",\r\n  })\r\n  .executes((ctx) => {\r\n    TABLES.logs.clear();\r\n    ctx.reply(`\u00A7aCleared All logs!`);\r\n  });\r\n", "import { ArgumentTypes, Command } from \"../../../../lib/Command/Command\";\r\nimport { getRole } from \"../../utils\";\r\n\r\nconst root = new Command({\r\n  name: \"teleport\",\r\n  description: \"Teleports entities (players, mobs, etc.).\",\r\n  aliases: [\"tp\"],\r\n  requires: (player) => getRole(player) == \"admin\",\r\n});\r\n\r\nroot\r\n  .argument(new ArgumentTypes.player())\r\n  .location(\"destination\")\r\n  .executes((ctx, player, destination) => {\r\n    player.addTag(\"skip-movement-check\");\r\n    player.teleport(destination, player.dimension, 0, 0);\r\n    ctx.reply(\r\n      `Teleported ${player.name} to ${destination.x} ${destination.y} ${destination.z}`\r\n    );\r\n  });\r\n", "import { TABLES } from \"../../../../database/tables.js\";\r\nimport { msToTime } from \"../../../../utils.js\";\r\nimport { kick, forEachValidPlayer, getConfigId } from \"../../utils.js\";\r\n\r\nforEachValidPlayer((player) => {\r\n  try {\r\n    const banData = TABLES.bans.get(player.id);\r\n    if (!banData) return;\r\n    if (banData.expire && banData.expire < Date.now())\r\n      return TABLES.bans.delete(player.id);\r\n    kick(\r\n      player,\r\n      [\r\n        `\u00A7cYou have been banned!`,\r\n        `\u00A7aReason: \u00A7f${banData.reason}`,\r\n        `\u00A7fExpiry: \u00A7b${\r\n          banData.expire ? msToTime(banData.expire - Date.now()) : \"Forever\"\r\n        }`,\r\n        `\u00A7fAppeal at: \u00A7b${getConfigId(\"appealLink\")}`,\r\n      ],\r\n      () => {\r\n        console.warn(new Error(\"Failed to kick player\"));\r\n        TABLES.bans.delete(player.id);\r\n      }\r\n    );\r\n  } catch (error) {\r\n    console.warn(error + error.stack);\r\n  }\r\n}, 20);\r\n", "import { Location } from \"@minecraft/server\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport { DIMENSIONS } from \"../../../../utils.js\";\r\nimport { forEachValidPlayer } from \"../../utils.js\";\r\n\r\nforEachValidPlayer((player) => {\r\n  try {\r\n    const freezeData = TABLES.freezes.get(player.id);\r\n\r\n    if (!freezeData)\r\n      return player.getComponent(\"movement\").resetToDefaultValue();\r\n    player.getComponent(\"movement\").setCurrent(0);\r\n\r\n    player.teleport(\r\n      new Location(\r\n        freezeData.location.x,\r\n        freezeData.location.y,\r\n        freezeData.location.z\r\n      ),\r\n      DIMENSIONS[freezeData.location.dimension as keyof typeof DIMENSIONS],\r\n      0,\r\n      0\r\n    );\r\n  } catch (error) {}\r\n}, 200);\r\n", "import { world, BeforeChatEvent } from \"@minecraft/server\";\r\nimport { PREFIX } from \"../../config/commands\";\r\n\r\ntype beforeChatCallback = (arg: BeforeChatEvent) => void;\r\n\r\nconst CALLBACKS: {\r\n  [key: number]: {\r\n    callback: beforeChatCallback;\r\n  };\r\n} = {};\r\n\r\nworld.events.beforeChat.subscribe((data) => {\r\n  if (data.message.startsWith(PREFIX)) return; // This is a command\r\n  for (const callback of Object.values(CALLBACKS)) {\r\n    callback.callback(data);\r\n  }\r\n});\r\n\r\nexport class beforeChat {\r\n  /**\r\n   * Subscribes to a callback to get notified when a chat is sent that is not a command\r\n   * @param callback what to be called when one of these entity's inventory changes\r\n   * @returns the id that is used to unsubscribe\r\n   */\r\n  static subscribe(callback: beforeChatCallback): number {\r\n    const key = Date.now();\r\n    CALLBACKS[key] = { callback: callback };\r\n    return key;\r\n  }\r\n  static unsubscribe(key: number): void {\r\n    delete CALLBACKS[key];\r\n  }\r\n}\r\n", "import { Mute } from \"../models/Mute.js\";\r\nimport { text } from \"../../../../lang/text.js\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport { beforeChat } from \"../../../../lib/Events/beforeChat.js\";\r\n\r\nbeforeChat.subscribe((data) => {\r\n  const muteData = Mute.getMuteData(data.sender);\r\n  if (!muteData) return;\r\n  if (muteData.expire && muteData.expire < Date.now())\r\n    return TABLES.mutes.delete(data.sender.name);\r\n  data.cancel = true;\r\n  data.sender.tell(text[\"modules.managers.mute.isMuted\"]());\r\n});\r\n", "import { BlockLocation, Player, system, world } from \"@minecraft/server\";\r\nimport { Region } from \"../models/Region.js\";\r\nimport { forEachValidPlayer, getRole, loadRegionDenys } from \"../../utils.js\";\r\nimport { BLOCK_CONTAINERS, DOORS_SWITCHES } from \"../../config/region.js\";\r\nimport { DIMENSIONS } from \"../../../../utils.js\";\r\nimport { EntitiesLoad } from \"../../../../lib/Events/EntitiesLoad.js\";\r\n\r\n/**\r\n * Sets Deny blocks at bottom of region every 5 mins\r\n */\r\nsystem.runSchedule(() => {\r\n  loadRegionDenys();\r\n}, 6000);\r\n\r\n/**\r\n * Permissions for region\r\n */\r\nworld.events.beforeItemUseOn.subscribe((data) => {\r\n  if ([\"moderator\", \"admin\"].includes(getRole(data.source as Player))) return;\r\n  const region = Region.blockLocationInRegion(\r\n    data.blockLocation,\r\n    data.source.dimension.id\r\n  );\r\n  if (!region) return;\r\n  const block = data.source.dimension.getBlock(data.blockLocation);\r\n  if (\r\n    DOORS_SWITCHES.includes(block.typeId) &&\r\n    region.permissions.doorsAndSwitches\r\n  )\r\n    return;\r\n  if (\r\n    BLOCK_CONTAINERS.includes(block.typeId) &&\r\n    region.permissions.openContainers\r\n  )\r\n    return;\r\n  data.cancel = true;\r\n});\r\n\r\nworld.events.beforeExplosion.subscribe((data) => {\r\n  for (let i = 0; i < data.impactedBlocks.length; i++) {\r\n    const bL = data.impactedBlocks[i];\r\n    let region = Region.blockLocationInRegion(bL, data.dimension.id);\r\n    if (region) return (data.cancel = true);\r\n  }\r\n});\r\n\r\nworld.events.entityCreate.subscribe(async ({ entity }) => {\r\n  const region = await Region.blockLocationInRegionSync(\r\n    new BlockLocation(entity.location.x, entity.location.y, entity.location.z),\r\n    entity.dimension.id\r\n  );\r\n  if (!region) return;\r\n  if (region.permissions.allowedEntities.includes(entity.typeId)) return;\r\n  entity.teleport({ x: 0, y: -64, z: 0 }, entity.dimension, 0, 0);\r\n  entity.kill();\r\n});\r\n\r\nEntitiesLoad.subscribe(() => {\r\n  system.runSchedule(async () => {\r\n    for (const region of await Region.getAllRegionsSync()) {\r\n      for (const entity of DIMENSIONS[\r\n        region.dimensionId as keyof typeof DIMENSIONS\r\n      ].getEntities({ excludeTypes: region.permissions.allowedEntities })) {\r\n        if (!region.entityInRegion(entity)) continue;\r\n        entity.teleport({ x: 0, y: -64, z: 0 }, entity.dimension, 0, 0);\r\n        entity.kill();\r\n      }\r\n    }\r\n  }, 100);\r\n});\r\n\r\n/**\r\n * Gives player a tag if they are in a region\r\n */\r\nforEachValidPlayer((player) => {\r\n  for (const region of Region.getAllRegions()) {\r\n    if (region.entityInRegion(player)) {\r\n      player.addTag(`inRegion`);\r\n      if (!region.permissions.pvp) player.addTag(`region-protected`);\r\n    } else {\r\n      player.removeTag(`inRegion`);\r\n      player.removeTag(`region-protected`);\r\n    }\r\n  }\r\n}, 5);\r\n", "import { world } from \"@minecraft/server\";\r\nimport { text } from \"../../../../lang/text\";\r\nimport { TABLES } from \"../../../../database/tables\";\r\nimport { getRole, isLockedDown, kick, setRole } from \"../../utils\";\r\nimport { Mute } from \"../models/Mute\";\r\nimport { ChangePlayerRoleTask } from \"../models/Task\";\r\nimport { EntitiesLoad } from \"../../../../lib/Events/EntitiesLoad\";\r\n\r\nworld.events.playerJoin.subscribe(async ({ player }) => {\r\n  await EntitiesLoad.awaitLoad();\r\n  if (isLockedDown() && getRole(player) != \"admin\")\r\n    return kick(player, text[\"lockdown.kick.message\"]());\r\n  // --\r\n  if (Mute.getMuteData(player)) player.runCommandAsync(`ability @s mute true`);\r\n  if (!TABLES.ids.has(player.name)) {\r\n    // Player is new!\r\n    TABLES.ids.set(player.name, player.id);\r\n  } else {\r\n    player.addTag(\"old\");\r\n  }\r\n  /**\r\n   * This is a role that was tried to push when the player was offline\r\n   * so were setting it now because the player just joined\r\n   */\r\n  const roleToSet = ChangePlayerRoleTask.getPlayersRoleToSet(player.name);\r\n  if (roleToSet) setRole(player, roleToSet);\r\n});\r\n", "import {\r\n  Entity,\r\n  InventoryComponentContainer,\r\n  Items,\r\n  MinecraftItemTypes,\r\n  world,\r\n} from \"@minecraft/server\";\r\nimport { AIR } from \"../../../../index.js\";\r\nimport { PageItem } from \"../../../../lib/Chest GUI/Models/PageItem\";\r\nimport { Page } from \"../../../../lib/Chest GUI/Models/Page\";\r\nimport { CHESTGUIS } from \"../../../../lib/Chest GUI/utils.js\";\r\nimport { ItemType } from \"@minecraft/server\";\r\n\r\n/**\r\n * The possible fillable slots where items can be put\r\n * this is for inventory fill\r\n */\r\nconst FILLABLE_SLOTS = [\r\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\r\n  22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\r\n  41, 42, 43, 44,\r\n];\r\n\r\n/**\r\n * The possible fillable slots where items can be put\r\n * this is for inventory fill\r\n */\r\nconst FILLABLE_SLOTS_ENDERCHEST = [\r\n  10, 11, 12, 13, 14, 15, 16, 19, 20, 21, 22, 23, 24, 25, 28, 29, 30, 31, 32,\r\n  33, 34, 37, 38, 39, 40, 41, 42, 43,\r\n];\r\n\r\n/**\r\n * Fills the chest Screen with the desired kit\r\n */\r\nexport function ViewPlayersFill(entity: Entity, page: Page, extras: any) {\r\n  const container: InventoryComponentContainer = entity.getComponent(\r\n    \"minecraft:inventory\"\r\n  ).container;\r\n\r\n  for (let i = 0; i < container.size; i++) {\r\n    const slot = page.slots[i];\r\n    if (!slot || !slot.item) {\r\n      container.setItem(i, AIR);\r\n      continue;\r\n    }\r\n    container.setItem(i, slot.item.itemStack);\r\n  }\r\n  for (const [i, player] of [...world.getPlayers()].entries()) {\r\n    const slot = FILLABLE_SLOTS[i];\r\n    const item = new PageItem(MinecraftItemTypes.skull, {\r\n      nameTag: player.name,\r\n      data: 3,\r\n    });\r\n    container.setItem(slot, item.itemStack);\r\n    page.slots[slot] = {\r\n      item: item,\r\n      action: (ctx) => {\r\n        ctx.PageAction(\"moderation:see_inventory\", { name: player.name });\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Fills the chest Screen with the desired kit\r\n */\r\nexport function ViewPlayerInventoryFill(\r\n  entity: Entity,\r\n  page: Page,\r\n  extras: any\r\n) {\r\n  const container = entity.getComponent(\"minecraft:inventory\").container;\r\n\r\n  for (let i = 0; i < container.size; i++) {\r\n    const slot = page.slots[i];\r\n    if (!slot || !slot.item) {\r\n      container.setItem(i, AIR);\r\n      continue;\r\n    }\r\n    container.setItem(i, slot.item.itemStack);\r\n  }\r\n  const EnderChestItem = new PageItem(MinecraftItemTypes.enderChest, {\r\n    nameTag: `\u00A7eView \u00A7f${extras?.name}\u00A7e Ender Chest\\n\u00A7fNote: \u00A7cThis will not grab \u00A7lANY NBT!\u00A7r`,\r\n  });\r\n  container.setItem(49, EnderChestItem.itemStack);\r\n  page.slots[49] = {\r\n    item: EnderChestItem,\r\n    action: (ctx) => {\r\n      ctx.PageAction(\"moderation:see_ender_chest\", { name: extras.name });\r\n    },\r\n  };\r\n  const player = [...world.getPlayers()].find((p) => p.name == extras.name);\r\n  if (!player) {\r\n    const gui = Object.values(CHESTGUIS).find((e) => e.entity.id == entity.id);\r\n    gui.despawn();\r\n    player.tell(`\"${extras.name}\" Could not be found, Gui Crashed`);\r\n  }\r\n  const inventory = player.getComponent(\"inventory\").container;\r\n  /**\r\n   * the value of how many slots have been taken\r\n   */\r\n  let used_slots = 0;\r\n  for (let i = 0; i < inventory.size; i++) {\r\n    const item = inventory.getItem(i);\r\n    const slot = FILLABLE_SLOTS[used_slots];\r\n    used_slots++;\r\n    if (!item) {\r\n      container.setItem(slot, AIR);\r\n      continue;\r\n    }\r\n    container.setItem(slot, item);\r\n    page.slots[slot] = {\r\n      item: new PageItem(\r\n        Items.get(item.typeId),\r\n        { amount: item.amount, data: item.data },\r\n        item\r\n      ),\r\n      action: (ctx) => {\r\n        if (i < 9) {\r\n          player.runCommandAsync(`replaceitem entity @s slot.hotbar ${i} air`);\r\n        } else {\r\n          player.runCommandAsync(\r\n            `replaceitem entity @s slot.inventory ${i - 9} air`\r\n          );\r\n        }\r\n        ctx.GiveAction();\r\n        page.slots[slot] = {\r\n          item: null,\r\n          action: (ctx) => {\r\n            inventory.addItem(ctx.getItemAdded());\r\n          },\r\n        };\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Fills the chest Screen with the desired kit\r\n */\r\nexport async function ViewPlayerEnderChestFill(\r\n  entity: Entity,\r\n  page: Page,\r\n  extras: any\r\n) {\r\n  const container = entity.getComponent(\"minecraft:inventory\").container;\r\n  for (let i = 0; i < container.size; i++) {\r\n    const slot = page.slots[i];\r\n    if (!slot || !slot.item) {\r\n      container.setItem(i, AIR);\r\n      continue;\r\n    }\r\n    container.setItem(i, slot.item.itemStack);\r\n  }\r\n  const player = [...world.getPlayers()].find((p) => p.name == extras?.name);\r\n  if (!player) {\r\n    const gui = Object.values(CHESTGUIS).find((e) => e.entity.id == entity.id);\r\n    gui.despawn();\r\n    player.tell(`\"${extras.name}\" Could not be found, Gui Crashed`);\r\n  }\r\n  /**\r\n   * the value of how many slots have been taken\r\n   */\r\n  let used_slots = 0;\r\n  const ItemTypes: ItemType[] = Object.values(MinecraftItemTypes);\r\n  for (const item of ItemTypes) {\r\n    try {\r\n      await player.runCommandAsync(\r\n        `testfor @s[hasitem={item=${item.id},location=slot.enderchest}]`\r\n      );\r\n      const ChestGuiItem = new PageItem(item, {\r\n        nameTag: \"Note: \u00A7l\u00A7cThis is not the exact item\",\r\n      });\r\n      const slot = FILLABLE_SLOTS_ENDERCHEST[used_slots];\r\n      container.setItem(slot, ChestGuiItem.itemStack);\r\n      page.slots[slot] = {\r\n        item: ChestGuiItem,\r\n        action: (ctx) => {\r\n          ctx.GiveAction();\r\n          page.slots[slot] = null;\r\n        },\r\n      };\r\n      used_slots++;\r\n    } catch (error) {}\r\n  }\r\n}\r\n\r\nnew Page(\"moderation:see\", ViewPlayersFill)\r\n  .setSlots(\r\n    [50],\r\n    new PageItem(MinecraftItemTypes.arrow, {\r\n      nameTag: \"\u00A7fBack\",\r\n    }),\r\n    (ctx) => {\r\n      ctx.PageAction(\"home\");\r\n    }\r\n  )\r\n  .setSlots(\r\n    [48],\r\n    new PageItem(MinecraftItemTypes.barrier, { nameTag: \"\u00A7cClose GUI\" }),\r\n    (ctx) => {\r\n      ctx.CloseAction();\r\n    }\r\n  );\r\n\r\nnew Page(\"moderation:see_inventory\", ViewPlayerInventoryFill)\r\n  .setSlots(\r\n    [50],\r\n    new PageItem(MinecraftItemTypes.arrow, {\r\n      nameTag: \"\u00A7fBack\",\r\n    }),\r\n    (ctx) => {\r\n      ctx.PageAction(\"moderation:see\");\r\n    }\r\n  )\r\n  .setSlots(\r\n    [48],\r\n    new PageItem(MinecraftItemTypes.barrier, { nameTag: \"\u00A7cClose GUI\" }),\r\n    (ctx) => {\r\n      ctx.CloseAction();\r\n    }\r\n  );\r\n\r\nnew Page(\"moderation:see_ender_chest\", ViewPlayerEnderChestFill)\r\n  .setSlots(\r\n    [50],\r\n    new PageItem(MinecraftItemTypes.arrow, {\r\n      nameTag: \"\u00A7fBack\",\r\n    }),\r\n    (ctx) => {\r\n      ctx.PageAction(\"moderation:see\");\r\n    }\r\n  )\r\n  .setSlots(\r\n    [48],\r\n    new PageItem(MinecraftItemTypes.barrier, { nameTag: \"\u00A7cClose GUI\" }),\r\n    (ctx) => {\r\n      ctx.CloseAction();\r\n    }\r\n  );\r\n", "import { Player, MinecraftBlockTypes } from \"@minecraft/server\";\r\nimport { FORBIDDEN_BLOCKS } from \"../../config/moderation\";\r\nimport { Npc } from \"../models/Npc\";\r\nimport { getConfigId, getRole } from \"../../utils\";\r\nimport { Ban } from \"../models/Ban\";\r\nimport { Protection } from \"../models/Protection\";\r\n\r\n/**\r\n * Entities that are not allowed to spawn because they can be used by CBE\r\n */\r\nconst CBE_ENTITIES = [\"minecraft:command_block_minecart\"];\r\n\r\nconst protection = new Protection<{\r\n  entityCreate: boolean;\r\n  banSpawnEggs: boolean;\r\n}>(\r\n  \"cbe\",\r\n  \"Stops CBE\",\r\n  \"textures/blocks/command_block.png\",\r\n  true\r\n).setConfigDefault({\r\n  entityCreate: {\r\n    description: \"Adds NPC protection\",\r\n    defaultValue: true,\r\n  },\r\n  banSpawnEggs: {\r\n    description: \"If spawn eggs should be banned\",\r\n    defaultValue: true,\r\n  },\r\n});\r\n\r\nprotection.subscribe(\"entityCreate\", ({ entity }) => {\r\n  const config = protection.getConfig();\r\n  if (!config.entityCreate) return;\r\n  const kill = () => {\r\n    try {\r\n      entity.triggerEvent(\"despawn\");\r\n      entity.kill();\r\n    } catch (error) {\r\n      entity.kill();\r\n    }\r\n  };\r\n  if (CBE_ENTITIES.includes(entity.typeId)) return kill();\r\n  if (entity.typeId == \"minecraft:npc\" && !Npc.isValid(entity)) return kill();\r\n});\r\n\r\nprotection.subscribe(\"beforeItemUseOn\", (data) => {\r\n  if (!(data.source instanceof Player)) return;\r\n  if ([\"admin\", \"moderator\"].includes(getRole(data.source))) return;\r\n  const config = protection.getConfig();\r\n\r\n  if (data.item.typeId.endsWith(\"spawn_egg\")) {\r\n    if (!config.banSpawnEggs) return;\r\n    const block = data.source.dimension.getBlock(data.blockLocation);\r\n    if (block.typeId == MinecraftBlockTypes.mobSpawner.id) return;\r\n    // Cancel use so players cant use spawnEggs on floor\r\n    data.cancel = true;\r\n    data.source.tell(`\u00A7c[Rubedo]: You cannot place spawnEggs on the floor!`);\r\n    data.source.playSound(`note.bass`);\r\n  } else {\r\n    if (FORBIDDEN_BLOCKS.includes(data.item.typeId)) {\r\n      data.cancel = true;\r\n      return;\r\n    }\r\n    const BANNED_BLOCKS = getConfigId(\"banned_blocks\");\r\n    if (!BANNED_BLOCKS.includes(data.item.typeId)) return;\r\n    data.cancel = true;\r\n    new Ban(data.source, null, \"Placing Banned Blocks\");\r\n  }\r\n});\r\n", "import { Events, Player, system, world } from \"@minecraft/server\";\r\nimport { TABLES } from \"../../../../database/tables.js\";\r\nimport { EventsReturnType, IProtectionsConfig } from \"../../../../types.js\";\r\nimport { PROTECTIONS } from \"../../protections.js\";\r\nimport { clearForEachValidPlayer, forEachValidPlayer } from \"../../utils.js\";\r\n\r\n/**\r\n * A protection instance\r\n */\r\nexport class Protection<Config = IProtectionsConfig> {\r\n  /**\r\n   * Events that this is subscribed to\r\n   */\r\n  private events: {\r\n    -readonly [Key in keyof Events]+?: {\r\n      /**\r\n       * Callback this event is to run.\r\n       */\r\n      callback: ReturnType<Events[Key][\"subscribe\"]>;\r\n      /**\r\n       * If this has been triggered on world.events\r\n       */\r\n      triggered: boolean;\r\n    };\r\n  };\r\n\r\n  /**\r\n   * List of events that this protection is scheduled\r\n   */\r\n  private schedules: {\r\n    /**\r\n     * Callback to run\r\n     */\r\n    callback: () => void;\r\n    /**\r\n     * Delay in ticks\r\n     */\r\n    tickInterval: number;\r\n    /**\r\n     * If null, this event hasn't been registered by {@link system.runSchedule}\r\n     * if {@link number}, the event has been registered and this key can be used to {@link system.clearRunSchedule}\r\n     */\r\n    runScheduleId: number | null;\r\n  }[];\r\n\r\n  /**\r\n   * A list of forEachValidPlayers keys used to unsubscribe\r\n   */\r\n  private forEachValidPlayers: {\r\n    /**\r\n     * Callback to run\r\n     * @param player\r\n     * @returns\r\n     */\r\n    callback: (player: Player) => void;\r\n    /**\r\n     * Delay in ticks\r\n     */\r\n    delay: number;\r\n    /**\r\n     * If null, this event hasn't been registered by {@link forEachValidPlayers}\r\n     * if {@link number}, the event has been registered and this key can be used to unsubscribe\r\n     */\r\n    key: number | null;\r\n  }[];\r\n\r\n  /**\r\n   * Callback to run on enable\r\n   */\r\n  private onEnableCallback: () => void | undefined;\r\n\r\n  /**\r\n   * Callback to run on disable\r\n   */\r\n  private onDisableCallback: () => void | undefined;\r\n\r\n  /**\r\n   * If this protection is enabled\r\n   */\r\n  private isEnabled: boolean;\r\n\r\n  /**\r\n   * The default config object\r\n   */\r\n  configDefault: {\r\n    [key: string]: {\r\n      description: string;\r\n      defaultValue: string | boolean | number;\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Creates a new protection module\r\n   */\r\n  constructor(\r\n    public name: string,\r\n    public description: string,\r\n    public iconPath: string,\r\n    public isEnabledByDefault: boolean\r\n  ) {\r\n    this.name = name;\r\n    this.description = description;\r\n    this.iconPath = iconPath;\r\n    this.configDefault = {};\r\n    this.isEnabled = false;\r\n    this.isEnabledByDefault = isEnabledByDefault;\r\n    // ---- events\r\n    this.events = {};\r\n    this.schedules = [];\r\n    this.forEachValidPlayers = [];\r\n    // Save protection\r\n    PROTECTIONS[this.name] = this;\r\n  }\r\n\r\n  /**\r\n   * Sets the config to a typed object\r\n   * @param data typed object\r\n   * @returns\r\n   */\r\n  setConfigDefault(data: {\r\n    [key: string]: {\r\n      description: string;\r\n      defaultValue: string | boolean | number;\r\n    };\r\n  }): Protection<Config> {\r\n    this.configDefault = data;\r\n    TABLES.protections.hasSync(this.name).then((v) => {\r\n      if (v) return;\r\n      let saveData: IProtectionsConfig = {\r\n        enabled: true,\r\n      };\r\n      for (const key of Object.keys(data)) {\r\n        saveData[key] = data[key as keyof typeof data].defaultValue;\r\n      }\r\n      TABLES.protections.set(this.name, saveData);\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the config data\r\n   * @returns Config\r\n   */\r\n  getConfig(): Config {\r\n    let config = TABLES.protections.get(this.name);\r\n    if (!config) config = { enabled: this.isEnabled };\r\n    return config as Config;\r\n  }\r\n\r\n  async setConfig(data: Config) {\r\n    return TABLES.protections.set(this.name, data as IProtectionsConfig);\r\n  }\r\n\r\n  /**\r\n   * Triggers a change to a activate this module or not.\r\n   * @param enabled if this protection is enabled or not\r\n   */\r\n  private triggerChange(enabled: boolean) {\r\n    if (enabled) {\r\n      this.isEnabled = true;\r\n      // Enable this protection\r\n      this.onEnableCallback?.();\r\n      for (const [key, value] of Object.entries(this.events)) {\r\n        if (value.triggered) continue;\r\n        let callback = world.events[key as keyof Events].subscribe(\r\n          // @ts-ignore\r\n          value.callback\r\n        );\r\n        value.triggered = true;\r\n        value.callback = callback;\r\n      }\r\n      for (const v of this.forEachValidPlayers) {\r\n        if (v.key) continue;\r\n        let key = forEachValidPlayer(v.callback, v.delay);\r\n        v.key = key;\r\n      }\r\n      for (const v of this.schedules) {\r\n        if (v.runScheduleId) continue;\r\n        let runScheduleId = system.runSchedule(v.callback);\r\n        v.runScheduleId = runScheduleId;\r\n      }\r\n    } else {\r\n      this.isEnabled = false;\r\n      // Disable this protection\r\n      this.onDisableCallback?.();\r\n      for (const [key, value] of Object.entries(this.events)) {\r\n        if (!value.triggered) continue;\r\n        // @ts-ignore\r\n        world.events[key as keyof Events].unsubscribe(value.callback);\r\n        value.triggered = false;\r\n      }\r\n      for (const v of this.forEachValidPlayers) {\r\n        if (!v.key) continue;\r\n        clearForEachValidPlayer(v.key);\r\n        v.key = null;\r\n      }\r\n      for (const v of this.schedules) {\r\n        if (!v.runScheduleId) continue;\r\n        system.clearRunSchedule(v.runScheduleId);\r\n        v.runScheduleId = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Runs a callback once this protection is activated\r\n   * @param callback function to run\r\n   */\r\n  onEnable(callback: () => void): Protection<Config> {\r\n    this.onEnableCallback = callback;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Runs a callback once this protection is disabled\r\n   * @param callback function to run\r\n   */\r\n  onDisable(callback: () => void): Protection<Config> {\r\n    this.onDisableCallback = callback;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Subscribes to a worldEvent\r\n   * @param id event id to subscribe\r\n   * @param callback what to run on event callback\r\n   * @returns this\r\n   */\r\n  subscribe<T extends keyof Events>(\r\n    id: T,\r\n    callback: EventsReturnType<T>\r\n  ): Protection<Config> {\r\n    this.events[id] = {\r\n      callback: callback,\r\n      triggered: false,\r\n    };\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Schedules a callback to be run every x number of ticks\r\n   * @param callback callback\r\n   * @param tickInterval ticks\r\n   */\r\n  runSchedule(callback: () => void, tickInterval?: number): Protection<Config> {\r\n    this.schedules.push({\r\n      callback: callback,\r\n      tickInterval: tickInterval,\r\n      runScheduleId: null,\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Callback for each valid players\r\n   * @param callback\r\n   * @param delay\r\n   */\r\n  forEachValidPlayer(\r\n    callback: (player: Player) => void,\r\n    delay: number = 0\r\n  ): Protection<Config> {\r\n    this.forEachValidPlayers.push({\r\n      callback: callback,\r\n      delay: delay,\r\n      key: null,\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enables this protection\r\n   */\r\n  enable() {\r\n    this.triggerChange(true);\r\n  }\r\n\r\n  /**\r\n   * Disables this protection\r\n   */\r\n  disable() {\r\n    this.triggerChange(false);\r\n  }\r\n}\r\n", "import { Ban } from \"../models/Ban.js\";\r\nimport { Protection } from \"../models/Protection.js\";\r\n\r\n/**\r\n * Minecraft Bedrock Anti Crasher\r\n * @license MIT\r\n * @author Smell of curry\r\n * @version 1.0.0\r\n * --------------------------------------------------------------------------\r\n * This anti crasher works by testing if a player has reached a location\r\n * Horion's crasher teleports the player to 30 Million so we just test for\r\n * That location and if they are there we kick the player (USES: player.json)\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This is the distance where if you go past it will ban you\r\n */\r\nconst DISTANCE = 320000;\r\n\r\nnew Protection(\r\n  \"crasher\",\r\n  \"Protection against type 1 crasher\",\r\n  \"textures/ui/servers.png\",\r\n  true\r\n).forEachValidPlayer((player) => {\r\n  if (\r\n    Math.abs(player.location.x) > DISTANCE ||\r\n    Math.abs(player.location.y) > DISTANCE ||\r\n    Math.abs(player.location.z) > DISTANCE\r\n  ) {\r\n    new Ban(player, null, \"Crasher detected\");\r\n  }\r\n});\r\n", "import { GameMode, world } from \"@minecraft/server\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { Ban } from \"../models/Ban.js\";\r\nimport { Protection } from \"../models/Protection.js\";\r\nimport { PlayerLog } from \"../models/PlayerLog.js\";\r\nimport { Log } from \"../models/Log.js\";\r\n\r\n/**\r\n * The gamemode that you cannot be in unless you have staff tag\r\n */\r\nconst ILLEGAL_GAMEMODE = GameMode.creative;\r\n\r\n/**\r\n * Stores per world load violation data for players\r\n */\r\nconst ViolationCount = new PlayerLog<number>();\r\n\r\nconst protection = new Protection<{\r\n  clearPlayer: boolean;\r\n  setToSurvival: boolean;\r\n  banPlayer: boolean;\r\n  violationCount: number;\r\n}>(\r\n  \"gamemode\",\r\n  \"Blocks illegal gamemode\",\r\n  \"textures/ui/creative_icon.png\",\r\n  true\r\n).setConfigDefault({\r\n  clearPlayer: {\r\n    description: \"Whether to clear players inventory.\",\r\n    defaultValue: true,\r\n  },\r\n  setToSurvival: {\r\n    description: \"If player should be set to survival after being flagged.\",\r\n    defaultValue: true,\r\n  },\r\n  banPlayer: {\r\n    description: \"If player should be banned after violation count is met.\",\r\n    defaultValue: false,\r\n  },\r\n  violationCount: {\r\n    description: \"The amount of violations before ban.\",\r\n    defaultValue: 0,\r\n  },\r\n});\r\n\r\nprotection.runSchedule(() => {\r\n  const config = protection.getConfig();\r\n  for (const player of world.getPlayers({ gameMode: ILLEGAL_GAMEMODE })) {\r\n    if ([\"moderator\", \"admin\", \"builder\"].includes(getRole(player))) continue;\r\n    try {\r\n      if (config.setToSurvival) player.runCommandAsync(`gamemode s`);\r\n      if (config.clearPlayer) player.runCommandAsync(`clear @s`);\r\n    } catch (error) {}\r\n    new Log({\r\n      playerName: player.name,\r\n      protection: \"Gamemode\",\r\n      message: `${player.name} has entered into a illegal gamemode!`,\r\n    });\r\n    const count = (ViolationCount.get(player) ?? 0) + 1;\r\n    ViolationCount.set(player, count);\r\n    if (config.banPlayer && count >= config.violationCount)\r\n      new Ban(player, null, \"Illegal Gamemode\");\r\n  }\r\n}, 20);\r\n", "import { Player, world } from \"@minecraft/server\";\r\n\r\nexport class PlayerLog<T extends any = any> {\r\n  data: Map<string, T>;\r\n  events: Object;\r\n\r\n  constructor() {\r\n    this.data = new Map();\r\n    this.events = {\r\n      playerLeave: world.events.playerLeave.subscribe((data) =>\r\n        this.data.delete(data.playerName)\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Logs a player to a value\r\n   */\r\n  set(player: Player, value: T): void {\r\n    this.data.set(player.name, value);\r\n  }\r\n\r\n  /**\r\n   * Gets a players value\r\n   */\r\n  get(player: Player): T | undefined {\r\n    return this.data.get(player.name);\r\n  }\r\n\r\n  /**\r\n   * Deletes a player from log\r\n   */\r\n  delete(player: Player) {\r\n    this.data.delete(player.name);\r\n  }\r\n\r\n  /**\r\n   * Clears this Player log\r\n   */\r\n  clear() {\r\n    this.data.clear();\r\n  }\r\n\r\n  /**\r\n   * Gets all the players in the log\r\n   */\r\n  playerNames(): Array<string> {\r\n    return [...this.data.keys()];\r\n  }\r\n\r\n  /**\r\n   * Checks to see if a player is in this list\r\n   * @param player player to check\r\n   * @returns\r\n   */\r\n  includes(player: Player): boolean {\r\n    return this.playerNames().includes(player.name);\r\n  }\r\n}\r\n", "import {\r\n  world,\r\n  Location,\r\n  Block,\r\n  BlockPermutation,\r\n  Dimension,\r\n  Player,\r\n  system,\r\n} from \"@minecraft/server\";\r\nimport { API_CONTAINERS } from \"../../plugins/Anti-Cheat/config/moderation\";\r\nimport { CONTAINER_LOCATIONS } from \"../../plugins/Anti-Cheat/modules/managers/containers.js\";\r\n\r\ntype beforeBlockBreakCallback = (arg0: BeforeBlockBreakEvent) => void;\r\n\r\nconst CALLBACKS: {\r\n  [key: number]: {\r\n    callback: beforeBlockBreakCallback;\r\n  };\r\n} = {};\r\n\r\nworld.events.blockBreak.subscribe((data) => {\r\n  for (const callback of Object.values(CALLBACKS)) {\r\n    callback.callback(\r\n      new BeforeBlockBreakEvent(\r\n        data.block,\r\n        data.brokenBlockPermutation,\r\n        data.dimension,\r\n        data.player\r\n      )\r\n    );\r\n  }\r\n});\r\n\r\nexport class beforeBlockBreak {\r\n  /**\r\n   * Subscribes to a callback to get notified when a chat is sent that is not a command\r\n   * @param callback what to be called when one of these entities inventory's changes\r\n   * @returns the id that is used to unsubscribe\r\n   */\r\n  static subscribe(callback: beforeBlockBreakCallback): number {\r\n    const key = Date.now();\r\n    CALLBACKS[key] = { callback: callback };\r\n    return key;\r\n  }\r\n  static unsubscribe(key: number): void {\r\n    delete CALLBACKS[key];\r\n  }\r\n}\r\n\r\nclass BeforeBlockBreakEvent {\r\n  /**\r\n   * Contains information regarding an event before a player breaks a block.\r\n   * @param block Block broken in this event. Note that because this event fires right after a block is broken, the block you will receive will likely be of type 'minecraft:air'. See the .brokenBlockPermutation property for information on this block before it was broken.\r\n   * @param brokenBlockPermutation Returns permutation information about this block before it was broken.\r\n   * @param dimension Dimension that contains the block that has been broken in this event.\r\n   * @param player Player that broke the block for this event.\r\n   */\r\n  constructor(\r\n    public block: Block,\r\n    public brokenBlockPermutation: BlockPermutation,\r\n    public dimension: Dimension,\r\n    public player: Player\r\n  ) {\r\n    this.block = block;\r\n    this.brokenBlockPermutation = brokenBlockPermutation;\r\n    this.dimension = dimension;\r\n    this.player = player;\r\n  }\r\n\r\n  set cancel(value: boolean) {\r\n    // setting block back\r\n    this.dimension\r\n      .getBlock(this.block.location)\r\n      .setPermutation(this.brokenBlockPermutation.clone());\r\n    // setting chest inventory back\r\n    if (API_CONTAINERS.includes(this.brokenBlockPermutation.type.id)) {\r\n      const OLD_INVENTORY =\r\n        CONTAINER_LOCATIONS[JSON.stringify(this.block.location)];\r\n      if (OLD_INVENTORY) {\r\n        OLD_INVENTORY.load(this.block.getComponent(\"inventory\").container);\r\n      }\r\n    }\r\n    // killing dropped items\r\n    system.run(() => {\r\n      [\r\n        ...this.dimension.getEntities({\r\n          maxDistance: 2,\r\n          type: \"minecraft:item\",\r\n          location: new Location(\r\n            this.block.location.x,\r\n            this.block.location.y,\r\n            this.block.location.z\r\n          ),\r\n        }),\r\n      ].forEach((e) => e.kill());\r\n    })\r\n  }\r\n}\r\n", "import { system, world } from \"@minecraft/server\";\r\nimport { API_CONTAINERS, CHECK_SIZE } from \"../../config/moderation\";\r\nimport { IContainerLocation } from \"../../../../types\";\r\nimport { vector3ToBlockLocation } from \"../../../../utils.js\";\r\nimport { BlockInventory } from \"../models/BlockInventory\";\r\n\r\n/**\r\n * storage of all container locations in the world\r\n */\r\nexport let CONTAINER_LOCATIONS: IContainerLocation = {};\r\n\r\nsystem.runSchedule(() => {\r\n  CONTAINER_LOCATIONS = {};\r\n  for (const player of world.getPlayers()) {\r\n    if (player.dimension.id != \"minecraft:overworld\") continue;\r\n    const blockLoc = vector3ToBlockLocation(player.location);\r\n    const pos1 = blockLoc.offset(CHECK_SIZE.x, CHECK_SIZE.y, CHECK_SIZE.z);\r\n    const pos2 = blockLoc.offset(-CHECK_SIZE.x, -CHECK_SIZE.y, -CHECK_SIZE.z);\r\n\r\n    for (const location of pos1.blocksBetween(pos2)) {\r\n      if (location.y < -64) continue;\r\n      const block = player.dimension.getBlock(location);\r\n      if (!block) continue;\r\n      if (!API_CONTAINERS.includes(block.typeId)) continue;\r\n      CONTAINER_LOCATIONS[JSON.stringify(location)] = new BlockInventory(\r\n        block.getComponent(\"inventory\").container\r\n      );\r\n    }\r\n  }\r\n}, 100);\r\n", "import { BlockInventoryComponentContainer, ItemStack } from \"@minecraft/server\";\r\n\r\nexport class BlockInventory {\r\n  emptySlotsCount: number;\r\n  size: number;\r\n  items: Array<ItemStack>;\r\n  /**\r\n   * Coverts a blockInventoryComponentContainer and saves it\r\n   * @param {BlockInventoryComponentContainer} inventory\r\n   */\r\n  constructor(inventory: BlockInventoryComponentContainer) {\r\n    this.emptySlotsCount = inventory.emptySlotsCount;\r\n    this.size = inventory.size;\r\n    this.items = [];\r\n    for (let i = 0; i < this.size; i++) {\r\n      this.items[i] = inventory.getItem(i);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Loads this inventory onto a BlockInventoryComponentContainer\r\n   * @param {BlockInventoryComponentContainer} block block to load on\r\n   */\r\n  load(block: BlockInventoryComponentContainer) {\r\n    for (let i = 0; i < block.size; i++) {\r\n      if (!this.items[i]) continue;\r\n      block.setItem(i, this.items[i]);\r\n    }\r\n  }\r\n}\r\n", "import { PlayerLog } from \"../models/PlayerLog.js\";\r\nimport { getRole } from \"../../utils.js\";\r\nimport { Ban } from \"../models/Ban.js\";\r\nimport { beforeBlockBreak } from \"../../../../lib/Events/beforeBlockBreak.js\";\r\nimport { Protection } from \"../models/Protection.js\";\r\n\r\n/**\r\n * The log of the players break times\r\n */\r\nconst log = new PlayerLog();\r\n\r\n/**\r\n * if a block is broken faster than this time it is considered hacking\r\n */\r\nconst IMPOSSIBLE_BREAK_TIME = 15;\r\n\r\n/**\r\n * When breaking vegetation blocks it could cause a false trigger\r\n * so when a block gets broken and it has one of the block tags\r\n * it gets skipped and doesn't count in the nuker event\r\n *\r\n * @link https://wiki.bedrock.dev/blocks/block-tags.html\r\n */\r\nconst VALID_BLOCK_TAGS = [\r\n  \"snow\",\r\n  \"lush_plants_replaceable\",\r\n  \"azalea_log_replaceable\",\r\n  \"minecraft:crop\",\r\n  \"fertilize_area\",\r\n];\r\n\r\n/**\r\n * A list of all the blocks that are impossible to break unless you have hacks\r\n */\r\nconst IMPOSSIBLE_BREAKS = [\r\n  \"minecraft:water\",\r\n  \"minecraft:flowing_water\",\r\n  \"minecraft:lava\",\r\n  \"minecraft:flowing_lava\",\r\n  \"minecraft:bedrock\",\r\n];\r\n\r\n/**\r\n * Stores per world load violation data for players\r\n */\r\nconst ViolationCount = new PlayerLog<number>();\r\n\r\nlet beforeBlockBreakKey: number = null;\r\n\r\nconst protection = new Protection<{\r\n  banPlayer: boolean;\r\n  violationCount: number;\r\n}>(\r\n  \"nuker\",\r\n  \"Blocks block breaking too fast\",\r\n  \"textures/blocks/dirt.png\",\r\n  true\r\n).setConfigDefault({\r\n  banPlayer: {\r\n    description: \"If the player should be banned once violation count is met\",\r\n    defaultValue: false,\r\n  },\r\n  violationCount: {\r\n    description: \"Violations before ban\",\r\n    defaultValue: 0,\r\n  },\r\n});\r\n\r\nprotection\r\n  .onEnable(() => {\r\n    const config = protection.getConfig();\r\n    beforeBlockBreakKey = beforeBlockBreak.subscribe((data) => {\r\n      if ([\"moderator\", \"admin\"].includes(getRole(data.player))) return;\r\n      if (data.block.getTags().some((tag) => VALID_BLOCK_TAGS.includes(tag)))\r\n        return;\r\n      const old = log.get(data.player);\r\n      log.set(data.player, Date.now());\r\n      if (!old) return;\r\n\r\n      // If block is impossible to break skip check, reduces lag.\r\n      if (!IMPOSSIBLE_BREAKS.includes(data.block.typeId)) {\r\n        if (old < Date.now() - IMPOSSIBLE_BREAK_TIME) return;\r\n        const count = (ViolationCount.get(data.player) ?? 0) + 1;\r\n        ViolationCount.set(data.player, count);\r\n        if (config.banPlayer && count >= config.violationCount)\r\n          new Ban(data.player, null, \"Using Nuker\");\r\n      }\r\n\r\n      data.cancel = true;\r\n    });\r\n  })\r\n  .onDisable(() => {\r\n    beforeBlockBreak.unsubscribe(beforeBlockBreakKey);\r\n  });\r\n", "import { PREFIX } from \"../../../../config/commands\";\r\nimport { getRole } from \"../../utils\";\r\nimport { Mute } from \"../models/Mute\";\r\nimport { PlayerLog } from \"../models/PlayerLog\";\r\nimport { Protection } from \"../models/Protection\";\r\n\r\nconst previousMessage = new PlayerLog<string>();\r\n\r\n/**\r\n * Stores per world load violation data for players\r\n */\r\nconst ViolationCount = new PlayerLog<number>();\r\n\r\nconst protection = new Protection<{\r\n  permMutePlayer: boolean;\r\n  violationCount: number;\r\n  repeatedMessages: boolean;\r\n  zalgo: boolean;\r\n}>(\r\n  \"spam\",\r\n  \"Blocks spam in chat\",\r\n  \"textures/ui/mute_on.png\",\r\n  true\r\n).setConfigDefault({\r\n  permMutePlayer: {\r\n    description:\r\n      \"If player should be permanently muted once violation count is met.\",\r\n    defaultValue: false,\r\n  },\r\n  violationCount: {\r\n    description: \"Violation count before permanent mute\",\r\n    defaultValue: 0,\r\n  },\r\n  repeatedMessages: {\r\n    description: \"Blocks repeated messages\",\r\n    defaultValue: true,\r\n  },\r\n  zalgo: {\r\n    description: \"Blocks zalgo\",\r\n    defaultValue: true,\r\n  },\r\n});\r\n\r\nprotection.subscribe(\"beforeChat\", (data) => {\r\n  try {\r\n    if (data.message.startsWith(PREFIX)) return;\r\n    if ([\"admin\", \"moderator\"].includes(getRole(data.sender))) return;\r\n    const config = protection.getConfig();\r\n    const isSpam = () => {\r\n      const count = (ViolationCount.get(data.sender) ?? 0) + 1;\r\n      ViolationCount.set(data.sender, count);\r\n      if (config.permMutePlayer && count >= config.violationCount)\r\n        new Mute(data.sender, null, \"Spamming\");\r\n    };\r\n    if (\r\n      config.repeatedMessages &&\r\n      previousMessage.get(data.sender) == data.message\r\n    ) {\r\n      data.cancel = true;\r\n      isSpam();\r\n      return data.sender.tell(`\u00A7cRepeated message detected!`);\r\n    }\r\n    if (config.zalgo && /%CC%/g.test(encodeURIComponent(data.message))) {\r\n      data.cancel = true;\r\n      isSpam();\r\n      return data.sender.tell(\r\n        `\u00A7cYou message contains some type of zalgo and cannot be sent!`\r\n      );\r\n    }\r\n    previousMessage.set(data.sender, data.message);\r\n  } catch (error) {\r\n    console.warn(error + error.stack);\r\n  }\r\n});\r\n", "import { Player } from \"@minecraft/server\";\r\nimport { FORBIDDEN_ITEMS } from \"../../config/moderation.js\";\r\nimport { AIR } from \"../../../../index.js\";\r\nimport { getConfigId, getMaxEnchantmentLevel } from \"../../utils\";\r\nimport { Ban } from \"../models/Ban.js\";\r\nimport { Log } from \"../models/Log.js\";\r\nimport { PlayerLog } from \"../models/PlayerLog.js\";\r\nimport { Protection } from \"../models/Protection.js\";\r\n\r\n/**\r\n * Stores violation count for player\r\n */\r\nconst ViolationCount = new PlayerLog<number>();\r\n\r\n/**\r\n * Flags a player for a item they should not have\r\n * @param player player to flag\r\n * @param index the index of this item in the players inventory\r\n */\r\nfunction flag(player: Player, index: number) {\r\n  const inventory = player.getComponent(\"inventory\").container;\r\n  const item = inventory.getItem(index);\r\n  const data = getConfigId(\"cbe_config\");\r\n  // Clear Item\r\n  if (data.clearItem) inventory.setItem(index, AIR);\r\n  // Log action\r\n  new Log({\r\n    playerName: player.name,\r\n    message: `${player.name} Has obtained a unobtainable item: ${item.typeId}`,\r\n    protection: \"unobtainable\",\r\n  });\r\n  // Violation\r\n  if (!data.banPlayer) return;\r\n  const violations = (ViolationCount.get(player) ?? 0) + 1;\r\n  ViolationCount.set(player, violations);\r\n  if (violations < data.violationCount) return;\r\n  new Ban(player, null, \"Possession of Unobtainable item\");\r\n}\r\n\r\nnew Protection(\r\n  \"unobtainable\",\r\n  \"Blocks unobtainable items\",\r\n  \"textures/blocks/end_portal.png\",\r\n  true\r\n).forEachValidPlayer((player) => {\r\n  console.warn(`unobtainable`);\r\n  const BANNED_ITEMS = getConfigId(\"banned_items\");\r\n\r\n  const inventory = player.getComponent(\"inventory\").container;\r\n  for (let i = 0; i < inventory.size; i++) {\r\n    const item = inventory.getItem(i);\r\n    if (!item) continue;\r\n    if (BANNED_ITEMS.includes(item.typeId)) return flag(player, i);\r\n    if (FORBIDDEN_ITEMS.includes(item.typeId)) {\r\n      // Log action\r\n      new Log({\r\n        playerName: player.name,\r\n        message: `${player.name} Has obtained a Forbidden item: ${item.typeId}`,\r\n        protection: \"unobtainable\",\r\n      });\r\n      return inventory.setItem(i, AIR);\r\n    }\r\n    // Player is allowed to have this itemType\r\n    /**\r\n     * List of all enchantments that are valid on this item\r\n     */\r\n    let enchantments: string[] = [];\r\n    for (const enchantment of item.getComponent(\"enchantments\").enchantments) {\r\n      const MAX_LEVEL = getMaxEnchantmentLevel(enchantment);\r\n      if (enchantment.level > MAX_LEVEL) return flag(player, i);\r\n      if (enchantment.level < 1) return flag(player, i);\r\n      if (enchantments.includes(enchantment.type.id)) return flag(player, i);\r\n      // Enchantment Is valid\r\n      enchantments.push(enchantment.type.id);\r\n    }\r\n  }\r\n});\r\n", "import {\r\n  MinecraftBlockTypes,\r\n  MinecraftEntityTypes,\r\n  MinecraftItemTypes,\r\n  Player,\r\n} from \"@minecraft/server\";\r\nimport { AIR } from \"../../../../index.js\";\r\nimport { getGamemode } from \"../../utils.js\";\r\nimport { Protection } from \"../models/Protection.js\";\r\n\r\n/**\r\n * List of blocks to test\r\n */\r\nconst BLOCKS = [\r\n  MinecraftBlockTypes.chest.id,\r\n  MinecraftBlockTypes.trappedChest.id,\r\n  MinecraftBlockTypes.barrel.id,\r\n  MinecraftBlockTypes.dispenser.id,\r\n  MinecraftBlockTypes.dropper.id,\r\n  MinecraftBlockTypes.furnace.id,\r\n  MinecraftBlockTypes.litFurnace.id,\r\n  MinecraftBlockTypes.blastFurnace.id,\r\n  MinecraftBlockTypes.litBlastFurnace.id,\r\n  MinecraftBlockTypes.smoker.id,\r\n  MinecraftBlockTypes.litSmoker.id,\r\n  MinecraftBlockTypes.hopper.id,\r\n  MinecraftBlockTypes.beehive.id,\r\n  MinecraftBlockTypes.beeNest.id,\r\n  MinecraftBlockTypes.mobSpawner.id,\r\n];\r\n\r\n/**\r\n * List of items to test\r\n */\r\nconst CHEST_BOATS = [\r\n  MinecraftItemTypes.chestBoat.id,\r\n  MinecraftItemTypes.oakChestBoat.id,\r\n  MinecraftItemTypes.birchChestBoat.id,\r\n  MinecraftItemTypes.acaciaChestBoat.id,\r\n  MinecraftItemTypes.jungleChestBoat.id,\r\n  MinecraftItemTypes.spruceChestBoat.id,\r\n  MinecraftItemTypes.darkOakChestBoat.id,\r\n  MinecraftItemTypes.mangroveChestBoat.id,\r\n];\r\n\r\nnew Protection(\r\n  \"nbt\",\r\n  \"Blocks illegal nbt on items\",\r\n  \"textures/ui/icon_random.png\",\r\n  true\r\n)\r\n  .subscribe(\"blockPlace\", async ({ block }) => {\r\n    if (!BLOCKS.includes(block.typeId)) return;\r\n    const permutation = block.permutation;\r\n    await block.dimension.runCommandAsync(\r\n      `setblock ${block.x} ${block.y} ${block.z} ${block.typeId}`\r\n    );\r\n    block.setPermutation(permutation);\r\n  })\r\n  .subscribe(\"beforeItemUseOn\", (data) => {\r\n    if (!(data.source instanceof Player)) return;\r\n    if (!CHEST_BOATS.includes(data.item.typeId)) return;\r\n    data.cancel = true;\r\n    data.source.dimension.spawnEntity(\r\n      MinecraftEntityTypes.chestBoat.id,\r\n      data.blockLocation.above()\r\n    );\r\n    if (getGamemode(data.source) == \"creative\") return;\r\n    data.source\r\n      .getComponent(\"inventory\")\r\n      .container.setItem(data.source.selectedSlot, AIR);\r\n  });\r\n", "import { MinecraftEffectTypes, Player, world } from \"@minecraft/server\";\r\nimport { getServerOwnerName, setRole, setServerOwner } from \"../../utils\";\r\n\r\nlet e = world.events.beforeDataDrivenEntityTriggerEvent.subscribe((data) => {\r\n  if (!(data.entity instanceof Player)) return;\r\n  if (data.id != \"rubedo:becomeAdmin\") return;\r\n  // Rubedo is now verified to be at the top\r\n  data.entity.removeTag(\"CHECK_PACK\");\r\n  const serverOwnerName = getServerOwnerName();\r\n  if (serverOwnerName) {\r\n    data.entity.playSound(\"note.bass\");\r\n    data.entity.tell(\r\n      `\u00A7cFailed to give server owner: \"${serverOwnerName}\" is already owner!`\r\n    );\r\n    return world.events.beforeDataDrivenEntityTriggerEvent.unsubscribe(e);\r\n  }\r\n  setRole(data.entity, \"admin\");\r\n  setServerOwner(data.entity);\r\n  data.entity.addEffect(MinecraftEffectTypes.blindness, 3, 255, true);\r\n  data.entity.tell(\r\n    `\u00A7aYou have now been set as the \"owner\" of this server. The command \"/function start\" will not do anything anymore, type \"-help\" for more information!`\r\n  );\r\n});\r\n", "import {\r\n  DynamicPropertiesDefinition,\r\n  MinecraftEntityTypes,\r\n  world,\r\n} from \"@minecraft/server\";\r\nimport { OBJECTIVES } from \"../../../../config/objectives\";\r\n\r\nworld.events.worldInitialize.subscribe(({ propertyRegistry }) => {\r\n  let def2 = new DynamicPropertiesDefinition();\r\n  def2.defineString(\"role\", 30);\r\n  propertyRegistry.registerEntityTypeDynamicProperties(\r\n    def2,\r\n    MinecraftEntityTypes.player\r\n  );\r\n\r\n  let def3 = new DynamicPropertiesDefinition();\r\n  def3.defineString(\"worldsOwner\", 100);\r\n  def3.defineBoolean(\"isLockDown\");\r\n  propertyRegistry.registerWorldDynamicProperties(def3);\r\n\r\n  for (const obj of OBJECTIVES) {\r\n    world.scoreboard.addObjective(obj.objective, obj.displayName ?? \"\");\r\n  }\r\n});\r\n", "/*\r\n|--------------------------------------------------------------------------\r\n| Objectives\r\n|--------------------------------------------------------------------------\r\n|\r\n| This is a list of all objectives this pack uses\r\n| please add any objective to this list so it can be added at world creation\r\n| make sure to add them before sending pack to others and new worlds.\r\n|\r\n*/\r\ninterface IObjective {\r\n  objective: string;\r\n  displayName?: string;\r\n}\r\n\r\nexport const OBJECTIVES: Array<IObjective> = [];\r\n", "import { Location } from \"@minecraft/server\";\r\nimport \"./protections\";\r\nimport \"./modules/commands/import\";\r\nimport \"./modules/managers/import\";\r\nimport \"./modules/pages/import\";\r\nimport \"./modules/protections/import\";\r\nimport \"./modules/events/import\";\r\n\r\n/**\r\n * Stores npc locations that are verified to allow NPC's to spawn in\r\n */\r\nexport let NPC_LOCATIONS: Array<Location> = [];\r\n\r\nexport function clearNpcLocations() {\r\n  NPC_LOCATIONS = [];\r\n}\r\n", "console.warn(`----- Importing Plugins -----`);\r\n\r\nimport \"./Anti-Cheat/index\";\r\n//import \"./ChatRanks/index\";\r\n//import \"./GlobalBans/index\";\r\n", "import {\r\n  DynamicPropertiesDefinition,\r\n  EntityTypes,\r\n  world,\r\n} from \"@minecraft/server\";\r\nimport { ENTITY_IDENTIFIER, ENTITY_LOCATION } from \"../config/database\";\r\nimport { DIMENSIONS } from \"../utils.js\";\r\n\r\nworld.events.worldInitialize.subscribe(({ propertyRegistry }) => {\r\n  /**\r\n   * Loads Ticking Area\r\n   */\r\n  DIMENSIONS.overworld.runCommandAsync(\r\n    `tickingarea add ${ENTITY_LOCATION.x} ${ENTITY_LOCATION.y} ${ENTITY_LOCATION.z} ${ENTITY_LOCATION.x} ${ENTITY_LOCATION.y} ${ENTITY_LOCATION.z} db true`\r\n  );\r\n\r\n  let def = new DynamicPropertiesDefinition();\r\n  def.defineString(\"tableName\", 30);\r\n  def.defineNumber(\"index\");\r\n  propertyRegistry.registerEntityTypeDynamicProperties(\r\n    def,\r\n    EntityTypes.get(ENTITY_IDENTIFIER)\r\n  );\r\n});\r\n"],
  "mappings": "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",
  "names": ["ItemStack", "MinecraftItemTypes", "system", "world", "PREFIX", "ItemStack", "MinecraftItemTypes", "BlockLocation", "MAX_DATABASE_STRING_SIZE", "ENTITY_IDENTIFIER", "ENTITY_LOCATION", "INVENTORY_SIZE", "system", "world", "BlockLocation", "MinecraftDimensionTypes", "system", "world", "MessageFormData", "MessageForm", "title", "body", "MessageFormData", "text", "callback", "player", "response", "DIMENSIONS", "world", "MinecraftDimensionTypes", "durationToMs", "duration", "values", "ms", "value", "length", "unit", "msToTime", "vector3ToBlockLocation", "loc", "BlockLocation", "confirmAction", "player", "action", "onConfirm", "onCancel", "MessageForm", "sleep", "tick", "resolve", "runScheduleId", "system", "LocationEquals", "a", "b", "aLocations", "bLocations", "v", "sort3DVectors", "vector1", "vector2", "x1", "y1", "z1", "x2", "y2", "z2", "ox1", "oy1", "oz1", "ox2", "oy2", "oz2", "betweenVector3", "target", "x", "y", "z", "chunkString", "str", "CALLBACKS", "ENTITIES_LOADED", "system", "DIMENSIONS", "i", "callback", "world", "data", "EntitiesLoad", "resolve", "key", "Database", "tableName", "EntitiesLoad", "v", "index", "entity", "DIMENSIONS", "ENTITY_IDENTIFIER", "ENTITY_LOCATION", "e", "resolve", "entities", "chunks", "chunkString", "MAX_DATABASE_STRING_SIZE", "entitiesNeeded", "INVENTORY_SIZE", "i", "inventory", "chunk", "item", "ItemStack", "MinecraftItemTypes", "a", "b", "stringifiedData", "data", "key", "value", "status", "TABLES", "Database", "world", "fetch", "playerName", "world", "player", "LiteralArgumentType", "name", "value", "StringArgumentType", "IntegerArgumentType", "FloatArgumentType", "LocationArgumentType", "BooleanArgumentType", "PlayerArgumentType", "fetch", "TargetArgumentType", "ArrayArgumentType", "types", "DurationArgumentType", "PlayerNameArgumentType", "TABLES", "ArgumentTypes", "CommandCallback", "data", "text", "getChatAugments", "message", "prefix", "e", "commandNotFound", "player", "command", "noPerm", "commandSyntaxFail", "baseCommand", "args", "i", "PREFIX", "types", "c", "LiteralArgumentType", "parseLocationArgs", "x", "y", "z", "location", "viewVector", "locations", "viewVectors", "a", "arg", "r", "b", "index", "sendCallback", "cmdArgs", "event", "lastArg", "argsToReturn", "LocationArgumentType", "CommandCallback", "COMMANDS", "world", "data", "PREFIX", "args", "getChatAugments", "command", "c", "event", "commandNotFound", "noPerm", "verifiedCommands", "getArg", "start", "i", "arg", "v", "commandSyntaxFail", "sendCallback", "name", "role", "TABLES", "color_code", "system", "world", "GUI_ITEM", "ENTITY_INVENTORY", "world", "Player", "BlockLocation", "MinecraftBlockTypes", "GameMode", "system", "BlockLocation", "MinecraftBlockTypes", "DEFAULT_REGION_PERMISSIONS", "DOORS_SWITCHES", "BLOCK_CONTAINERS", "REGIONS", "REGIONS_HAVE_BEEN_GRABBED", "LOWEST_Y_VALUE", "HIGHEST_Y_VALUE", "Region", "regions", "TABLES", "region", "r", "blockLocation", "dimensionId", "betweenVector3", "from", "to", "permissions", "key", "DEFAULT_REGION_PERMISSIONS", "loadRegionDenys", "loc1", "BlockLocation", "loc2", "DIMENSIONS", "MinecraftBlockTypes", "entity", "value", "ChangePlayerRoleTask", "TABLES", "playerName", "t", "role", "tasks", "MinecraftBlockTypes", "MinecraftItemTypes", "FORBIDDEN_ITEMS", "BANNED_ITEMS", "FORBIDDEN_BLOCKS", "BANNED_BLOCKS", "API_CONTAINERS", "CONTAINERS", "CHECK_SIZE", "ENCHANTMENTS", "VERSION", "APPEAL_LINK", "kick", "player", "message", "onFail", "isServerOwner", "error", "getRole", "Player", "TABLES", "setRole", "value", "inGamePlayer", "world", "p", "ChangePlayerRoleTask", "getServerOwner", "id", "getServerOwnerName", "ownerId", "ids", "key", "setServerOwner", "isLockedDown", "setLockDown", "val", "loadRegionDenys", "region", "Region", "loc1", "BlockLocation", "loc2", "blockLocation", "DIMENSIONS", "MinecraftBlockTypes", "CALLBACKS", "forEachValidPlayerCalls", "forEachValidPlayer", "callback", "delay", "clearForEachValidPlayer", "EntitiesLoad", "system", "players", "i", "CALLBACK", "getConfigId", "BANNED_ITEMS", "BANNED_BLOCKS", "ENCHANTMENTS", "APPEAL_LINK", "setConfigId", "getMaxEnchantmentLevel", "enchantment", "getGamemode", "GameMode", "g", "system", "system", "CALLBACKS", "MAPPED_INVENTORIES", "PREVIOUS_CHANGE", "getSlotChanges", "entity", "oldInv", "newInv", "changes", "i", "change_data", "getItemUid", "item", "data", "mapInventory", "container", "inventory", "system", "callback", "DIMENSIONS", "change", "onEntityInventorySlotChange", "entities", "key", "Location", "CHESTGUIS", "PAGES", "getHeldItem", "player", "clearPlayersPointer", "ItemToClear", "inventory", "itemsToLoad", "i", "item", "e", "getItemAtSlot", "entity", "slot", "ItemGrabbedCallback", "gui", "slot", "change", "text", "item", "db", "page", "extras", "form", "sleep", "ChestGUI", "player", "ENTITY_INVENTORY", "system", "onEntityInventorySlotChange", "entity", "change", "pageId", "extras", "c", "AIR", "PAGES", "page", "slot", "clearPlayersPointer", "getItemAtSlot", "ItemGrabbedCallback", "CHESTGUIS", "ItemStack", "PageItem", "itemType", "components", "itemStack", "enchantments", "enchantment", "DefaultFill", "entity", "page", "extras", "container", "i", "slot", "AIR", "Page", "id", "fillType", "DefaultFill", "PAGES", "slot", "item", "action", "data", "MinecraftItemTypes", "HOME_PAGE", "Page", "PageItem", "ctx", "EntitiesLoad", "system", "player", "world", "getHeldItem", "GUI_ITEM", "CHESTGUIS", "getRole", "ChestGUI", "validIds", "c", "entity", "DIMENSIONS", "ENTITY_INVENTORY", "system", "PROTECTIONS", "EntitiesLoad", "system", "protection", "text", "a", "b", "playerName", "duration", "reason", "name", "expire", "Command", "data", "type", "depth", "parent", "player", "LiteralArgumentType", "COMMANDS", "cmd", "name", "StringArgumentType", "IntegerArgumentType", "types", "ArrayArgumentType", "BooleanArgumentType", "LocationArgumentType", "callback", "Player", "setBan", "player", "id", "duration", "reason", "by", "data", "Player", "durationToMs", "TABLES", "Ban", "ban", "ctx", "player", "duration", "reason", "by", "TABLES", "confirmAction", "Ban", "text", "root", "Command", "getRole", "ArgumentTypes", "playerName", "banData", "bans", "msToTime", "world", "broadcast", "text", "world", "Command", "player", "getRole", "ctx", "message", "root", "Command", "player", "getRole", "ctx", "table", "key", "data", "TABLES", "error", "value", "keys", "values", "Command", "player", "getRole", "ArgumentTypes", "ctx", "i", "Freeze", "player", "reason", "data", "TABLES", "root", "Command", "player", "getRole", "ArgumentTypes", "ctx", "reason", "Freeze", "playerName", "freeze", "TABLES", "freezes", "text", "CommandNameArgumentType", "name", "value", "COMMANDS", "c", "sendCommandType", "baseCommand", "args", "player", "PREFIX", "a", "sendArguments", "bc", "p", "child", "sendPageHeader", "maxPages", "getCommands", "getMaxPages", "commands", "root", "Command", "ctx", "cmd", "command", "world", "Command", "player", "getRole", "ctx", "isLockedDown", "setLockDown", "confirmAction", "text", "world", "kick", "Mute", "player", "TABLES", "duration", "reason", "by", "msLength", "durationToMs", "data", "root", "Command", "player", "getRole", "ArgumentTypes", "ctx", "duration", "reason", "Mute", "playerName", "mute", "TABLES", "mutes", "text", "msToTime", "Location", "Npc", "entity", "NPC_LOCATIONS", "l", "LocationEquals", "TABLES", "key", "location", "dimension", "data", "clearNpcLocations", "Command", "player", "getRole", "ctx", "x", "y", "z", "Npc", "Location", "system", "getServerTPS", "startTime", "ticks", "resolve", "s", "Command", "ctx", "BlockLocation", "command", "Command", "player", "getRole", "ctx", "from_x", "from_z", "to_x", "to_z", "Region", "loc", "BlockLocation", "r", "regions", "region", "permission", "key", "value", "entityCommands", "entity", "currentAllowedEntities", "v", "ROLES", "StringIsNumber", "value", "ToArray", "enumme", "key", "root", "Command", "player", "getRole", "isServerOwner", "ArgumentTypes", "ROLES", "ctx", "playerName", "role", "setRole", "ownerRoot", "ownerId", "getServerOwner", "ids", "TABLES", "ownerName", "confirmAction", "setServerOwner", "ActionFormData", "ActionForm", "title", "body", "ActionFormData", "text", "iconPath", "callback", "player", "response", "ModalFormData", "FormCallback", "form", "player", "callback", "message", "MessageForm", "ModalForm", "title", "ModalFormData", "label", "options", "defaultValueIndex", "minimumValue", "maximumValue", "valueStep", "defaultValue", "placeholderText", "player", "callback", "i", "response", "FormCallback", "v", "manageBannedItemsForm", "player", "ActionForm", "removeBannedItemForm", "addBannedItemForm", "ModalForm", "getConfigId", "ctx", "item", "items", "p", "setConfigId", "manageBannedBlocksForm", "removeBannedBlockForm", "addBannedBlockForm", "block", "blocks", "manageEnchantmentLevelsForm", "ENCHANTMENTS", "enchantment", "levelString", "level", "enchants", "manageAppealLinkForm", "APPEAL_LINK", "link", "showAutoModHomeForm", "player", "form", "ActionForm", "protection", "PROTECTIONS", "showProtectionConfig", "showHomeForm", "data", "ModalForm", "keys", "key", "value", "ctx", "enabled", "config", "i", "showHomeForm", "player", "ActionForm", "showAutoModHomeForm", "manageBannedItemsForm", "manageBannedBlocksForm", "manageEnchantmentLevelsForm", "manageAppealLinkForm", "Command", "player", "getRole", "ctx", "showHomeForm", "world", "vanish", "player", "say", "world", "Command", "getRole", "ctx", "Command", "ctx", "VERSION", "Command", "player", "getRole", "ArgumentTypes", "ctx", "reason", "kick", "Log", "data", "TABLES", "timeDifference", "previous", "msPerMinute", "msPerHour", "msPerDay", "msPerMonth", "msPerYear", "elapsed", "root", "Command", "player", "getRole", "ctx", "message", "Log", "page", "order", "allLogs", "TABLES", "a", "b", "maxPages", "PREFIX", "key", "value", "ArgumentTypes", "playerName", "v", "protection", "root", "Command", "player", "getRole", "ArgumentTypes", "ctx", "destination", "forEachValidPlayer", "player", "banData", "TABLES", "kick", "msToTime", "getConfigId", "error", "Location", "forEachValidPlayer", "player", "freezeData", "TABLES", "Location", "DIMENSIONS", "world", "CALLBACKS", "world", "data", "PREFIX", "callback", "beforeChat", "key", "beforeChat", "data", "muteData", "Mute", "TABLES", "text", "BlockLocation", "system", "world", "system", "loadRegionDenys", "world", "data", "getRole", "region", "Region", "block", "DOORS_SWITCHES", "BLOCK_CONTAINERS", "i", "bL", "entity", "BlockLocation", "EntitiesLoad", "DIMENSIONS", "forEachValidPlayer", "player", "world", "world", "player", "EntitiesLoad", "isLockedDown", "getRole", "kick", "text", "Mute", "TABLES", "roleToSet", "ChangePlayerRoleTask", "setRole", "Items", "MinecraftItemTypes", "world", "FILLABLE_SLOTS", "FILLABLE_SLOTS_ENDERCHEST", "ViewPlayersFill", "entity", "page", "extras", "container", "i", "slot", "AIR", "player", "world", "item", "PageItem", "MinecraftItemTypes", "ctx", "ViewPlayerInventoryFill", "EnderChestItem", "p", "CHESTGUIS", "e", "inventory", "used_slots", "Items", "ViewPlayerEnderChestFill", "ItemTypes", "ChestGuiItem", "Page", "Player", "MinecraftBlockTypes", "system", "world", "Protection", "name", "description", "iconPath", "isEnabledByDefault", "PROTECTIONS", "data", "TABLES", "v", "saveData", "key", "config", "enabled", "value", "callback", "world", "forEachValidPlayer", "runScheduleId", "system", "clearForEachValidPlayer", "id", "tickInterval", "delay", "CBE_ENTITIES", "protection", "Protection", "entity", "kill", "Npc", "data", "Player", "getRole", "config", "MinecraftBlockTypes", "FORBIDDEN_BLOCKS", "getConfigId", "Ban", "DISTANCE", "Protection", "player", "Ban", "GameMode", "world", "world", "PlayerLog", "data", "player", "value", "ILLEGAL_GAMEMODE", "GameMode", "ViolationCount", "PlayerLog", "protection", "Protection", "config", "player", "world", "getRole", "Log", "count", "Ban", "world", "Location", "system", "system", "world", "BlockInventory", "inventory", "i", "block", "CONTAINER_LOCATIONS", "system", "player", "world", "blockLoc", "vector3ToBlockLocation", "pos1", "CHECK_SIZE", "pos2", "location", "block", "API_CONTAINERS", "BlockInventory", "CALLBACKS", "world", "data", "callback", "BeforeBlockBreakEvent", "beforeBlockBreak", "key", "block", "brokenBlockPermutation", "dimension", "player", "value", "API_CONTAINERS", "OLD_INVENTORY", "CONTAINER_LOCATIONS", "system", "Location", "e", "log", "PlayerLog", "IMPOSSIBLE_BREAK_TIME", "VALID_BLOCK_TAGS", "IMPOSSIBLE_BREAKS", "ViolationCount", "beforeBlockBreakKey", "protection", "Protection", "config", "beforeBlockBreak", "data", "getRole", "tag", "old", "count", "Ban", "previousMessage", "PlayerLog", "ViolationCount", "protection", "Protection", "data", "PREFIX", "getRole", "config", "isSpam", "count", "Mute", "error", "ViolationCount", "PlayerLog", "flag", "player", "index", "inventory", "item", "data", "getConfigId", "AIR", "Log", "violations", "Ban", "Protection", "BANNED_ITEMS", "i", "FORBIDDEN_ITEMS", "enchantments", "enchantment", "MAX_LEVEL", "getMaxEnchantmentLevel", "MinecraftBlockTypes", "MinecraftEntityTypes", "MinecraftItemTypes", "Player", "BLOCKS", "MinecraftBlockTypes", "CHEST_BOATS", "MinecraftItemTypes", "Protection", "block", "permutation", "data", "Player", "MinecraftEntityTypes", "getGamemode", "AIR", "MinecraftEffectTypes", "Player", "world", "e", "world", "data", "Player", "serverOwnerName", "getServerOwnerName", "setRole", "setServerOwner", "MinecraftEffectTypes", "DynamicPropertiesDefinition", "MinecraftEntityTypes", "world", "OBJECTIVES", "world", "propertyRegistry", "def2", "DynamicPropertiesDefinition", "MinecraftEntityTypes", "def3", "obj", "OBJECTIVES", "NPC_LOCATIONS", "clearNpcLocations", "DynamicPropertiesDefinition", "EntityTypes", "world", "world", "propertyRegistry", "DIMENSIONS", "ENTITY_LOCATION", "def", "DynamicPropertiesDefinition", "EntityTypes", "ENTITY_IDENTIFIER", "system", "data", "AIR", "ItemStack", "MinecraftItemTypes"]
}
